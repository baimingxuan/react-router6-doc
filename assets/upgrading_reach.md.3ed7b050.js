import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.6f0990a9.js";const d=JSON.parse('{"title":"ä» Reach Router è¿ç§»åˆ° React Router v6","description":"","frontmatter":{},"headers":[],"relativePath":"upgrading/reach.md","filePath":"upgrading/reach.md","lastUpdated":1699796490000}'),p={name:"upgrading/reach.md"},o=l(`<h1 id="ä»-reach-router-è¿ç§»åˆ°-react-router-v6" tabindex="-1">ä» Reach Router è¿ç§»åˆ° React Router v6 <a class="header-anchor" href="#ä»-reach-router-è¿ç§»åˆ°-react-router-v6" aria-label="Permalink to &quot;ä» Reach Router è¿ç§»åˆ° React Router v6&quot;">â€‹</a></h1><blockquote><p>NOTE</p><p>æœ¬é¡µé¢æ­£åœ¨åˆ¶ä½œä¸­ã€‚è¯·å‘Šè¯‰æˆ‘ä»¬å“ªé‡Œæœ‰ä¸è¶³ï¼Œä»¥ä¾¿æˆ‘ä»¬å°½å¯èƒ½é¡ºåˆ©åœ°è¿›è¡Œè¿ç§»ï¼</p></blockquote><h2 id="å¯¼è¨€" tabindex="-1">å¯¼è¨€ <a class="header-anchor" href="#å¯¼è¨€" aria-label="Permalink to &quot;å¯¼è¨€&quot;">â€‹</a></h2><p>å½“æˆ‘ä»¬ä» <code>@reach/router</code> ç”¨æˆ·çš„è§’åº¦å‡ºå‘æ„å»º React Router v6 æ—¶ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·å‡ ä¸ªç›®æ ‡ï¼š</p><ul><li>ä¿æŒè¾ƒå°çš„æ‰“åŒ…å¤§å°ï¼ˆå®è¯æ˜ï¼Œæˆ‘ä»¬çš„æ‰“åŒ…å¤§å°å°äº <code>@reach/router</code>ï¼‰</li><li>ä¿ç•™ <code>@reach/router</code> çš„ç²¾åéƒ¨åˆ†ï¼ˆåµŒå¥—è·¯ç”±ï¼Œä»¥åŠé€šè¿‡è·¯å¾„åŒ¹é…å’Œ <code>navigate</code> ç®€åŒ–çš„ APIï¼‰</li><li>æ›´æ–° API ä»¥ç¬¦åˆç°ä»£ React çš„ä¹ æƒ¯ç”¨æ³•ï¼ˆå³ hooksï¼‰</li><li>ä¸ºå¹¶å‘æ¨¡å¼å’Œæš‚åœæ¨¡å¼æä¾›æ›´å¥½çš„æ”¯æŒ</li><li>åœæ­¢é»˜è®¤è¿›è¡Œä¸å¤Ÿå¥½çš„ç„¦ç‚¹ç®¡ç†</li></ul><p>å¦‚æœæˆ‘ä»¬è¦åˆ¶ä½œ <code>@reach/router</code> v2ï¼Œå®ƒå°†ä¸ React Router v6 å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚å› æ­¤ï¼Œ <code>@reach/router</code> çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯ React Router v6ã€‚æ¢å¥è¯è¯´ï¼Œä¸ä¼šæœ‰ <code>@reach/router</code> v2ï¼Œå› ä¸ºå®ƒå°†ä¸ React Router v6 ä¸€æ ·ã€‚</p><p><code>@reach/router</code> 1.3 å’Œ React Router v6 çš„è®¸å¤š API å®é™…ä¸Šæ˜¯ç›¸åŒçš„ï¼š</p><ul><li>å¯¹è·¯ç”±è¿›è¡Œæ’åºå’ŒåŒ¹é…</li><li>åµŒå¥—è·¯ç”±é…ç½®åœ¨è¿™é‡Œ</li><li><code>navigate</code> å…·æœ‰ç›¸åŒçš„ç­¾å</li><li><code>Link</code> å…·æœ‰ç›¸åŒçš„ç­¾å</li><li>1.3 ä¸­çš„æ‰€æœ‰é’©å­éƒ½æ˜¯ç›¸åŒçš„ï¼ˆæˆ–å‡ ä¹ç›¸åŒçš„ï¼‰</li></ul><p>å¤§éƒ¨åˆ†æ”¹åŠ¨åªæ˜¯é‡å‘½åè€Œå·²ã€‚å¦‚æœæ‚¨ç¢°å·§å†™äº†ä¸€ä¸ª codemodï¼Œè¯·ä¸æˆ‘ä»¬åˆ†äº«ï¼Œæˆ‘ä»¬ä¼šå°†å…¶æ·»åŠ åˆ°æœ¬æŒ‡å—ä¸­ï¼ï¼</p><h2 id="å‡çº§æ¦‚è¿°" tabindex="-1">å‡çº§æ¦‚è¿° <a class="header-anchor" href="#å‡çº§æ¦‚è¿°" aria-label="Permalink to &quot;å‡çº§æ¦‚è¿°&quot;">â€‹</a></h2><p>åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†å‘æ‚¨å±•ç¤ºå¦‚ä½•å‡çº§è·¯ç”±ä»£ç çš„æ¯ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬å°†å¾ªåºæ¸è¿›åœ°è¿›è¡Œå‡çº§ï¼Œè¿™æ ·æ‚¨å°±å¯ä»¥è¿›è¡Œä¸€äº›æ›´æ”¹ã€å‘å¸ƒï¼Œç„¶ååœ¨æ–¹ä¾¿çš„æ—¶å€™å†æ¬¡è¿›è¡Œè¿ç§»ã€‚æˆ‘ä»¬è¿˜ä¼šè®¨è®ºä¸€ä¸‹ &quot;ä¸ºä»€ä¹ˆ &quot;è¦åšè¿™äº›æ›´æ”¹ï¼Œçœ‹ä¼¼ç®€å•çš„é‡å‘½åå…¶å®èƒŒåæœ‰æ›´å¤§çš„åŸå› ã€‚</p><h3 id="é¦–å…ˆ-éç ´åæ€§æ›´æ–°" tabindex="-1">é¦–å…ˆï¼šéç ´åæ€§æ›´æ–° <a class="header-anchor" href="#é¦–å…ˆ-éç ´åæ€§æ›´æ–°" aria-label="Permalink to &quot;é¦–å…ˆï¼šéç ´åæ€§æ›´æ–°&quot;">â€‹</a></h3><p>æˆ‘ä»¬å¼ºçƒˆå»ºè®®æ‚¨åœ¨è¿ç§»åˆ° React Router v6 ä¹‹å‰å¯¹ä»£ç è¿›è¡Œä»¥ä¸‹æ›´æ–°ã€‚è¿™äº›æ›´æ”¹ä¸å¿…åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä¸€æ¬¡æ€§å®Œæˆï¼Œæ‚¨åªéœ€æ›´æ–°ä¸€è¡Œï¼Œæäº¤å¹¶å‘å¸ƒå³å¯ã€‚è¿™æ ·åšå°†å¤§å¤§å‡å°‘æ‚¨åœ¨ React Router v6 ä¸­è¿›è¡Œç ´åæ€§æ›´æ”¹æ—¶çš„å·¥ä½œé‡ã€‚</p><ol><li>å‡çº§åˆ°React v16.8æˆ–æ›´é«˜ç‰ˆæœ¬</li><li>å‡çº§åˆ° <code>@reach/router</code> v1.3</li><li>æ›´æ–°è·¯ç”±ç»„ä»¶ï¼Œä»¥ä¾¿ä»é’©å­è®¿é—®æ•°æ®</li><li>åœ¨åº”ç”¨ç¨‹åºé¡¶éƒ¨æ·»åŠ  <code>&lt;LocationProvider/&gt;</code></li></ol><h3 id="å…¶æ¬¡-ç ´åæ€§æ›´æ–°" tabindex="-1">å…¶æ¬¡ï¼šç ´åæ€§æ›´æ–° <a class="header-anchor" href="#å…¶æ¬¡-ç ´åæ€§æ›´æ–°" aria-label="Permalink to &quot;å…¶æ¬¡ï¼šç ´åæ€§æ›´æ–°&quot;">â€‹</a></h3><p>ä»¥ä¸‹æ›´æ”¹éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä¸€æ¬¡æ€§å®Œæˆã€‚</p><ol><li>å‡çº§åˆ° React Router v6</li><li>å°†æ‰€æœ‰ <code>&lt;Router&gt;</code> å…ƒç´ æ›´æ–°ä¸º <code>&lt;Routes&gt;</code></li><li>å°† <code>&lt;RouteElement default/&gt;</code> æ›´æ”¹ä¸º <code>&lt;RouteElement path=&quot;*&quot; /&gt;</code></li><li>ä¿®å¤ <code>&lt;Redirect /&gt;</code></li><li>ä½¿ç”¨é’©å­å®ç° <code>&lt;Link getProps /&gt;</code></li><li>æ›´æ–° <code>useMatch</code> ï¼Œå‚æ•°å·²å¼€å¯ <code>match.params</code></li><li>å°† <code>ServerLocation</code> æ›´æ”¹ä¸º <code>StaticRouter</code></li></ol><h2 id="éç ´åæ€§æ›´æ–°" tabindex="-1">éç ´åæ€§æ›´æ–° <a class="header-anchor" href="#éç ´åæ€§æ›´æ–°" aria-label="Permalink to &quot;éç ´åæ€§æ›´æ–°&quot;">â€‹</a></h2><h3 id="å‡çº§åˆ°-react-router-v6" tabindex="-1">å‡çº§åˆ° React Router v6 <a class="header-anchor" href="#å‡çº§åˆ°-react-router-v6" aria-label="Permalink to &quot;å‡çº§åˆ° React Router v6&quot;">â€‹</a></h3><p>React Router v6 å¤§é‡ä½¿ç”¨äº† <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noreferrer">React hooks</a>ï¼Œå› æ­¤åœ¨å°è¯•å‡çº§åˆ° React Router v6 ä¹‹å‰ï¼Œæ‚¨éœ€è¦ä½¿ç”¨ React 16.8 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚</p><p>å‡çº§åˆ° React 16.8 åï¼Œæ‚¨å°±å¯ä»¥éƒ¨ç½²åº”ç”¨ç¨‹åºäº†ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥ç¨åå†å›æ¥ç»§ç»­ä¹‹å‰çš„å·¥ä½œã€‚</p><h3 id="å‡çº§åˆ°-reach-router-v1-3-3" tabindex="-1">å‡çº§åˆ° <code>@reach/router</code> v1.3.3 <a class="header-anchor" href="#å‡çº§åˆ°-reach-router-v1-3-3" aria-label="Permalink to &quot;å‡çº§åˆ° \`@reach/router\` v1.3.3&quot;">â€‹</a></h3><p>æ‚¨åªéœ€å®‰è£… v1.3.3ï¼Œç„¶åéƒ¨ç½²åº”ç”¨ç¨‹åºå³å¯ã€‚</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@reach/router@latest</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@reach/router@latest</span></span></code></pre></div><h3 id="æ›´æ–°è·¯ç”±ç»„ä»¶ä»¥ä½¿ç”¨-hooks" tabindex="-1">æ›´æ–°è·¯ç”±ç»„ä»¶ä»¥ä½¿ç”¨ hooks <a class="header-anchor" href="#æ›´æ–°è·¯ç”±ç»„ä»¶ä»¥ä½¿ç”¨-hooks" aria-label="Permalink to &quot;æ›´æ–°è·¯ç”±ç»„ä»¶ä»¥ä½¿ç”¨ hooks&quot;">â€‹</a></h3><p>æ‚¨å¯ä»¥ä¸€æ¬¡åªæ›´æ–°ä¸€ä¸ªè·¯ç”±ç»„ä»¶ï¼Œç„¶åæäº¤å¹¶éƒ¨ç½²ã€‚æ‚¨ä¸éœ€è¦ä¸€æ¬¡æ€§æ›´æ–°æ•´ä¸ªåº”ç”¨ç¨‹åºã€‚</p><p>åœ¨ <code>@reach/router</code> v1.3 ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†è®¿é—®è·¯ç”±æ•°æ®çš„é’©å­ï¼Œä»¥ä¾¿ä¸º React Router v6 åšå‡†å¤‡ã€‚å¦‚æœæ‚¨å…ˆå®Œæˆè¿™é¡¹å·¥ä½œï¼Œé‚£ä¹ˆå½“æ‚¨å‡çº§åˆ° React Router v6 æ—¶ï¼Œå°±å¯ä»¥å°‘èµ°å¾ˆå¤šå¼¯è·¯äº†ã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router v1.2</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">User</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;users/:userId/grades/:assignmentId&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// route params were accessed from props</span></span>
<span class="line"><span style="color:#E1E4E8;">    userId,</span></span>
<span class="line"><span style="color:#E1E4E8;">    assignmentId,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// as well as location and navigate</span></span>
<span class="line"><span style="color:#E1E4E8;">    location,</span></span>
<span class="line"><span style="color:#E1E4E8;">    navigate,</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> props;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router v1.3 and React Router v6</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  useParams,</span></span>
<span class="line"><span style="color:#E1E4E8;">  useLocation,</span></span>
<span class="line"><span style="color:#E1E4E8;">  useNavigate,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@reach/router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">User</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// everything comes from a specific hook now</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> { userId, assignmentId } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useParams</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useLocation</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> navigate </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useNavigate</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router v1.2</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">User</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;users/:userId/grades/:assignmentId&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// route params were accessed from props</span></span>
<span class="line"><span style="color:#24292E;">    userId,</span></span>
<span class="line"><span style="color:#24292E;">    assignmentId,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// as well as location and navigate</span></span>
<span class="line"><span style="color:#24292E;">    location,</span></span>
<span class="line"><span style="color:#24292E;">    navigate,</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> props;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router v1.3 and React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  useParams,</span></span>
<span class="line"><span style="color:#24292E;">  useLocation,</span></span>
<span class="line"><span style="color:#24292E;">  useNavigate,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@reach/router&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">User</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// everything comes from a specific hook now</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> { userId, assignmentId } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useParams</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useLocation</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> navigate </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useNavigate</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="ç†ç”±" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p>æ‰€æœ‰è¿™äº›æ•°æ®éƒ½å·²å­˜åœ¨äºä¸Šä¸‹æ–‡ä¸­ï¼Œä½†ä»ä¸Šä¸‹æ–‡ä¸­è®¿é—®è¿™äº›æ•°æ®å¯¹äºåº”ç”¨ç¨‹åºä»£ç æ¥è¯´å¾ˆä¸æ–¹ä¾¿ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶è½¬å‚¨åˆ°äº†å±æ€§ä¸­ã€‚é’©å­ç®€åŒ–äº†ä»ä¸Šä¸‹æ–‡è®¿é—®æ•°æ®çš„è¿‡ç¨‹ï¼Œå› æ­¤æˆ‘ä»¬ä¸å†éœ€è¦ç”¨è·¯ç”±ä¿¡æ¯æ¥æ±¡æŸ“å±æ€§ã€‚</p><p>ä¸æ±¡æŸ“å±æ€§å¯¹ TypeScript ä¹Ÿæœ‰ä¸€äº›å¸®åŠ©ï¼Œè€Œä¸”è¿˜èƒ½é¿å…åœ¨æŸ¥çœ‹ç»„ä»¶æ—¶æ€€ç–‘å±æ€§çš„æ¥æºã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è·¯ç”±ä¸­çš„æ•°æ®ï¼Œç°åœ¨å°±ä¸€ç›®äº†ç„¶äº†ã€‚</p><p>æ­¤å¤–ï¼Œéšç€é¡µé¢çš„å¢é•¿ï¼Œä½ ä¼šè‡ªç„¶è€Œç„¶åœ°å°†å…¶åˆ†è§£ä¸ºå¤šä¸ªç»„ä»¶ï¼Œå¹¶æœ€ç»ˆå°†æ•°æ®â€œprop drillingâ€åˆ°æ ‘ä¸­çš„ä»»æ„ä½ç½®ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨æ ‘çš„ä»»ä½•ä½ç½®è®¿é—®è·¯ç”±æ•°æ®ã€‚è¿™ä¸ä»…æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä½¿åˆ›å»ºä»¥è·¯ç”±ä¸ºä¸­å¿ƒçš„å¯ç»„åˆæŠ½è±¡æˆä¸ºå¯èƒ½ã€‚å¦‚æœè‡ªå®šä¹‰é’©å­éœ€è¦ä½ç½®ï¼Œç°åœ¨åªéœ€é€šè¿‡ <code>useLocation()</code> ç­‰è¯·æ±‚å³å¯ã€‚</p><h3 id="æ·»åŠ -locationprovider" tabindex="-1">æ·»åŠ  LocationProvider <a class="header-anchor" href="#æ·»åŠ -locationprovider" aria-label="Permalink to &quot;æ·»åŠ  LocationProvider&quot;">â€‹</a></h3><p>è™½ç„¶ <code>@reach/router</code> å¹¶ä¸è¦æ±‚åœ¨åº”ç”¨ç¨‹åºæ ‘çš„é¡¶ç«¯æä¾›ä½ç½®æä¾›ç¨‹åºï¼Œä½† React Router v6 å´è¦æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¦¨ç°åœ¨å°±ä¸ºæ­¤åšå¥½å‡†å¤‡ã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// before</span></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(&lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;, el);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// after</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { LocationProvider } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@reach/router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">LocationProvider</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">LocationProvider</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  el</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// before</span></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(&lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;, el);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// after</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { LocationProvider } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@reach/router&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">LocationProvider</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">LocationProvider</span><span style="color:#24292E;">&gt;,</span></span>
<span class="line"><span style="color:#24292E;">  el</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h4 id="ç†ç”±-1" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±-1" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p><code>@reach/router</code> ä½¿ç”¨å…¨å±€é»˜è®¤å†å²å®ä¾‹ï¼Œè¯¥å®ä¾‹åœ¨æ¨¡å—ä¸­å…·æœ‰å‰¯ä½œç”¨ï¼Œå› æ­¤æ— è®ºæ˜¯å¦ä½¿ç”¨å…¨å±€å®ä¾‹ï¼Œéƒ½æ— æ³•å¯¹æ¨¡å—è¿›è¡Œ<code>tree-shake</code>ã€‚æ­¤å¤–ï¼ŒReact Router è¿˜æä¾›äº†å…¶ä»–<code>history</code>ç±»å‹ï¼ˆå¦‚å“ˆå¸Œ<code>history</code>ï¼‰ï¼Œè€Œ <code>@reach/router</code> å´æ²¡æœ‰æä¾›ï¼Œå› æ­¤å®ƒæ€»æ˜¯éœ€è¦ä¸€ä¸ªé¡¶çº§ä½ç½®æä¾›è€…ï¼ˆåœ¨ React Router ä¸­ï¼Œè¿™äº›éƒ½æ˜¯ <code>&lt;BrowserRouter/&gt;</code> çš„æœ‹å‹ï¼‰ã€‚</p><p>æ­¤å¤–ï¼Œåœ¨ <code>&lt;LocationProvider/&gt;</code> ä¹‹å¤–å‘ˆç°çš„å„ç§æ¨¡å—ï¼ˆå¦‚ <code>Router</code> ã€ <code>Link</code> å’Œ <code>useLocation</code> ï¼‰éƒ½è®¾ç½®äº†è‡ªå·±çš„ URL ç›‘å¬å™¨ã€‚è¿™é€šå¸¸ä¸æ˜¯é—®é¢˜ï¼Œä½†æ¯ä¸€ç‚¹éƒ½å¾ˆé‡è¦ã€‚å°† <code>&lt;LocationProvider /&gt;</code> æ”¾åœ¨é¡¶éƒ¨å¯ä»¥è®©åº”ç”¨ç¨‹åºæ‹¥æœ‰ä¸€ä¸ªå•ä¸€çš„ URL ç›‘å¬å™¨ã€‚</p><h2 id="ç ´åæ€§æ›´æ–°" tabindex="-1">ç ´åæ€§æ›´æ–° <a class="header-anchor" href="#ç ´åæ€§æ›´æ–°" aria-label="Permalink to &quot;ç ´åæ€§æ›´æ–°&quot;">â€‹</a></h2><p>ä¸‹ä¸€ç»„æ›´æ–°éœ€è¦ä¸€æ¬¡æ€§å®Œæˆã€‚å¹¸è¿çš„æ˜¯ï¼Œå¤§éƒ¨åˆ†æ›´æ–°éƒ½åªæ˜¯ç®€å•çš„é‡å‘½åã€‚</p><p>ä½ å¯ä»¥è€ä¸ªå°èŠ±æ‹›ï¼Œåœ¨è¿ç§»æ—¶åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªè·¯ç”±å™¨ï¼Œä½†ç»å¯¹ä¸èƒ½åœ¨è¿™ç§çŠ¶æ€ä¸‹å‘é€åº”ç”¨ç¨‹åºï¼Œå› ä¸ºå®ƒä»¬ä¸èƒ½äº’æ“ä½œã€‚ä¸€ä¸ªè·¯ç”±å™¨ä¸Šçš„é“¾æ¥æ— æ³•åœ¨å¦ä¸€ä¸ªè·¯ç”±å™¨ä¸Šä½¿ç”¨ã€‚ä¸è¿‡ï¼Œå¦‚æœèƒ½åœ¨åšå‡ºæ›´æ”¹ååˆ·æ–°é¡µé¢ï¼Œçœ‹çœ‹è‡ªå·±æ˜¯å¦æ­£ç¡®åœ°å®Œæˆäº†è¿™ä¸€æ­¥ï¼Œé‚£è¿˜æ˜¯å¾ˆä¸é”™çš„ã€‚</p><h3 id="å®‰è£…-react-router-v6" tabindex="-1">å®‰è£… React Router v6 <a class="header-anchor" href="#å®‰è£…-react-router-v6" aria-label="Permalink to &quot;å®‰è£… React Router v6&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">react-router@6</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">react-router-dom@6</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">react-router@6</span><span style="color:#24292E;"> </span><span style="color:#032F62;">react-router-dom@6</span></span></code></pre></div><h3 id="å°†-locationprovider-æ›´æ–°ä¸º-browserrouter" tabindex="-1">å°† <code>LocationProvider</code> æ›´æ–°ä¸º <code>BrowserRouter</code> <a class="header-anchor" href="#å°†-locationprovider-æ›´æ–°ä¸º-browserrouter" aria-label="Permalink to &quot;å°† \`LocationProvider\` æ›´æ–°ä¸º \`BrowserRouter\`&quot;">â€‹</a></h3><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { LocationProvider } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@reach/router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">LocationProvider</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">LocationProvider</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  el</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { BrowserRouter } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-router-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">BrowserRouter</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">BrowserRouter</span><span style="color:#E1E4E8;">&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">  el</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { LocationProvider } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@reach/router&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">LocationProvider</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">LocationProvider</span><span style="color:#24292E;">&gt;,</span></span>
<span class="line"><span style="color:#24292E;">  el</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { BrowserRouter } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-router-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">BrowserRouter</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">BrowserRouter</span><span style="color:#24292E;">&gt;,</span></span>
<span class="line"><span style="color:#24292E;">  el</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre></div><h3 id="å°†-router-æ›´æ–°ä¸º-routes" tabindex="-1">å°† <code>Router</code> æ›´æ–°ä¸º <code>Routes</code> <a class="header-anchor" href="#å°†-router-æ›´æ–°ä¸º-routes" aria-label="Permalink to &quot;å°† \`Router\` æ›´æ–°ä¸º \`Routes\`&quot;">â€‹</a></h3><p>æ‚¨å¯èƒ½æœ‰å¤šä¸ªï¼Œä½†é€šå¸¸åªæœ‰ä¸€ä¸ªåœ¨åº”ç”¨ç¨‹åºé¡¶éƒ¨é™„è¿‘ã€‚å¦‚æœæ‚¨æœ‰å¤šä¸ªï¼Œè¯·ä¸ºæ¯ä¸ªéƒ½è¿™æ ·åšã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Router } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@reach/router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Routes, Route } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-router-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span><span style="color:#6A737D;">/* ... */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Router } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@reach/router&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  {</span><span style="color:#6A737D;">/* ... */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Routes, Route } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-router-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  {</span><span style="color:#6A737D;">/* ... */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;;</span></span></code></pre></div><h3 id="æ›´æ–°-default-è·¯ç”±å±æ€§" tabindex="-1">æ›´æ–° <code>default</code> è·¯ç”±å±æ€§ <a class="header-anchor" href="#æ›´æ–°-default-è·¯ç”±å±æ€§" aria-label="Permalink to &quot;æ›´æ–° \`default\` è·¯ç”±å±æ€§&quot;">â€‹</a></h3><p><code>default</code> å±æ€§å‘Šè¯‰ <code>@reach/router</code> ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–è·¯ç”±åŒ¹é…ï¼Œå°±ä½¿ç”¨è¯¥è·¯ç”±ã€‚åœ¨ React Router v6 ä¸­ï¼Œæ‚¨å¯ä»¥ç”¨é€šé…ç¬¦è·¯å¾„æ¥è§£é‡Šè¿™ç§è¡Œä¸ºã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">NotFound</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">default</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;*&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">NotFound</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">NotFound</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">default</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;*&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">NotFound</span><span style="color:#24292E;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h3 id="redirect-redirectto-isredirect" tabindex="-1"><code>&lt;Redirect/&gt;</code> ï¼Œ <code>redirectTo</code> ï¼Œ <code>isRedirect</code> <a class="header-anchor" href="#redirect-redirectto-isredirect" aria-label="Permalink to &quot;\`&lt;Redirect/&gt;\` ï¼Œ \`redirectTo\` ï¼Œ \`isRedirect\`&quot;">â€‹</a></h3><p>å‘¼......ç³»å¥½å®‰å…¨å¸¦ã€‚è¯·æŠŠè¥¿çº¢æŸ¿ç•™ç€è‡ªåˆ¶ç›æ ¼ä¸½å¡”æŠ«è¨ï¼Œè€Œä¸æ˜¯æ‰”ç»™æˆ‘ä»¬ã€‚</p><p>æˆ‘ä»¬å·²ç§»é™¤ä» React Router é‡å®šå‘çš„åŠŸèƒ½ã€‚å› æ­¤ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰ <code>&lt;Redirect/&gt;</code> ã€ <code>redirectTo</code> æˆ– <code>isRedirect</code> ï¼Œä¹Ÿæ²¡æœ‰æ›¿ä»£çš„ APIã€‚è¯·ç»§ç»­é˜…è¯» ğŸ˜…</p><p>åœ¨ç”¨æˆ·ä¸æ‚¨çš„åº”ç”¨ç¨‹åºäº¤äº’æ—¶ï¼Œä¸è¦å°†é‡å®šå‘ä¸å¯¼èˆªæ··ä¸ºä¸€è°ˆã€‚æˆ‘ä»¬ä»ç„¶æ”¯æŒæ ¹æ®ç”¨æˆ·äº¤äº’è¿›è¡Œå¯¼èˆªã€‚å½“æˆ‘ä»¬è°ˆè®ºé‡å®šå‘æ—¶ï¼Œæˆ‘ä»¬æ˜¯åœ¨è°ˆè®ºåŒ¹é…æ—¶çš„é‡å®šå‘ï¼š</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Users</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Redirect</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">from</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/dashboard&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Users</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Redirect</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">from</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/dashboard&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">to</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><p><code>@reach/router</code> ä¸­çš„é‡å®šå‘å·¥ä½œæ–¹å¼æ˜¯ä¸€é¡¹å®éªŒã€‚å®ƒ &quot;æŠ›å‡º &quot;é‡å®šå‘ï¼Œå¹¶é€šè¿‡ <code>componentDidCatch</code> æ•æ‰ã€‚è¿™å¾ˆé…·ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´æ•´ä¸ªæ¸²æŸ“æ ‘åœæ­¢ï¼Œç„¶åä»æ–°çš„ä½ç½®é‡æ–°å¼€å§‹ã€‚å‡ å¹´å‰ï¼Œå½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡å‘å¸ƒè¿™ä¸ªé¡¹ç›®æ—¶ï¼Œä¸ React å›¢é˜Ÿçš„è®¨è®ºè®©æˆ‘ä»¬å†³å®šè¯•ä¸€è¯•ã€‚</p><p>åœ¨é‡åˆ°ä¸€äº›é—®é¢˜ï¼ˆå¦‚åº”ç”¨çº§ <code>componentDidCatch</code> éœ€è¦é‡æ–°æŠ›å‡ºé‡å®šå‘ï¼‰ä¹‹åï¼Œæˆ‘ä»¬å†³å®šåœ¨ React Router v6 ä¸­ä¸å†è¿™æ ·åšã€‚</p><p>ä½†æˆ‘ä»¬æ›´è¿›ä¸€æ­¥å¾—å‡ºç»“è®ºï¼šé‡å®šå‘ç”šè‡³éƒ½ä¸æ˜¯ React Router çš„å·¥ä½œã€‚æ‚¨çš„åŠ¨æ€ Web æœåŠ¡å™¨æˆ–é™æ€æ–‡ä»¶æœåŠ¡å™¨åº”è¯¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å‘é€é€‚å½“çš„å“åº”çŠ¶æ€ä»£ç ï¼ˆå¦‚ 301 æˆ– 302ï¼‰ã€‚</p><p>åœ¨ React Router ä¸­åŒ¹é…æ—¶é‡å®šå‘çš„åŠŸèƒ½ï¼Œæœ€å¥½çš„æƒ…å†µæ˜¯éœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼ˆæœåŠ¡å™¨å’Œè·¯ç”±ï¼‰é…ç½®é‡å®šå‘ï¼Œæœ€åçš„æƒ…å†µæ˜¯é¼“åŠ±äººä»¬åªåœ¨ React Router ä¸­è¿›è¡Œé‡å®šå‘ï¼Œè€Œ React Router æ ¹æœ¬ä¸ä¼šå‘é€çŠ¶æ€ä»£ç ã€‚</p><p>æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ firebase æ‰˜ç®¡ï¼Œä¸‹é¢æ˜¯æˆ‘ä»¬æ›´æ–°ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ç¤ºä¾‹ï¼š</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Users</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Redirect</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">from</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/dashboard&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Router</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Users</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Redirect</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">from</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/dashboard&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">to</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Router</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#6A737D;">// firebase.json config file</span></span>
<span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&quot;hosting&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;redirects&quot;</span><span style="color:#E1E4E8;">: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;source&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;/dashboard&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;destination&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;type&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">301</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    ]</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#6A737D;">// firebase.json config file</span></span>
<span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ...</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&quot;hosting&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;redirects&quot;</span><span style="color:#24292E;">: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;source&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;/dashboard&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;destination&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;type&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">301</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    ]</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>æ— è®ºæˆ‘ä»¬æ˜¯ä½¿ç”¨æ— æœåŠ¡å™¨å‡½æ•°è¿›è¡ŒæœåŠ¡å™¨æ¸²æŸ“ï¼Œè¿˜æ˜¯ä»…å°†å…¶ç”¨ä½œé™æ€æ–‡ä»¶æœåŠ¡å™¨ï¼Œè¿™ç§æ–¹æ³•éƒ½èƒ½å¥æ•ˆã€‚æ‰€æœ‰è™šæ‹Ÿä¸»æœºæœåŠ¡éƒ½æä¾›äº†é…ç½®æ–¹æ³•ã€‚</p><h4 id="ç‚¹å‡»æœªæ›´æ–°çš„é“¾æ¥æ€ä¹ˆåŠ" tabindex="-1">ç‚¹å‡»æœªæ›´æ–°çš„é“¾æ¥æ€ä¹ˆåŠï¼Ÿ <a class="header-anchor" href="#ç‚¹å‡»æœªæ›´æ–°çš„é“¾æ¥æ€ä¹ˆåŠ" aria-label="Permalink to &quot;ç‚¹å‡»æœªæ›´æ–°çš„é“¾æ¥æ€ä¹ˆåŠï¼Ÿ&quot;">â€‹</a></h4><p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä»ç„¶æŒ‚ç€ä¸€ä¸ª <code>&lt;Link to=&quot;/events&quot; /&gt;</code> ï¼Œè€Œç”¨æˆ·ç‚¹å‡»äº†å®ƒï¼Œé‚£ä¹ˆæœåŠ¡å™¨å¹¶æ²¡æœ‰å‚ä¸ï¼Œå› ä¸ºæ‚¨ä½¿ç”¨çš„æ˜¯å®¢æˆ·ç«¯è·¯ç”±å™¨ã€‚æ‚¨éœ€è¦æ›´åŠ å‹¤å¥‹åœ°æ›´æ–°é“¾æ¥ğŸ˜¬ã€‚</p><p>å¦å¤–ï¼Œå¦‚æœæ‚¨å¸Œæœ›å…è®¸è¿‡æœŸé“¾æ¥ï¼Œ*å¹¶ä¸”æ„è¯†åˆ°éœ€è¦åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šé…ç½®é‡å®šå‘ï¼Œ*é‚£ä¹ˆè¯·ç»§ç»­å¤åˆ¶å¹¶ç²˜è´´æˆ‘ä»¬å‡†å¤‡å‘é€ä½†åæ¥åˆ é™¤çš„ <code>Redirect</code> ç»„ä»¶ã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useNavigate } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-router-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Redirect</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">to</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> navigate </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useNavigate</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">useEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">navigate</span><span style="color:#E1E4E8;">(to);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// usage</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Home</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Users</span><span style="color:#E1E4E8;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Route</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">path</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/dashboard&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">element</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Redirect</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/events&quot;</span><span style="color:#E1E4E8;"> /&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">  /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Routes</span><span style="color:#E1E4E8;">&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useNavigate } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-router-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Redirect</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">to</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> navigate </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useNavigate</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">navigate</span><span style="color:#24292E;">(to);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// usage</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Home</span><span style="color:#24292E;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Users</span><span style="color:#24292E;"> /&gt;} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Route</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">path</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/dashboard&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">element</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Redirect</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">to</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/events&quot;</span><span style="color:#24292E;"> /&gt;}</span></span>
<span class="line"><span style="color:#24292E;">  /&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Routes</span><span style="color:#24292E;">&gt;;</span></span></code></pre></div><h4 id="ç†ç”±-2" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±-2" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p>æˆ‘ä»¬è®¤ä¸ºï¼Œå¦‚æœä¸æä¾›ä»»ä½•é‡å®šå‘ APIï¼Œäººä»¬å°±æ›´æœ‰å¯èƒ½æ­£ç¡®é…ç½®å®ƒä»¬ã€‚å¤šå¹´æ¥ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨ä¸ç»æ„é—´é¼“åŠ±ä¸è‰¯åšæ³•ï¼Œå¸Œæœ›èƒ½åœæ­¢è¿™ç§åšæ³•ğŸ™ˆã€‚</p><h3 id="link-getprops" tabindex="-1"><code>&lt;Link getProps /&gt;</code> <a class="header-anchor" href="#link-getprops" aria-label="Permalink to &quot;\`&lt;Link getProps /&gt;\`&quot;">â€‹</a></h3><p>è¿™ä¸ª prop getter å¯¹äºå°†é“¾æ¥æ ·å¼è®¾ç½®ä¸º &quot;æ´»åŠ¨ &quot;éå¸¸æœ‰ç”¨ã€‚å†³å®šä¸€ä¸ªé“¾æ¥æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€æœ‰ç‚¹ä¸»è§‚ã€‚æœ‰æ—¶ä½ å¸Œæœ› URL å®Œå…¨åŒ¹é…æ—¶é“¾æ¥æ˜¯æ´»åŠ¨çš„ï¼Œæœ‰æ—¶ä½ å¸Œæœ›éƒ¨åˆ†åŒ¹é…æ—¶é“¾æ¥æ˜¯æ´»åŠ¨çš„ï¼Œè¿˜æœ‰æ›´å¤šæ¶‰åŠæœç´¢å‚æ•°å’Œä½ç½®çŠ¶æ€çš„è¾¹ç¼˜æƒ…å†µã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SomeCustomLink</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">to</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/some/where/cool&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">getProps</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">obj</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          isCurrent,</span></span>
<span class="line"><span style="color:#E1E4E8;">          isPartiallyCurrent,</span></span>
<span class="line"><span style="color:#E1E4E8;">          href,</span></span>
<span class="line"><span style="color:#E1E4E8;">          location,</span></span>
<span class="line"><span style="color:#E1E4E8;">        } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> obj;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#6A737D;">// do what you will</span></span>
<span class="line"><span style="color:#E1E4E8;">      }}</span></span>
<span class="line"><span style="color:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useLocation, useMatch } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-router-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SomeCustomLink</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> to </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/some/where/cool&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(to);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> { isExact } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(to);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useLocation</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">to</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{to} /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SomeCustomLink</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Link</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">to</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/some/where/cool&quot;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">getProps</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">obj</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          isCurrent,</span></span>
<span class="line"><span style="color:#24292E;">          isPartiallyCurrent,</span></span>
<span class="line"><span style="color:#24292E;">          href,</span></span>
<span class="line"><span style="color:#24292E;">          location,</span></span>
<span class="line"><span style="color:#24292E;">        } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> obj;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6A737D;">// do what you will</span></span>
<span class="line"><span style="color:#24292E;">      }}</span></span>
<span class="line"><span style="color:#24292E;">    /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useLocation, useMatch } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-router-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SomeCustomLink</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> to </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/some/where/cool&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(to);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> { isExact } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(to);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useLocation</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">to</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{to} /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>è®©æˆ‘ä»¬æ¥çœ‹ä¸€äº›ä¸é‚£ä¹ˆæ™®éçš„ä¾‹å­ã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// A custom nav link that is active when the URL matches the link&#39;s href exactly</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ExactNavLink</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isActive</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ({ </span><span style="color:#FFAB70;">isCurrent</span><span style="color:#E1E4E8;"> }) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> isCurrent </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> { className: </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> {};</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getProps</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{isActive} {</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">props} /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ExactNavLink</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// If you only need the active state for styling without</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// overriding the default isActive state, we provide it as</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// a named argument in a function that can be passed to</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// either \`className\` or \`style\` props</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{({ </span><span style="color:#FFAB70;">isActive</span><span style="color:#E1E4E8;"> }) </span><span style="color:#F97583;">=&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        isActive </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">props}</span></span>
<span class="line"><span style="color:#E1E4E8;">    /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// A link that is active when itself or deeper routes are current</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PartialNavLink</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">isPartiallyActive</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ({ </span><span style="color:#FFAB70;">isPartiallyCurrent</span><span style="color:#E1E4E8;"> }) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> isPartiallyCurrent</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> { className: </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;"> }</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> {};</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getProps</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{isPartiallyActive} {</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">props} /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">PartialNavLink</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// add the wild card to match deeper URLs</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(props.to </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;/*&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{match </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">} {</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">props} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// A custom nav link that is active when the URL matches the link&#39;s href exactly</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ExactNavLink</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isActive</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ({ </span><span style="color:#E36209;">isCurrent</span><span style="color:#24292E;"> }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> isCurrent </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> { className: </span><span style="color:#032F62;">&quot;active&quot;</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {};</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getProps</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isActive} {</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">props} /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ExactNavLink</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Link</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// If you only need the active state for styling without</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// overriding the default isActive state, we provide it as</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// a named argument in a function that can be passed to</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// either \`className\` or \`style\` props</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{({ </span><span style="color:#E36209;">isActive</span><span style="color:#24292E;"> }) </span><span style="color:#D73A49;">=&gt;</span></span>
<span class="line"><span style="color:#24292E;">        isActive </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;active&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">props}</span></span>
<span class="line"><span style="color:#24292E;">    /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// A link that is active when itself or deeper routes are current</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PartialNavLink</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">isPartiallyActive</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ({ </span><span style="color:#E36209;">isPartiallyCurrent</span><span style="color:#24292E;"> }) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> isPartiallyCurrent</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> { className: </span><span style="color:#032F62;">&quot;active&quot;</span><span style="color:#24292E;"> }</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> {};</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getProps</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isPartiallyActive} {</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">props} /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">PartialNavLink</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// add the wild card to match deeper URLs</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(props.to </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;/*&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{match </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;active&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">} {</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">props} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="ç†ç”±-3" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±-3" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p>&quot;Prop getters&quot; éå¸¸ç¬¨æ‹™ï¼Œå‡ ä¹å¯ä»¥ç”¨é’©å­æ¥ä»£æ›¿ã€‚è¿™æ ·è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–é’©å­ï¼ˆå¦‚ <code>useLocation</code> ï¼‰ï¼Œåšæ›´å¤šè‡ªå®šä¹‰äº‹æƒ…ï¼Œå¦‚ä½¿ç”¨æœç´¢å­—ç¬¦ä¸²ä½¿é“¾æ¥æ¿€æ´»ï¼š</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">RecentPostsLink</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/posts&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useLocation</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> isActive </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">    match </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> location.search </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;?view=recent&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{isActive </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;active&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;">}&gt;Recent&lt;/</span><span style="color:#79B8FF;">Link</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">RecentPostsLink</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/posts&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useLocation</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> isActive </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">    match </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> location.search </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;?view=recent&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isActive </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;active&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;">}&gt;Recent&lt;/</span><span style="color:#005CC5;">Link</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h3 id="usematch" tabindex="-1"><code>useMatch</code> <a class="header-anchor" href="#usematch" aria-label="Permalink to &quot;\`useMatch\`&quot;">â€‹</a></h3><p><code>useMatch</code> çš„ç­¾ååœ¨ React Router v6 ä¸­ç•¥æœ‰ä¸åŒã€‚</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  uri,</span></span>
<span class="line"><span style="color:#E1E4E8;">  path,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// params are merged into the object with uri and path</span></span>
<span class="line"><span style="color:#E1E4E8;">  eventId,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/events/:eventId&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  url,</span></span>
<span class="line"><span style="color:#E1E4E8;">  path,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// params get their own key on the match</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#FFAB70;">params</span><span style="color:#E1E4E8;">: { eventId },</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;/events/:eventId&quot;</span><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  uri,</span></span>
<span class="line"><span style="color:#24292E;">  path,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// params are merged into the object with uri and path</span></span>
<span class="line"><span style="color:#24292E;">  eventId,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/events/:eventId&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  url,</span></span>
<span class="line"><span style="color:#24292E;">  path,</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// params get their own key on the match</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#E36209;">params</span><span style="color:#24292E;">: { eventId },</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;/events/:eventId&quot;</span><span style="color:#24292E;">);</span></span></code></pre></div><p>è¿˜è¦æ³¨æ„ä» <code>uri -&gt; url</code> çš„æ›´æ”¹ã€‚</p><h4 id="ç†ç”±-4" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±-4" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p>å°†å‚æ•°ä¸ URL å’Œè·¯å¾„åˆ†å¼€ä¼šè®©äººæ„Ÿè§‰æ›´æ•´æ´ã€‚</p><p>æ­¤å¤–ï¼Œæ²¡æœ‰äººçŸ¥é“ URL å’Œ URI ä¹‹é—´çš„åŒºåˆ«ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¸æƒ³åœ¨è¿™æ–¹é¢å¼•å‘ä¸€å †è¿‚è…çš„äº‰è®ºã€‚React Router ä¸€ç›´ç§°ä¹‹ä¸º URLï¼Œè€Œä¸”å®ƒæœ‰æ›´å¤šçš„ç”Ÿäº§åº”ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨äº† URL è€Œä¸æ˜¯ URIã€‚</p><h3 id="match" tabindex="-1"><code>&lt;Match /&gt;</code> <a class="header-anchor" href="#match" aria-label="Permalink to &quot;\`&lt;Match /&gt;\`&quot;">â€‹</a></h3><p>React Router v6 ä¸­æ²¡æœ‰ <code>&lt;Match/&gt;</code> ç»„ä»¶ã€‚å®ƒä½¿ç”¨æ¸²æŸ“å±æ€§æ¥ç»„åˆè¡Œä¸ºï¼Œä½†æˆ‘ä»¬ç°åœ¨æœ‰äº†é’©å­ã€‚</p><p>å¦‚æœä½ å–œæ¬¢å®ƒï¼Œæˆ–è€…åªæ˜¯ä¸æƒ³æ›´æ–°ä»£ç ï¼Œå¾ˆå®¹æ˜“å°±èƒ½åå‘ç§»æ¤ï¼š</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Match</span><span style="color:#E1E4E8;">({ </span><span style="color:#FFAB70;">path</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">children</span><span style="color:#E1E4E8;"> }) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> match </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMatch</span><span style="color:#E1E4E8;">(path);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> location </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useLocation</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> navigate </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useNavigate</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">children</span><span style="color:#E1E4E8;">({ match, location, navigate });</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Match</span><span style="color:#24292E;">({ </span><span style="color:#E36209;">path</span><span style="color:#24292E;">, </span><span style="color:#E36209;">children</span><span style="color:#24292E;"> }) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> match </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMatch</span><span style="color:#24292E;">(path);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> location </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useLocation</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> navigate </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useNavigate</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">children</span><span style="color:#24292E;">({ match, location, navigate });</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="ç†ç”±-5" tabindex="-1">ç†ç”± <a class="header-anchor" href="#ç†ç”±-5" aria-label="Permalink to &quot;ç†ç”±&quot;">â€‹</a></h4><p>ç°åœ¨æœ‰äº†é’©å­ï¼Œæ¸²æŸ“å±æ€§å°±æœ‰ç‚¹æ¶å¿ƒäº†ã€‚</p><h3 id="serverlocation" tabindex="-1"><code>&lt;ServerLocation /&gt;</code> <a class="header-anchor" href="#serverlocation" aria-label="Permalink to &quot;\`&lt;ServerLocation /&gt;\`&quot;">â€‹</a></h3><p>è¿™é‡Œçš„é‡å‘½åéå¸¸ç®€å•ï¼š</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ServerLocation } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@reach/router&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">createServer</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">req</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> markup </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ReactDOMServer.</span><span style="color:#B392F0;">renderToString</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">ServerLocation</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">url</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{req.url}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#79B8FF;">ServerLocation</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  req.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(markup);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#6A737D;">// note the import path from react-router-dom/server!</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { StaticRouter } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-router-dom/server&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">createServer</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">req</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> markup </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ReactDOMServer.</span><span style="color:#B392F0;">renderToString</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">StaticRouter</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">location</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{req.url}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#79B8FF;">StaticRouter</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  req.</span><span style="color:#B392F0;">send</span><span style="color:#E1E4E8;">(markup);</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// @reach/router</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ServerLocation } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@reach/router&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">createServer</span><span style="color:#24292E;">((</span><span style="color:#E36209;">req</span><span style="color:#24292E;">, </span><span style="color:#E36209;">res</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> markup </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ReactDOMServer.</span><span style="color:#6F42C1;">renderToString</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">ServerLocation</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">url</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{req.url}&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#005CC5;">ServerLocation</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  req.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(markup);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// React Router v6</span></span>
<span class="line"><span style="color:#6A737D;">// note the import path from react-router-dom/server!</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { StaticRouter } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-router-dom/server&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">createServer</span><span style="color:#24292E;">((</span><span style="color:#E36209;">req</span><span style="color:#24292E;">, </span><span style="color:#E36209;">res</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">let</span><span style="color:#24292E;"> markup </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ReactDOMServer.</span><span style="color:#6F42C1;">renderToString</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">StaticRouter</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">location</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{req.url}&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#005CC5;">StaticRouter</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  req.</span><span style="color:#6F42C1;">send</span><span style="color:#24292E;">(markup);</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre></div><h2 id="åé¦ˆ" tabindex="-1">åé¦ˆ! <a class="header-anchor" href="#åé¦ˆ" aria-label="Permalink to &quot;åé¦ˆ!&quot;">â€‹</a></h2><p>å¦‚æœæœ¬æŒ‡å—å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·å‘Šè¯‰æˆ‘ä»¬ï¼š</p><p><em>æ‰“å¼€ä¸€ä¸ª Pull Request</em>ï¼šè¯·æ·»åŠ æˆ‘ä»¬é—æ¼çš„ä»»ä½•æ‚¨éœ€è¦çš„è¿ç§»ã€‚</p><p><em>General Feedback</em>: <a href="https://twitter.com/remix_run" target="_blank" rel="noreferrer">@remix_run</a> on Twitter, or email <a href="mailto:hello@remix.run" target="_blank" rel="noreferrer">hello@remix.run</a>. <em>ä¸€èˆ¬åé¦ˆ</em>ï¼šåœ¨ Twitter ä¸Š <a href="https://twitter.com/remix_run" target="_blank" rel="noreferrer">@remix_run</a> æˆ–å‘é€ç”µå­é‚®ä»¶è‡³<a href="mailto:hello@remix.run" target="_blank" rel="noreferrer">hello@remix.run</a>ã€‚</p><p>è°¢è°¢!</p>`,99),e=[o];function t(c,r,E,y,i,u){return a(),n("div",null,e)}const h=s(p,[["render",t]]);export{d as __pageData,h as default};
