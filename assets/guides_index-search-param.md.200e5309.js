import{_ as s,o as n,c as a,Q as o}from"./chunks/framework.6f0990a9.js";const u=JSON.parse('{"title":"索引查询参数","description":"","frontmatter":{},"headers":[],"relativePath":"guides/index-search-param.md","filePath":"guides/index-search-param.md","lastUpdated":1704271911000}'),p={name:"guides/index-search-param.md"},l=o(`<h1 id="索引查询参数" tabindex="-1">索引查询参数 <a class="header-anchor" href="#索引查询参数" aria-label="Permalink to &quot;索引查询参数&quot;">​</a></h1><p>在提交表单时，您可能会发现应用程序的 URL 中出现一个乱码 <code>?index</code> 。</p><p>由于存在嵌套路由，路由层次结构中的多个路由都能与 URL 匹配。与导航不同的是，导航会调用所有匹配的路由加载器来构建用户界面，而提交表单时<em>只会调用一个操作</em>。</p><p>由于索引路由与其父路由共享相同的 URL，因此 <code>?index</code> 参数可帮助您区分两者。</p><p>例如，请看下面的路由和表单：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">createBrowserRouter</span><span style="color:#E1E4E8;">([</span></span>
<span class="line"><span style="color:#E1E4E8;">  {</span></span>
<span class="line"><span style="color:#E1E4E8;">    path: </span><span style="color:#9ECBFF;">&quot;/projects&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    element: &lt;</span><span style="color:#79B8FF;">ProjectsLayout</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    action: ProjectsLayout.action,</span></span>
<span class="line"><span style="color:#E1E4E8;">    children: [</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        index: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        element: &lt;</span><span style="color:#79B8FF;">ProjectsIndex</span><span style="color:#E1E4E8;"> /&gt;,</span></span>
<span class="line"><span style="color:#E1E4E8;">        action: ProjectsPage.action,</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">    ],</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Form</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">method</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">action</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/projects&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Form</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">method</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">action</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/projects?index&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">createBrowserRouter</span><span style="color:#24292E;">([</span></span>
<span class="line"><span style="color:#24292E;">  {</span></span>
<span class="line"><span style="color:#24292E;">    path: </span><span style="color:#032F62;">&quot;/projects&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    element: &lt;</span><span style="color:#005CC5;">ProjectsLayout</span><span style="color:#24292E;"> /&gt;,</span></span>
<span class="line"><span style="color:#24292E;">    action: ProjectsLayout.action,</span></span>
<span class="line"><span style="color:#24292E;">    children: [</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        index: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        element: &lt;</span><span style="color:#005CC5;">ProjectsIndex</span><span style="color:#24292E;"> /&gt;,</span></span>
<span class="line"><span style="color:#24292E;">        action: ProjectsPage.action,</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">    ],</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">method</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/projects&quot;</span><span style="color:#24292E;"> /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">method</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/projects?index&quot;</span><span style="color:#24292E;"> /&gt;;</span></span></code></pre></div><p><code>?index</code> 参数将提交到索引路由，不带索引参数的操作将提交到父路由。</p><p>当 <code>&lt;Form&gt;</code> 在没有 <code>action</code> 的索引路由中呈现时，将自动附加 <code>?index</code> 参数，以便表单发布到索引路由。下面的表单在提交后会发布到 <code>/projects?index</code> ，因为它是在项目索引路由的上下文中呈现的：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ProjectsIndex</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">Form</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">method</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;post&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ProjectsIndex</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">Form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">method</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;post&quot;</span><span style="color:#24292E;"> /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><p>如果您将代码移至 <code>ProjectsLayout</code> 路由，它将转而发布到 <code>/projects</code> 。</p><p>这适用于 <code>&lt;Form&gt;</code> 及其所有同类产品：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> submit </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSubmit</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">({}, { action: </span><span style="color:#9ECBFF;">&quot;/projects&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">({}, { action: </span><span style="color:#9ECBFF;">&quot;/projects?index&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> fetcher </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useFetcher</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">fetcher.</span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">({}, { action: </span><span style="color:#9ECBFF;">&quot;/projects&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">fetcher.</span><span style="color:#B392F0;">submit</span><span style="color:#E1E4E8;">({}, { action: </span><span style="color:#9ECBFF;">&quot;/projects?index&quot;</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">fetcher.Form</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">action</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/projects&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">fetcher.Form</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">action</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;/projects?index&quot;</span><span style="color:#E1E4E8;"> /&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">fetcher.Form</span><span style="color:#E1E4E8;"> /&gt;; </span><span style="color:#6A737D;">// defaults to the route in context</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> submit </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSubmit</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">({}, { action: </span><span style="color:#032F62;">&quot;/projects&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">({}, { action: </span><span style="color:#032F62;">&quot;/projects?index&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> fetcher </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useFetcher</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">fetcher.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">({}, { action: </span><span style="color:#032F62;">&quot;/projects&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#24292E;">fetcher.</span><span style="color:#6F42C1;">submit</span><span style="color:#24292E;">({}, { action: </span><span style="color:#032F62;">&quot;/projects?index&quot;</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">fetcher.Form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/projects&quot;</span><span style="color:#24292E;"> /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">fetcher.Form</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">action</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;/projects?index&quot;</span><span style="color:#24292E;"> /&gt;;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">fetcher.Form</span><span style="color:#24292E;"> /&gt;; </span><span style="color:#6A737D;">// defaults to the route in context</span></span></code></pre></div>`,12),e=[l];function t(c,r,E,y,i,F){return n(),a("div",null,e)}const h=s(p,[["render",t]]);export{u as __pageData,h as default};
