<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常见问题 | React Router6 中文文档</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="文档内容详细翻译自官方英文文档">
    
    <link rel="preload" href="/react-router6-doc/assets/css/0.styles.9c14763a.css" as="style"><link rel="preload" href="/react-router6-doc/assets/js/app.3977e6ed.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/72.fd9f048e.js" as="script"><link rel="prefetch" href="/react-router6-doc/assets/js/10.3ecfd4b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/11.96744b78.js"><link rel="prefetch" href="/react-router6-doc/assets/js/12.7ca7492b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/13.ed88fa50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/14.c32c4d27.js"><link rel="prefetch" href="/react-router6-doc/assets/js/15.492bdbe6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/16.0afe03b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/17.ee2650c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/18.38f3184b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/19.3d95686d.js"><link rel="prefetch" href="/react-router6-doc/assets/js/20.e006914b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/21.2914f993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/22.c25c5262.js"><link rel="prefetch" href="/react-router6-doc/assets/js/23.2959ad25.js"><link rel="prefetch" href="/react-router6-doc/assets/js/24.b6d79d39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/25.ac31ef72.js"><link rel="prefetch" href="/react-router6-doc/assets/js/26.872cb077.js"><link rel="prefetch" href="/react-router6-doc/assets/js/27.64e94538.js"><link rel="prefetch" href="/react-router6-doc/assets/js/28.8fc4bd95.js"><link rel="prefetch" href="/react-router6-doc/assets/js/29.472d4bce.js"><link rel="prefetch" href="/react-router6-doc/assets/js/3.ca35af39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/30.eb78e0e6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/31.f0041706.js"><link rel="prefetch" href="/react-router6-doc/assets/js/32.d7ea5513.js"><link rel="prefetch" href="/react-router6-doc/assets/js/33.6af9c91e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/34.f72f8b29.js"><link rel="prefetch" href="/react-router6-doc/assets/js/35.4f205482.js"><link rel="prefetch" href="/react-router6-doc/assets/js/36.7e81b201.js"><link rel="prefetch" href="/react-router6-doc/assets/js/37.189e63dd.js"><link rel="prefetch" href="/react-router6-doc/assets/js/38.7b2282a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/39.dfa41823.js"><link rel="prefetch" href="/react-router6-doc/assets/js/4.3357b40a.js"><link rel="prefetch" href="/react-router6-doc/assets/js/40.58e1cc61.js"><link rel="prefetch" href="/react-router6-doc/assets/js/41.ba56822c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/42.ddd0d283.js"><link rel="prefetch" href="/react-router6-doc/assets/js/43.449a8b8e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/44.e9602134.js"><link rel="prefetch" href="/react-router6-doc/assets/js/45.703d86c7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/46.2b4813c8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/47.33b902b8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/48.076c7084.js"><link rel="prefetch" href="/react-router6-doc/assets/js/49.ca3844b6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/5.e084b39e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/50.cb28fb54.js"><link rel="prefetch" href="/react-router6-doc/assets/js/51.a9bf92aa.js"><link rel="prefetch" href="/react-router6-doc/assets/js/52.abb71d57.js"><link rel="prefetch" href="/react-router6-doc/assets/js/53.f28b86ab.js"><link rel="prefetch" href="/react-router6-doc/assets/js/54.431230ac.js"><link rel="prefetch" href="/react-router6-doc/assets/js/55.6d416534.js"><link rel="prefetch" href="/react-router6-doc/assets/js/56.5247885e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/57.3468a0a6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/58.f6aac83e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/59.9802116c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/react-router6-doc/assets/js/60.07cb5490.js"><link rel="prefetch" href="/react-router6-doc/assets/js/61.2743a407.js"><link rel="prefetch" href="/react-router6-doc/assets/js/62.5fa1707e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/63.1d468a1f.js"><link rel="prefetch" href="/react-router6-doc/assets/js/64.e42e4d82.js"><link rel="prefetch" href="/react-router6-doc/assets/js/65.4b5065c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/66.9c218cc2.js"><link rel="prefetch" href="/react-router6-doc/assets/js/67.c74f8ad3.js"><link rel="prefetch" href="/react-router6-doc/assets/js/68.976323b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/69.a6de7974.js"><link rel="prefetch" href="/react-router6-doc/assets/js/7.79da1235.js"><link rel="prefetch" href="/react-router6-doc/assets/js/70.5323e7c9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/71.1eb10979.js"><link rel="prefetch" href="/react-router6-doc/assets/js/73.e5cc737c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/74.b28de77c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/75.205022f9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/76.302640ff.js"><link rel="prefetch" href="/react-router6-doc/assets/js/77.bafe70a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/78.25f09583.js"><link rel="prefetch" href="/react-router6-doc/assets/js/79.943e4f2e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/8.8b6ff993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/80.b53f9e50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/81.666b3df7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/82.3b2246d5.js"><link rel="prefetch" href="/react-router6-doc/assets/js/83.2eca4ef0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/84.e4793f9b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/85.9812b3b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/9.33f377fb.js">
    <link rel="stylesheet" href="/react-router6-doc/assets/css/0.styles.9c14763a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-router6-doc/" class="home-link router-link-active"><!----> <span class="site-name">React Router6 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/start/overview" class="sidebar-heading clickable open"><span>快速上手</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/start/overview.html" class="sidebar-link">功能概述</a></li><li><a href="/react-router6-doc/start/tutorial.html" class="sidebar-link">教程</a></li><li><a href="/react-router6-doc/start/faqs.html" aria-current="page" class="active sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#withrouter-怎么了-我需要它" class="sidebar-link">withRouter 怎么了？我需要它！</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#为什么-route-有一个element道具而不是renderor-component" class="sidebar-link">为什么&lt;Route&gt;有一个element道具而不是renderor component？</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#如何在-react-router-v6-中添加不匹配-404-路由" class="sidebar-link">如何在 react-router v6 中添加不匹配 (404) 路由？</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#route-不渲染-我如何作曲" class="sidebar-link">&lt;Route&gt;不渲染？我如何作曲？</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#如何在树深处嵌套路线" class="sidebar-link">如何在树深处嵌套路线？</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/faqs.html#正则表达式路由路径发生了什么" class="sidebar-link">正则表达式路由路径发生了什么？</a></li></ul></li><li><a href="/react-router6-doc/start/concepts.html" class="sidebar-link">核心概念</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router/picking-a-router" class="sidebar-heading clickable"><span>Router</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router/picking-a-router.html" class="sidebar-link">选择Router</a></li><li><a href="/react-router6-doc/router/create-browser-router.html" class="sidebar-link">createBrowserRouter</a></li><li><a href="/react-router6-doc/router/create-hash-router.html" class="sidebar-link">createHashRouter</a></li><li><a href="/react-router6-doc/router/create-memory-router.html" class="sidebar-link">createMemoryRouter</a></li><li><a href="/react-router6-doc/router/router-provider.html" class="sidebar-link">RouterProvider</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router-components/browser-router" class="sidebar-heading clickable"><span>Router组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router-components/browser-router.html" class="sidebar-link">BrowserRouter</a></li><li><a href="/react-router6-doc/router-components/hash-router.html" class="sidebar-link">HashRouter</a></li><li><a href="/react-router6-doc/router-components/memory-router.html" class="sidebar-link">MemoryRouter</a></li><li><a href="/react-router6-doc/router-components/native-router.html" class="sidebar-link">NativeRouter</a></li><li><a href="/react-router6-doc/router-components/router.html" class="sidebar-link">router</a></li><li><a href="/react-router6-doc/router-components/static-router.html" class="sidebar-link">StaticRouter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/route/route" class="sidebar-heading clickable"><span>route</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/route/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/route/action.html" class="sidebar-link">action</a></li><li><a href="/react-router6-doc/route/error-element.html" class="sidebar-link">errorElement</a></li><li><a href="/react-router6-doc/route/loader.html" class="sidebar-link">Loader</a></li><li><a href="/react-router6-doc/route/should-revalidate.html" class="sidebar-link">shouldRevalidate</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/components/await" class="sidebar-heading clickable"><span>组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/components/await.html" class="sidebar-link">Await</a></li><li><a href="/react-router6-doc/components/form.html" class="sidebar-link">Form</a></li><li><a href="/react-router6-doc/components/link.html" class="sidebar-link">Link</a></li><li><a href="/react-router6-doc/components/link-native.html" class="sidebar-link">Link(RN)</a></li><li><a href="/react-router6-doc/components/nav-link.html" class="sidebar-link">NavLink</a></li><li><a href="/react-router6-doc/components/navigate.html" class="sidebar-link">Navigate</a></li><li><a href="/react-router6-doc/components/outlet.html" class="sidebar-link">Outlet</a></li><li><a href="/react-router6-doc/components/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/components/routes.html" class="sidebar-link">Routes</a></li><li><a href="/react-router6-doc/components/scroll-restoration.html" class="sidebar-link">ScrollRestoration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/hooks/use-action-data" class="sidebar-heading clickable"><span>钩子函数</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/hooks/use-action-data.html" class="sidebar-link">useActionData</a></li><li><a href="/react-router6-doc/hooks/use-async-error.html" class="sidebar-link">useAsyncError</a></li><li><a href="/react-router6-doc/hooks/use-async-value.html" class="sidebar-link">useAsyncValue</a></li><li><a href="/react-router6-doc/hooks/use-before-unload.html" class="sidebar-link">useBeforeUnload</a></li><li><a href="/react-router6-doc/hooks/use-fetcher.html" class="sidebar-link">useFetcher</a></li><li><a href="/react-router6-doc/hooks/use-fetchers.html" class="sidebar-link">useFetchers</a></li><li><a href="/react-router6-doc/hooks/use-form-action.html" class="sidebar-link">useFormAction</a></li><li><a href="/react-router6-doc/hooks/use-href.html" class="sidebar-link">useHref</a></li><li><a href="/react-router6-doc/hooks/use-in-router-context.html" class="sidebar-link">useInRouterContext</a></li><li><a href="/react-router6-doc/hooks/use-link-click-handler.html" class="sidebar-link">useLinkClickHandler</a></li><li><a href="/react-router6-doc/hooks/use-link-press-handler.html" class="sidebar-link">useLinkPressHandler</a></li><li><a href="/react-router6-doc/hooks/use-loader-data.html" class="sidebar-link">useLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-location.html" class="sidebar-link">useLocation</a></li><li><a href="/react-router6-doc/hooks/use-match.html" class="sidebar-link">useMatch</a></li><li><a href="/react-router6-doc/hooks/use-matches.html" class="sidebar-link">useMatches</a></li><li><a href="/react-router6-doc/hooks/use-navigate.html" class="sidebar-link">useNavigate</a></li><li><a href="/react-router6-doc/hooks/use-navigation.html" class="sidebar-link">useNavigation</a></li><li><a href="/react-router6-doc/hooks/use-navigation-type.html" class="sidebar-link">useNavigationType</a></li><li><a href="/react-router6-doc/hooks/use-outlet.html" class="sidebar-link">useOutlet</a></li><li><a href="/react-router6-doc/hooks/use-outlet-context.html" class="sidebar-link">useOutletContext</a></li><li><a href="/react-router6-doc/hooks/use-params.html" class="sidebar-link">useParams</a></li><li><a href="/react-router6-doc/hooks/use-resolved-path.html" class="sidebar-link">useResolvedPath</a></li><li><a href="/react-router6-doc/hooks/use-revalidator.html" class="sidebar-link">useRevalidator</a></li><li><a href="/react-router6-doc/hooks/use-route-error.html" class="sidebar-link">useRouteError</a></li><li><a href="/react-router6-doc/hooks/use-route-loader-data.html" class="sidebar-link">useRouteLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-routes.html" class="sidebar-link">useRoutes</a></li><li><a href="/react-router6-doc/hooks/use-search-params.html" class="sidebar-link">useSearchParams</a></li><li><a href="/react-router6-doc/hooks/use-search-params-rn.html" class="sidebar-link">useSearchParams(RN)</a></li><li><a href="/react-router6-doc/hooks/use-submit.html" class="sidebar-link">useSubmit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/fetch/json" class="sidebar-heading clickable"><span>Fetch工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/fetch/json.html" class="sidebar-link">json</a></li><li><a href="/react-router6-doc/fetch/redirect.html" class="sidebar-link">redirect</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/utils/create-routes-from-children" class="sidebar-heading clickable"><span>工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/utils/create-routes-from-children.html" class="sidebar-link">createRoutesFromChildren</a></li><li><a href="/react-router6-doc/utils/create-routes-from-elements.html" class="sidebar-link">createRoutesFromElements</a></li><li><a href="/react-router6-doc/utils/create-search-params.html" class="sidebar-link">createSearchParams</a></li><li><a href="/react-router6-doc/utils/defer.html" class="sidebar-link">defer</a></li><li><a href="/react-router6-doc/utils/generate-path.html" class="sidebar-link">generatePath</a></li><li><a href="/react-router6-doc/utils/is-route-error-response.html" class="sidebar-link">isRouteErrorResponse</a></li><li><a href="/react-router6-doc/utils/location.html" class="sidebar-link">Location</a></li><li><a href="/react-router6-doc/utils/match-path.html" class="sidebar-link">matchPath</a></li><li><a href="/react-router6-doc/utils/match-routes.html" class="sidebar-link">matchRoutes</a></li><li><a href="/react-router6-doc/utils/render-matches.html" class="sidebar-link">renderMatches</a></li><li><a href="/react-router6-doc/utils/resolve-path.html" class="sidebar-link">resolvePath</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/guides/ssr" class="sidebar-heading clickable"><span>指南</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/guides/ssr.html" class="sidebar-link">服务端渲染</a></li><li><a href="/react-router6-doc/guides/contributing.html" class="sidebar-link">贡献</a></li><li><a href="/react-router6-doc/guides/data-libs.html" class="sidebar-link">数据库整合</a></li><li><a href="/react-router6-doc/guides/deferred.html" class="sidebar-link">延迟数据</a></li><li><a href="/react-router6-doc/guides/form-data.html" class="sidebar-link">使用FormData</a></li><li><a href="/react-router6-doc/guides/index-search-param.html" class="sidebar-link">索引查询参数</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h1> <p>以下是人们对 React Router v6 的一些常见问题。<a href="https://github.com/remix-run/react-router/tree/dev/examples" target="_blank" rel="noopener noreferrer">您可能还会在示例<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中找到您要查找的内容。</p> <h2 id="withrouter-怎么了-我需要它"><a href="#withrouter-怎么了-我需要它" class="header-anchor">#</a> withRouter 怎么了？我需要它！</h2> <p>这个问题通常源于您正在使用不支持挂钩的 React 类组件这一事实。在 React Router v6 中，我们完全接受了钩子并使用它们来共享路由器的所有内部状态。但这并不意味着您不能使用路由器。假设您实际上可以使用钩子（您使用的是 React 16.8+），您只需要一个包装器。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  useLocation<span class="token punctuation">,</span>
  useNavigate<span class="token punctuation">,</span>
  useParams<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">withRouter</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">ComponentWithRouterProp</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Component
        <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>
        router<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> location<span class="token punctuation">,</span> navigate<span class="token punctuation">,</span> params <span class="token punctuation">}</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> ComponentWithRouterProp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="为什么-route-有一个element道具而不是renderor-component"><a href="#为什么-route-有一个element道具而不是renderor-component" class="header-anchor">#</a> 为什么<code>&lt;Route&gt;</code>有一个<code>element</code>道具而不是<code>render</code>or <code>component</code>？</h2> <p>在 React Router v6 中，我们从使用 v5<code>&lt;Route component&gt;</code>和<code>&lt;Route render&gt;</code>API 切换到<code>&lt;Route element&gt;</code>. 这是为什么？</p> <p>对于初学者，我们看到 React 本身在<code>&lt;Suspense fallback={&lt;Spinner /&gt;}&gt;</code>API 方面处于领先地位。该<code>fallback</code>道具采用 React<strong>元素</strong>，而不是<strong>组件</strong>。这使您可以轻松地将任何您想要的道具<code>&lt;Spinner&gt;</code>从呈现它的组件传递给您。</p> <p>使用元素而不是组件意味着我们不必提供<code>passProps</code>-style API，因此您可以获得元素所需的道具。例如，在基于组件的 API 中，没有很好的方法将 props 传递给匹配<code>&lt;Profile&gt;</code>时呈现的元素。<code>&lt;Route path=&quot;:userId&quot; component={Profile} /&gt;</code>大多数采用这种方法的 React 库最终都会使用类似 API<code>&lt;Route component={Profile} passProps={animate: true}/&gt;</code>或使用 render prop 或高阶组件。</p> <p>此外，<code>Route</code>v5 中的渲染 API 相当大。当我们在 v4/5 上工作时，对话是这样的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Ah, this is nice and simple!</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:userId&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Profile<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// But wait, how do I pass custom props to the &lt;Profile&gt; element??</span>
<span class="token comment">// Hmm, maybe we can use a render prop in those situations?</span>
<span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;:userId&quot;</span>
  render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">routeProps</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Profile routeProps<span class="token operator">=</span><span class="token punctuation">{</span>routeProps<span class="token punctuation">}</span> animate<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// Ok, now we have two ways to render something with a route. :/</span>

<span class="token comment">// But wait, what if we want to render something when a route</span>
<span class="token comment">// *doesn't* match the URL, like a Not Found page? Maybe we</span>
<span class="token comment">// can use another render prop with slightly different semantics?</span>
<span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;:userId&quot;</span>
  children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> match <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    match <span class="token operator">?</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Profile match<span class="token operator">=</span><span class="token punctuation">{</span>match<span class="token punctuation">}</span> animate<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>NotFound <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// What if I want to get access to the route match, or I need</span>
<span class="token comment">// to redirect deeper in the tree?</span>
<span class="token keyword">function</span> <span class="token function">DeepComponent</span><span class="token punctuation">(</span><span class="token parameter">routeStuff</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// got routeStuff, phew!</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withRouter</span><span class="token punctuation">(</span>DeepComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Well hey, now at least we've covered all our use cases!</span>
<span class="token comment">// ... *facepalm*</span>
</code></pre></div><p>这个 API 蔓延的至少部分原因是 React 没有提供任何方法让我们从<code>&lt;Route&gt;</code>你的路由元素获取信息，所以我们必须发明聪明的方法来获取路由数据<strong>和</strong>你自己的自定义道具到你的元素：<code>component</code>，渲染道具，<code>passProps</code>高阶组件......直到<strong>钩子</strong>出现！</p> <p>现在，上面的对话是这样的：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Ah, nice and simple API. And it's just like the &lt;Suspense&gt; API!</span>
<span class="token comment">// Nothing more to learn here.</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:userId&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Profile <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// But wait, how do I pass custom props to the &lt;Profile&gt;</span>
<span class="token comment">// element? Oh ya, it's just an element. Easy.</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:userId&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Profile animate<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// Ok, but how do I access the router's data, like the URL params</span>
<span class="token comment">// or the current location?</span>
<span class="token keyword">function</span> <span class="token function">Profile</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> animate <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> location <span class="token operator">=</span> <span class="token function">useLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// But what about components deep in the tree?</span>
<span class="token keyword">function</span> <span class="token function">DeepComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// oh right, same as anywhere else</span>
  <span class="token keyword">let</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Aaaaaaaaand we're done here.</span>
</code></pre></div><p><code>element</code>在 v6 中使用 prop 的另一个重要原因是它<code>&lt;Route children&gt;</code>是为嵌套路由保留的。您可以在v6<a href="https://reactrouter.com/en/main/start/overview#nested-routes" target="_blank" rel="noopener noreferrer">入门指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中阅读更多相关信息。</p> <h2 id="如何在-react-router-v6-中添加不匹配-404-路由"><a href="#如何在-react-router-v6-中添加不匹配-404-路由" class="header-anchor">#</a> 如何在 react-router v6 中添加不匹配 (404) 路由？</h2> <p>在 v4 中，我们只是将路径道具留在了路线之外。在 v5 中，我们会将 404 元素包装在 Route 中并使用<code>path=&quot;*&quot;</code>. 在 v6 中使用新的 element 属性，<code>path=&quot;*&quot;</code>改为传递：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NoMatch <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="route-不渲染-我如何作曲"><a href="#route-不渲染-我如何作曲" class="header-anchor">#</a> <code>&lt;Route&gt;</code>不渲染？我如何作曲？</h2> <p>在 v5 中，该<code>&lt;Route&gt;</code>组件只是一个普通组件，就像一个<code>if</code>在 URL 匹配其路径时呈现的语句。在 v6 中，<code>&lt;Route&gt;</code>元素实际上并不渲染，它只是用于配置。</p> <p>在 v5 中，由于路由只是组件，<code>MyRoute</code>因此将在路径为“/my-route”时呈现。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>MyRoute <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">MyRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> element<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/my-route&quot;</span> children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>然而，在 v6 中，<code>&lt;Route&gt;</code>仅用于它的道具，因此以下代码将永远不会呈现<code>&lt;p&gt;Hello!&lt;/p&gt;</code>，因为<code>&lt;MyRoute&gt;</code>没有<code>&lt;Routes&gt;</code>可以看到的路径：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>MyRoute <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">MyRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// won't ever render because the path is down here</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/my-route&quot;</span> children<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>您可以通过以下方式获得相同的行为：</p> <ul><li>只渲染<code>&lt;Route&gt;</code>里面的元素<code>&lt;Routes&gt;</code></li> <li>将构图移动到<code>element</code>道具中</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">App</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/my-route&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>MyRoute <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> <span class="token function-variable function">MyRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Hello<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>在 中静态提供完整的嵌套路由配置<code>&lt;Routes&gt;</code>将启用 中的许多功能<code>v6.x</code>，因此我们鼓励您将路由放在一个顶级配置中。如果你真的喜欢独立于任何其他组件匹配 URL 的组件的想法，你可以制作一个行为类似于 v5 的组件<code>Route</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">MatchPath</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> path<span class="token punctuation">,</span> Comp <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> match <span class="token operator">=</span> <span class="token function">useMatch</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> match <span class="token operator">?</span> <span class="token operator">&lt;</span>Comp <span class="token punctuation">{</span><span class="token operator">...</span>match<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Will match anywhere w/o needing to be in a `&lt;Routes&gt;`</span>
<span class="token operator">&lt;</span>MatchPath path<span class="token operator">=</span><span class="token string">&quot;/accounts/:id&quot;</span> Comp<span class="token operator">=</span><span class="token punctuation">{</span>Account<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="如何在树深处嵌套路线"><a href="#如何在树深处嵌套路线" class="header-anchor">#</a> 如何在树深处嵌套路线？</h2> <p>在 v5 中，您可以渲染 a<code>&lt;Route&gt;</code>或<code>&lt;Switch&gt;</code>任何您想要的地方。你可以继续做同样的事情，但你需要使用<code>&lt;Routes&gt;</code>（<code>&lt;Route&gt;</code>没有's'将不起作用）。我们称这些为“后裔<code>&lt;Routes&gt;</code>”。</p> <p>在 v5 中可能看起来像这样</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// somewhere up the tree</span>
<span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Users<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// and now deeper in the tree</span>
<span class="token keyword">function</span> <span class="token function">Users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Users<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/account&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Account<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 v6 中几乎是一样的：</p> <ul><li>请注意<code>*</code>祖先路由中的 以使其匹配更深层次的 URL，即使它没有直接子级</li> <li>您不再需要知道整个子路由路径，您现在可以使用相对路由</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// somewhere up the tree</span>
<span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Users <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token comment">// and now deeper in the tree</span>
<span class="token keyword">function</span> <span class="token function">Users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Users<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;account&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Account <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果您在 v5 中有一个“浮动路线”（未包裹在 a 中<code>&lt;Switch&gt;</code>），只需将其包裹在 a 中即可<code>&lt;Routes&gt;</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// v5</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/contact&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Contact<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token comment">// v6</span>
<span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;contact&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
</code></pre></div><h2 id="正则表达式路由路径发生了什么"><a href="#正则表达式路由路径发生了什么" class="header-anchor">#</a> 正则表达式路由路径发生了什么？</h2> <p>正则表达式路由路径被删除有两个原因：</p> <ol><li>路由中的正则表达式路径对 v6 的排名路由匹配提出了很多问题。您如何对正则表达式进行排名？</li> <li>我们能够摆脱整个依赖关系（正则表达式路径）并显着减少发送到用户浏览器的包重量。如果加回来，就代表了 React Router 页面权重的 1/3！</li></ol> <p>在查看了很多用例之后，我们发现在没有直接正则表达式路径支持的情况下我们仍然可以满足它们，因此我们做出权衡以显着减小包大小并避免围绕正则表达式路由排名的开放性问题。</p> <p>大多数正则表达式路由一次只关心一个 URL 段并执行以下两件事之一：</p> <ol><li>匹配多个静态值</li> <li>以某种方式验证参数（是数字，不是数字等）</li></ol> <p><strong>匹配一般静态值</strong></p> <p>我们见过的一种非常常见的路由是匹配多种语言代码的正则表达式：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(en|es|fr)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>Lang<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Lang</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> lang <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> translations <span class="token operator">=</span> I81n<span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这些实际上都只是静态路径，所以在 v6 中你可以创建三个路由并将代码直接传递给组件。如果您有很多，请制作一个数组并将其映射到路线中以避免重复。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;en&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Lang lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;es&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Lang lang<span class="token operator">=</span><span class="token string">&quot;es&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;fr&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Lang lang<span class="token operator">=</span><span class="token string">&quot;fr&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Lang</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> lang <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> translations <span class="token operator">=</span> I81n<span class="token punctuation">[</span>lang<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>进行某种参数验证</strong></p> <p>另一个常见的情况是确保参数是一个整数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">users\/(\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这种情况下，您必须自己对匹配组件中的正则表达式做一些工作：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ValidateUser <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/*&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NotFound <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">ValidateUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> userId <span class="token operator">=</span> params<span class="token punctuation">.</span>id<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>NotFound <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>User id<span class="token operator">=</span><span class="token punctuation">{</span>params<span class="token punctuation">.</span>userId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> id <span class="token operator">=</span> props<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 v5 中，如果正则表达式不匹配，<code>&lt;Switch&gt;</code>则将继续尝试匹配下一条路线：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Switch<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token punctuation">{</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">users\/(\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">}</span> component<span class="token operator">=</span><span class="token punctuation">{</span>User<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/new&quot;</span> exact component<span class="token operator">=</span><span class="token punctuation">{</span>NewUser<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route
        path<span class="token operator">=</span><span class="token string">&quot;/users/inactive&quot;</span>
        exact
        component<span class="token operator">=</span><span class="token punctuation">{</span>InactiveUsers<span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/*&quot;</span> component<span class="token operator">=</span><span class="token punctuation">{</span>NotFound<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Switch<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>查看此示例，您可能会担心在 v6 版本中您的其他路由不会在其 URL 处呈现，因为<code>:userId</code>路由可能首先匹配。但是，由于路线排名，情况并非如此。&quot;new&quot; 和 &quot;inactive&quot; 路由将排名更高，因此呈现在它们各自的 URL 上：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Routes<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/:id&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ValidateUser <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/users/new&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>NewUser <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route
        path<span class="token operator">=</span><span class="token string">&quot;/users/inactive&quot;</span>
        element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>InactiveUsers <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Routes<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><em>事实上，如果您的路由没有正确</em>排序，v5 版本会出现各种问题。V6 完全消除了这个问题。</p> <p><strong>混音用户</strong></p> <p>如果您使用的是<a href="https://remix.run/" target="_blank" rel="noopener noreferrer">Remix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，则可以通过将此工作移至您的加载程序来向浏览器发送适当的 40x 响应。这也减少了发送给用户的浏览器包的大小，因为加载器只在服务器上运行。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useLoaderData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;remix&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>params<span class="token punctuation">.</span>id<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">400</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">await</span> fakeDb<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">where</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> params<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>remix 不会渲染您的组件，而是渲染最近的<a href="https://remix.run/docs/en/v1/api/conventions#catchboundary" target="_blank" rel="noopener noreferrer">捕获边界<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/baimingxuan/react-router6-doc/edit/main/docs/start/faqs.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2023/1/29 下午5:34:46</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react-router6-doc/start/tutorial.html" class="prev">
        教程
      </a></span> <span class="next"><a href="/react-router6-doc/start/concepts.html">
        核心概念
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/react-router6-doc/assets/js/app.3977e6ed.js" defer></script><script src="/react-router6-doc/assets/js/2.6430ac10.js" defer></script><script src="/react-router6-doc/assets/js/72.fd9f048e.js" defer></script>
  </body>
</html>
