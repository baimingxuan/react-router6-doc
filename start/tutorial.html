<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup | React Router6 ä¸­æ–‡æ–‡æ¡£</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="æ–‡æ¡£å†…å®¹è¯¦ç»†ç¿»è¯‘è‡ªå®˜æ–¹è‹±æ–‡æ–‡æ¡£">
    
    <link rel="preload" href="/react-router6-doc/assets/css/0.styles.9c14763a.css" as="style"><link rel="preload" href="/react-router6-doc/assets/js/app.3977e6ed.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/74.b28de77c.js" as="script"><link rel="prefetch" href="/react-router6-doc/assets/js/10.3ecfd4b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/11.96744b78.js"><link rel="prefetch" href="/react-router6-doc/assets/js/12.7ca7492b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/13.ed88fa50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/14.c32c4d27.js"><link rel="prefetch" href="/react-router6-doc/assets/js/15.492bdbe6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/16.0afe03b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/17.ee2650c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/18.38f3184b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/19.3d95686d.js"><link rel="prefetch" href="/react-router6-doc/assets/js/20.e006914b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/21.2914f993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/22.c25c5262.js"><link rel="prefetch" href="/react-router6-doc/assets/js/23.2959ad25.js"><link rel="prefetch" href="/react-router6-doc/assets/js/24.b6d79d39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/25.ac31ef72.js"><link rel="prefetch" href="/react-router6-doc/assets/js/26.872cb077.js"><link rel="prefetch" href="/react-router6-doc/assets/js/27.64e94538.js"><link rel="prefetch" href="/react-router6-doc/assets/js/28.8fc4bd95.js"><link rel="prefetch" href="/react-router6-doc/assets/js/29.472d4bce.js"><link rel="prefetch" href="/react-router6-doc/assets/js/3.ca35af39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/30.eb78e0e6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/31.f0041706.js"><link rel="prefetch" href="/react-router6-doc/assets/js/32.d7ea5513.js"><link rel="prefetch" href="/react-router6-doc/assets/js/33.6af9c91e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/34.f72f8b29.js"><link rel="prefetch" href="/react-router6-doc/assets/js/35.4f205482.js"><link rel="prefetch" href="/react-router6-doc/assets/js/36.7e81b201.js"><link rel="prefetch" href="/react-router6-doc/assets/js/37.189e63dd.js"><link rel="prefetch" href="/react-router6-doc/assets/js/38.7b2282a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/39.dfa41823.js"><link rel="prefetch" href="/react-router6-doc/assets/js/4.3357b40a.js"><link rel="prefetch" href="/react-router6-doc/assets/js/40.58e1cc61.js"><link rel="prefetch" href="/react-router6-doc/assets/js/41.ba56822c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/42.ddd0d283.js"><link rel="prefetch" href="/react-router6-doc/assets/js/43.449a8b8e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/44.e9602134.js"><link rel="prefetch" href="/react-router6-doc/assets/js/45.703d86c7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/46.2b4813c8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/47.33b902b8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/48.076c7084.js"><link rel="prefetch" href="/react-router6-doc/assets/js/49.ca3844b6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/5.e084b39e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/50.cb28fb54.js"><link rel="prefetch" href="/react-router6-doc/assets/js/51.a9bf92aa.js"><link rel="prefetch" href="/react-router6-doc/assets/js/52.abb71d57.js"><link rel="prefetch" href="/react-router6-doc/assets/js/53.f28b86ab.js"><link rel="prefetch" href="/react-router6-doc/assets/js/54.431230ac.js"><link rel="prefetch" href="/react-router6-doc/assets/js/55.6d416534.js"><link rel="prefetch" href="/react-router6-doc/assets/js/56.5247885e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/57.3468a0a6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/58.f6aac83e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/59.9802116c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/react-router6-doc/assets/js/60.07cb5490.js"><link rel="prefetch" href="/react-router6-doc/assets/js/61.2743a407.js"><link rel="prefetch" href="/react-router6-doc/assets/js/62.5fa1707e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/63.1d468a1f.js"><link rel="prefetch" href="/react-router6-doc/assets/js/64.e42e4d82.js"><link rel="prefetch" href="/react-router6-doc/assets/js/65.4b5065c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/66.9c218cc2.js"><link rel="prefetch" href="/react-router6-doc/assets/js/67.c74f8ad3.js"><link rel="prefetch" href="/react-router6-doc/assets/js/68.976323b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/69.a6de7974.js"><link rel="prefetch" href="/react-router6-doc/assets/js/7.79da1235.js"><link rel="prefetch" href="/react-router6-doc/assets/js/70.5323e7c9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/71.1eb10979.js"><link rel="prefetch" href="/react-router6-doc/assets/js/72.fd9f048e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/73.e5cc737c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/75.205022f9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/76.302640ff.js"><link rel="prefetch" href="/react-router6-doc/assets/js/77.bafe70a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/78.25f09583.js"><link rel="prefetch" href="/react-router6-doc/assets/js/79.943e4f2e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/8.8b6ff993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/80.b53f9e50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/81.666b3df7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/82.3b2246d5.js"><link rel="prefetch" href="/react-router6-doc/assets/js/83.2eca4ef0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/84.e4793f9b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/85.9812b3b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/9.33f377fb.js">
    <link rel="stylesheet" href="/react-router6-doc/assets/css/0.styles.9c14763a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-router6-doc/" class="home-link router-link-active"><!----> <span class="site-name">React Router6 ä¸­æ–‡æ–‡æ¡£</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/start/overview" class="sidebar-heading clickable open"><span>å¿«é€Ÿä¸Šæ‰‹</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/start/overview.html" class="sidebar-link">åŠŸèƒ½æ¦‚è¿°</a></li><li><a href="/react-router6-doc/start/tutorial.html" aria-current="page" class="active sidebar-link">æ•™ç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ·»åŠ -router" class="sidebar-link">æ·»åŠ  Router</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ ¹è·¯ç”±" class="sidebar-link">æ ¹è·¯ç”±</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å¤„ç†æœªæ‰¾åˆ°é”™è¯¯" class="sidebar-link">å¤„ç†æœªæ‰¾åˆ°é”™è¯¯</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#è”ç»œè·¯çº¿ç”¨æˆ·ç•Œé¢" class="sidebar-link">è”ç»œè·¯çº¿ç”¨æˆ·ç•Œé¢</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#åµŒå¥—è·¯ç”±" class="sidebar-link">åµŒå¥—è·¯ç”±</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å®¢æˆ·ç«¯è·¯ç”±" class="sidebar-link">å®¢æˆ·ç«¯è·¯ç”±</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#åŠ è½½æ•°æ®ä¸­" class="sidebar-link">åŠ è½½æ•°æ®ä¸­</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ•°æ®å†™å…¥-html-è¡¨å•" class="sidebar-link">æ•°æ®å†™å…¥ + HTML è¡¨å•</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#åˆ›å»ºè”ç³»äºº" class="sidebar-link">åˆ›å»ºè”ç³»äºº</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#åŠ è½½ç¨‹åºä¸­çš„-url-å‚æ•°" class="sidebar-link">åŠ è½½ç¨‹åºä¸­çš„ URL å‚æ•°</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ›´æ–°æ•°æ®" class="sidebar-link">æ›´æ–°æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ä½¿ç”¨-formdata-æ›´æ–°è”ç³»äºº" class="sidebar-link">ä½¿ç”¨ FormData æ›´æ–°è”ç³»äºº</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#çªå˜è®¨è®º" class="sidebar-link">çªå˜è®¨è®º</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å°†æ–°è®°å½•é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢" class="sidebar-link">å°†æ–°è®°å½•é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ´»åŠ¨é“¾æ¥æ ·å¼" class="sidebar-link">æ´»åŠ¨é“¾æ¥æ ·å¼</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å…¨å±€å¾…å®šç”¨æˆ·ç•Œé¢" class="sidebar-link">å…¨å±€å¾…å®šç”¨æˆ·ç•Œé¢</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#åˆ é™¤è®°å½•" class="sidebar-link">åˆ é™¤è®°å½•</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ä¸Šä¸‹æ–‡é”™è¯¯" class="sidebar-link">ä¸Šä¸‹æ–‡é”™è¯¯</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ç´¢å¼•è·¯çº¿" class="sidebar-link">ç´¢å¼•è·¯çº¿</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å–æ¶ˆæŒ‰é’®" class="sidebar-link">å–æ¶ˆæŒ‰é’®</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#url-æœç´¢å‚æ•°å’Œ-get-æäº¤" class="sidebar-link">URL æœç´¢å‚æ•°å’Œ GET æäº¤</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±è·å–æäº¤" class="sidebar-link">ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±è·å–æäº¤</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#å°†-url-åŒæ­¥åˆ°è¡¨å•çŠ¶æ€" class="sidebar-link">å°† URL åŒæ­¥åˆ°è¡¨å•çŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æäº¤è¡¨æ ¼onchange" class="sidebar-link">æäº¤è¡¨æ ¼onChange</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ·»åŠ æœç´¢å¾®è°ƒå™¨" class="sidebar-link">æ·»åŠ æœç´¢å¾®è°ƒå™¨</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ç®¡ç†å†å²æ ˆ" class="sidebar-link">ç®¡ç†å†å²æ ˆ</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ²¡æœ‰å¯¼èˆªçš„çªå˜" class="sidebar-link">æ²¡æœ‰å¯¼èˆªçš„çªå˜</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#ä¹è§‚çš„ç”¨æˆ·ç•Œé¢" class="sidebar-link">ä¹è§‚çš„ç”¨æˆ·ç•Œé¢</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æœªæ‰¾åˆ°æ•°æ®" class="sidebar-link">æœªæ‰¾åˆ°æ•°æ®</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#æ— è·¯å¾„è·¯çº¿" class="sidebar-link">æ— è·¯å¾„è·¯çº¿</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#jsx-è·¯çº¿" class="sidebar-link">JSX è·¯çº¿</a></li></ul></li><li><a href="/react-router6-doc/start/faqs.html" class="sidebar-link">å¸¸è§é—®é¢˜</a></li><li><a href="/react-router6-doc/start/concepts.html" class="sidebar-link">æ ¸å¿ƒæ¦‚å¿µ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router/picking-a-router" class="sidebar-heading clickable"><span>Router</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router/picking-a-router.html" class="sidebar-link">é€‰æ‹©Router</a></li><li><a href="/react-router6-doc/router/create-browser-router.html" class="sidebar-link">createBrowserRouter</a></li><li><a href="/react-router6-doc/router/create-hash-router.html" class="sidebar-link">createHashRouter</a></li><li><a href="/react-router6-doc/router/create-memory-router.html" class="sidebar-link">createMemoryRouter</a></li><li><a href="/react-router6-doc/router/router-provider.html" class="sidebar-link">RouterProvider</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router-components/browser-router" class="sidebar-heading clickable"><span>Routerç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router-components/browser-router.html" class="sidebar-link">BrowserRouter</a></li><li><a href="/react-router6-doc/router-components/hash-router.html" class="sidebar-link">HashRouter</a></li><li><a href="/react-router6-doc/router-components/memory-router.html" class="sidebar-link">MemoryRouter</a></li><li><a href="/react-router6-doc/router-components/native-router.html" class="sidebar-link">NativeRouter</a></li><li><a href="/react-router6-doc/router-components/router.html" class="sidebar-link">router</a></li><li><a href="/react-router6-doc/router-components/static-router.html" class="sidebar-link">StaticRouter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/route/route" class="sidebar-heading clickable"><span>route</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/route/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/route/action.html" class="sidebar-link">action</a></li><li><a href="/react-router6-doc/route/error-element.html" class="sidebar-link">errorElement</a></li><li><a href="/react-router6-doc/route/loader.html" class="sidebar-link">Loader</a></li><li><a href="/react-router6-doc/route/should-revalidate.html" class="sidebar-link">shouldRevalidate</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/components/await" class="sidebar-heading clickable"><span>ç»„ä»¶</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/components/await.html" class="sidebar-link">Await</a></li><li><a href="/react-router6-doc/components/form.html" class="sidebar-link">Form</a></li><li><a href="/react-router6-doc/components/link.html" class="sidebar-link">Link</a></li><li><a href="/react-router6-doc/components/link-native.html" class="sidebar-link">Link(RN)</a></li><li><a href="/react-router6-doc/components/nav-link.html" class="sidebar-link">NavLink</a></li><li><a href="/react-router6-doc/components/navigate.html" class="sidebar-link">Navigate</a></li><li><a href="/react-router6-doc/components/outlet.html" class="sidebar-link">Outlet</a></li><li><a href="/react-router6-doc/components/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/components/routes.html" class="sidebar-link">Routes</a></li><li><a href="/react-router6-doc/components/scroll-restoration.html" class="sidebar-link">ScrollRestoration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/hooks/use-action-data" class="sidebar-heading clickable"><span>é’©å­å‡½æ•°</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/hooks/use-action-data.html" class="sidebar-link">useActionData</a></li><li><a href="/react-router6-doc/hooks/use-async-error.html" class="sidebar-link">useAsyncError</a></li><li><a href="/react-router6-doc/hooks/use-async-value.html" class="sidebar-link">useAsyncValue</a></li><li><a href="/react-router6-doc/hooks/use-before-unload.html" class="sidebar-link">useBeforeUnload</a></li><li><a href="/react-router6-doc/hooks/use-fetcher.html" class="sidebar-link">useFetcher</a></li><li><a href="/react-router6-doc/hooks/use-fetchers.html" class="sidebar-link">useFetchers</a></li><li><a href="/react-router6-doc/hooks/use-form-action.html" class="sidebar-link">useFormAction</a></li><li><a href="/react-router6-doc/hooks/use-href.html" class="sidebar-link">useHref</a></li><li><a href="/react-router6-doc/hooks/use-in-router-context.html" class="sidebar-link">useInRouterContext</a></li><li><a href="/react-router6-doc/hooks/use-link-click-handler.html" class="sidebar-link">useLinkClickHandler</a></li><li><a href="/react-router6-doc/hooks/use-link-press-handler.html" class="sidebar-link">useLinkPressHandler</a></li><li><a href="/react-router6-doc/hooks/use-loader-data.html" class="sidebar-link">useLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-location.html" class="sidebar-link">useLocation</a></li><li><a href="/react-router6-doc/hooks/use-match.html" class="sidebar-link">useMatch</a></li><li><a href="/react-router6-doc/hooks/use-matches.html" class="sidebar-link">useMatches</a></li><li><a href="/react-router6-doc/hooks/use-navigate.html" class="sidebar-link">useNavigate</a></li><li><a href="/react-router6-doc/hooks/use-navigation.html" class="sidebar-link">useNavigation</a></li><li><a href="/react-router6-doc/hooks/use-navigation-type.html" class="sidebar-link">useNavigationType</a></li><li><a href="/react-router6-doc/hooks/use-outlet.html" class="sidebar-link">useOutlet</a></li><li><a href="/react-router6-doc/hooks/use-outlet-context.html" class="sidebar-link">useOutletContext</a></li><li><a href="/react-router6-doc/hooks/use-params.html" class="sidebar-link">useParams</a></li><li><a href="/react-router6-doc/hooks/use-resolved-path.html" class="sidebar-link">useResolvedPath</a></li><li><a href="/react-router6-doc/hooks/use-revalidator.html" class="sidebar-link">useRevalidator</a></li><li><a href="/react-router6-doc/hooks/use-route-error.html" class="sidebar-link">useRouteError</a></li><li><a href="/react-router6-doc/hooks/use-route-loader-data.html" class="sidebar-link">useRouteLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-routes.html" class="sidebar-link">useRoutes</a></li><li><a href="/react-router6-doc/hooks/use-search-params.html" class="sidebar-link">useSearchParams</a></li><li><a href="/react-router6-doc/hooks/use-search-params-rn.html" class="sidebar-link">useSearchParams(RN)</a></li><li><a href="/react-router6-doc/hooks/use-submit.html" class="sidebar-link">useSubmit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/fetch/json" class="sidebar-heading clickable"><span>Fetchå·¥å…·ç±»</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/fetch/json.html" class="sidebar-link">json</a></li><li><a href="/react-router6-doc/fetch/redirect.html" class="sidebar-link">redirect</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/utils/create-routes-from-children" class="sidebar-heading clickable"><span>å·¥å…·ç±»</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/utils/create-routes-from-children.html" class="sidebar-link">createRoutesFromChildren</a></li><li><a href="/react-router6-doc/utils/create-routes-from-elements.html" class="sidebar-link">createRoutesFromElements</a></li><li><a href="/react-router6-doc/utils/create-search-params.html" class="sidebar-link">createSearchParams</a></li><li><a href="/react-router6-doc/utils/defer.html" class="sidebar-link">defer</a></li><li><a href="/react-router6-doc/utils/generate-path.html" class="sidebar-link">generatePath</a></li><li><a href="/react-router6-doc/utils/is-route-error-response.html" class="sidebar-link">isRouteErrorResponse</a></li><li><a href="/react-router6-doc/utils/location.html" class="sidebar-link">Location</a></li><li><a href="/react-router6-doc/utils/match-path.html" class="sidebar-link">matchPath</a></li><li><a href="/react-router6-doc/utils/match-routes.html" class="sidebar-link">matchRoutes</a></li><li><a href="/react-router6-doc/utils/render-matches.html" class="sidebar-link">renderMatches</a></li><li><a href="/react-router6-doc/utils/resolve-path.html" class="sidebar-link">resolvePath</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/guides/ssr" class="sidebar-heading clickable"><span>æŒ‡å—</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/guides/ssr.html" class="sidebar-link">æœåŠ¡ç«¯æ¸²æŸ“</a></li><li><a href="/react-router6-doc/guides/contributing.html" class="sidebar-link">è´¡çŒ®</a></li><li><a href="/react-router6-doc/guides/data-libs.html" class="sidebar-link">æ•°æ®åº“æ•´åˆ</a></li><li><a href="/react-router6-doc/guides/deferred.html" class="sidebar-link">å»¶è¿Ÿæ•°æ®</a></li><li><a href="/react-router6-doc/guides/form-data.html" class="sidebar-link">ä½¿ç”¨FormData</a></li><li><a href="/react-router6-doc/guides/index-search-param.html" class="sidebar-link">ç´¢å¼•æŸ¥è¯¢å‚æ•°</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://vitejs.dev/guide/" target="_blank" rel="noopener noreferrer">Vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä½œä¸ºæˆ‘ä»¬çš„æ†ç»‘å™¨å’Œå¼€å‘æœåŠ¡å™¨ã€‚æ‚¨éœ€è¦ä¸ºå‘½ä»¤è¡Œå·¥å…·å®‰è£…<a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.jsã€‚<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>npm</code></p> <p>ğŸ‘‰ï¸<strong>æ‰“å¼€æ‚¨çš„ç»ˆç«¯å¹¶ä½¿ç”¨ Vite å¯åŠ¨ä¸€ä¸ªæ–°çš„ React åº”ç”¨ç¨‹åºï¼š</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> create vite@latest name-of-your-project -- <span class="token parameter variable">--template</span> react
<span class="token comment"># follow prompts</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>your new project directory<span class="token operator">&gt;</span>
<span class="token function">npm</span> <span class="token function">install</span> react-router-dom localforage match-sorter sort-by
<span class="token function">npm</span> run dev
</code></pre></div><p>æ‚¨åº”è¯¥èƒ½å¤Ÿè®¿é—®ç»ˆç«¯ä¸­æ‰“å°çš„ URLï¼š</p> <div class="language- extra-class"><pre class="language-text"><code> VITE v3.0.7  ready in 175 ms

  âœ  Local:   http://127.0.0.1:5173/
  âœ  Network: use --host to expose
</code></pre></div><p>æˆ‘ä»¬ä¸ºæœ¬æ•™ç¨‹å‡†å¤‡äº†ä¸€äº›é¢„å…ˆç¼–å†™çš„ CSSï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¸“æ³¨äº React Routerã€‚éšæ„ä¸¥å‰åœ°åˆ¤æ–­å®ƒæˆ–ç¼–å†™ä½ è‡ªå·±çš„ ğŸ˜€ï¼ˆæˆ‘ä»¬åšäº†æˆ‘ä»¬é€šå¸¸ä¸ä¼šåœ¨ CSS ä¸­åšçš„äº‹æƒ…ï¼Œä»¥ä¾¿æœ¬æ•™ç¨‹ä¸­çš„æ ‡è®°å¯ä»¥ä¿æŒå°½å¯èƒ½å°‘ã€‚ï¼‰</p> <p>ğŸ‘‰å°†**<a href="https://gist.githubusercontent.com/ryanflorence/ba20d473ef59e1965543fa013ae4163f/raw/499707f25a5690d490c7b3d54c65c65eb895930c/react-router-6.4-tutorial-css.css" target="_blank" rel="noopener noreferrer">æ­¤å¤„æ‰¾åˆ°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**<strong>çš„æ•™ç¨‹ CSS å¤åˆ¶/ç²˜è´´åˆ°<code>src/index.css</code></strong></p> <p>æœ¬æ•™ç¨‹å°†åˆ›å»ºã€è¯»å–ã€æœç´¢ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®ã€‚ä¸€ä¸ªå…¸å‹çš„ç½‘ç»œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šä¸æ‚¨çš„ç½‘ç»œæœåŠ¡å™¨ä¸Šçš„ API å¯¹è¯ï¼Œä½†æˆ‘ä»¬å°†ä½¿ç”¨æµè§ˆå™¨å­˜å‚¨å¹¶ä¼ªé€ ä¸€äº›ç½‘ç»œå»¶è¿Ÿæ¥ä¿æŒè¿™ä¸€ç‚¹ã€‚è¿™äº›ä»£ç éƒ½ä¸ React Router æ— å…³ï¼Œæ‰€ä»¥åªéœ€å¤åˆ¶/ç²˜è´´æ‰€æœ‰ä»£ç å³å¯ã€‚</p> <p>ğŸ‘‰å°†**<a href="https://gist.githubusercontent.com/ryanflorence/1e7f5d3344c0db4a8394292c157cd305/raw/f7ff21e9ae7ffd55bfaaaf320e09c6a08a8a6611/contacts.js" target="_blank" rel="noopener noreferrer">æ­¤å¤„æ‰¾åˆ°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**<strong>çš„æ•™ç¨‹æ•°æ®æ¨¡å—å¤åˆ¶/ç²˜è´´åˆ°<code>src/contacts.js</code></strong></p> <p>src æ–‡ä»¶å¤¹ä¸­æ‰€éœ€çš„å…¨éƒ¨æ˜¯<code>contacts.js</code>ã€<code>main.jsx</code>å’Œ<code>index.css</code>ã€‚æ‚¨å¯ä»¥åˆ é™¤ä»»ä½•å…¶ä»–å†…å®¹ï¼ˆä¾‹å¦‚<code>App.js</code>å’Œ<code>assets</code>ç­‰ï¼‰ã€‚</p> <p>ğŸ‘‰<strong>åˆ é™¤æœªä½¿ç”¨çš„æ–‡ä»¶ï¼Œ<code>src/</code>æ‰€ä»¥ä½ åªå‰©ä¸‹è¿™äº›ï¼š</strong></p> <div class="language- extra-class"><pre class="language-text"><code>src
â”œâ”€â”€ contacts.js
â”œâ”€â”€ index.css
â””â”€â”€ main.jsx
</code></pre></div><p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæ­£åœ¨è¿è¡Œï¼Œå®ƒå¯èƒ½ä¼šæš‚æ—¶å´©æºƒï¼Œç»§ç»­å‰è¿› ğŸ˜‹ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹äº†ï¼</p> <h2 id="æ·»åŠ -router"><a href="#æ·»åŠ -router" class="header-anchor">#</a> æ·»åŠ  Router</h2> <p>é¦–å…ˆè¦åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª<a href="https://reactrouter.com/en/main/routers/create-browser-router" target="_blank" rel="noopener noreferrer">æµè§ˆå™¨è·¯ç”±å™¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å¹¶é…ç½®æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè·¯ç”±ã€‚è¿™å°†ä¸ºæˆ‘ä»¬çš„ç½‘ç»œåº”ç”¨ç¨‹åºå¯ç”¨å®¢æˆ·ç«¯è·¯ç”±ã€‚</p> <p>è¯¥<code>main.jsx</code>æ–‡ä»¶æ˜¯å…¥å£ç‚¹ã€‚æ‰“å¼€å®ƒï¼Œæˆ‘ä»¬å°†æŠŠ React Router æ”¾åœ¨é¡µé¢ä¸Šã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºå¹¶æ¸²æŸ“æµè§ˆå™¨<a href="https://reactrouter.com/en/main/routers/create-browser-router" target="_blank" rel="noopener noreferrer">è·¯ç”±å™¨<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>main.jsx</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createBrowserRouter<span class="token punctuation">,</span>
  RouterProvider<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç¬¬ä¸€æ¡è·¯çº¿å°±æ˜¯æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œæ ¹è·¯çº¿â€ï¼Œå› ä¸ºæˆ‘ä»¬çš„å…¶ä½™è·¯çº¿å°†åœ¨å…¶ä¸­å‘ˆç°ã€‚å®ƒå°†ä½œä¸º UI çš„æ ¹å¸ƒå±€ï¼Œéšç€æˆ‘ä»¬çš„æ·±å…¥ï¼Œæˆ‘ä»¬å°†æ‹¥æœ‰åµŒå¥—å¸ƒå±€ã€‚</p> <h2 id="æ ¹è·¯ç”±"><a href="#æ ¹è·¯ç”±" class="header-anchor">#</a> æ ¹è·¯ç”±</h2> <p>è®©æˆ‘ä»¬ä¸ºè¿™ä¸ªåº”ç”¨ç¨‹åºæ·»åŠ å…¨å±€å¸ƒå±€ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»º<code>src/routes</code>å’Œ<code>src/routes/root.jsx</code></strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> src/routes
<span class="token function">touch</span> src/routes/root.jsx
</code></pre></div><p>ï¼ˆå¦‚æœä½ ä¸æƒ³æˆä¸ºå‘½ä»¤è¡Œä¹¦å‘†å­ï¼Œè¯·ä½¿ç”¨ä½ çš„ç¼–è¾‘å™¨è€Œä¸æ˜¯é‚£äº›å‘½ä»¤ğŸ¤“ï¼‰</p> <p>ğŸ‘‰<strong>åˆ›å»ºæ ¹å¸ƒå±€ç»„ä»¶</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span>
              aria<span class="token operator">-</span>hidden
              hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span>
              aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span>
            <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Name<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Friend<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç›®å‰è¿˜æ²¡æœ‰ React Router çš„å…·ä½“å†…å®¹ï¼Œæ‰€ä»¥è¯·éšæ„å¤åˆ¶/ç²˜è´´æ‰€æœ‰è¿™äº›å†…å®¹ã€‚</p> <p>ğŸ‘‰<strong>è®¾ç½®<code>&lt;Root&gt;</code>ä¸ºæ ¹è·¯ç”±<a href="https://reactrouter.com/en/main/route/route#element" target="_blank" rel="noopener noreferrer"><code>element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing imports */</span>
<span class="token keyword">import</span> Root <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯¥åº”ç”¨ç¨‹åºç°åœ¨åº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ã€‚æœ‰ä¸€ä¸ªèƒ½å†™ CSS çš„è®¾è®¡å¸ˆå½“ç„¶å¾ˆå¥½ï¼Œä¸æ˜¯å—ï¼Ÿï¼ˆ<a href="https://blog.jim-nielsen.com/" target="_blank" rel="noopener noreferrer">è°¢è°¢å‰å§†<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ğŸ™ï¼‰ã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/01.webp" alt="img"></p> <h2 id="å¤„ç†æœªæ‰¾åˆ°é”™è¯¯"><a href="#å¤„ç†æœªæ‰¾åˆ°é”™è¯¯" class="header-anchor">#</a> å¤„ç†æœªæ‰¾åˆ°é”™è¯¯</h2> <p>åœ¨é¡¹ç›®æ—©æœŸäº†è§£æ‚¨çš„åº”ç”¨ç¨‹åºå¦‚ä½•å“åº”é”™è¯¯å§‹ç»ˆæ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºåœ¨æ„å»ºæ–°åº”ç”¨ç¨‹åºæ—¶ï¼Œæˆ‘ä»¬ç¼–å†™çš„é”™è¯¯è¿œè¿œå¤šäºåŠŸèƒ½ï¼å‘ç”Ÿè¿™ç§æƒ…å†µæ—¶ï¼Œæ‚¨çš„ç”¨æˆ·ä¸ä»…ä¼šè·å¾—è‰¯å¥½çš„ä½“éªŒï¼Œè€Œä¸”è¿˜ä¼šåœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸ºæ‚¨æä¾›å¸®åŠ©ã€‚</p> <p>æˆ‘ä»¬æ·»åŠ äº†ä¸€äº›é“¾æ¥åˆ°è¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬ç‚¹å‡»å®ƒä»¬æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p> <p>ğŸ‘‰<strong>å•å‡»å…¶ä¸­ä¸€ä¸ªä¾§è¾¹æ åç§°</strong></p> <p><img src="https://reactrouter.com/_docs/tutorial/02.webp" alt="é»˜è®¤ React Router é”™è¯¯å…ƒç´ çš„å±å¹•æˆªå›¾"></p> <p>æ€»çš„ï¼è¿™æ˜¯ React Router ä¸­çš„é»˜è®¤é”™è¯¯å±å¹•ï¼Œç”±äºæˆ‘ä»¬åœ¨è¯¥åº”ç”¨ç¨‹åºæ ¹å…ƒç´ ä¸Šçš„ flex box æ ·å¼è€Œå˜å¾—æ›´ç³ŸğŸ˜‚ã€‚</p> <p>ä»»ä½•æ—¶å€™æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨æ¸²æŸ“ã€åŠ è½½æ•°æ®æˆ–æ‰§è¡Œæ•°æ®çªå˜æ—¶æŠ›å‡ºé”™è¯¯ï¼ŒReact Router éƒ½ä¼šæ•è·å®ƒå¹¶æ¸²æŸ“é”™è¯¯å±å¹•ã€‚è®©æˆ‘ä»¬åˆ¶ä½œæˆ‘ä»¬è‡ªå·±çš„é”™è¯¯é¡µé¢ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºé”™è¯¯é¡µé¢ç»„ä»¶</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/error-page.jsx
</code></pre></div><p><code>src/error-page.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouteError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ErrorPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">useRouteError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;error-page&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Oops<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Sorry<span class="token punctuation">,</span> an unexpected error has occurred<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">.</span>statusText <span class="token operator">||</span> error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>è®¾ç½®<code>&lt;ErrorPage&gt;</code>ä¸º<a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ ¹è·¯ç”±</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* previous imports */</span>
<span class="token keyword">import</span> ErrorPage <span class="token keyword">from</span> <span class="token string">&quot;./error-page&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é”™è¯¯é¡µé¢ç°åœ¨åº”è¯¥å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/03.webp" alt="æ–°çš„é”™è¯¯é¡µé¢ï¼Œä½†ä»ç„¶å¾ˆéš¾çœ‹"></p> <p>ï¼ˆå¥½å§ï¼Œé‚£ä¹Ÿå¥½ä¸äº†å¤šå°‘ã€‚å¯èƒ½æœ‰äººå¿˜è®°æ‰¾è®¾è®¡å¸ˆåšé”™é¡µäº†ã€‚å¯èƒ½å¤§å®¶å¿˜è®°æ‰¾è®¾è®¡å¸ˆåšé”™é¡µäº†ï¼Œç„¶åæ€ªè®¾è®¡å¸ˆæƒ³ä¸åˆ°å§ğŸ˜†ï¼‰</p> <p>è¯·æ³¨æ„ï¼Œå®ƒ<a href="https://reactrouter.com/en/main/hooks/use-route-error" target="_blank" rel="noopener noreferrer"><code>useRouteError</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æä¾›äº†æŠ›å‡ºçš„é”™è¯¯ã€‚å½“ç”¨æˆ·å¯¼èˆªåˆ°ä¸å­˜åœ¨çš„è·¯çº¿æ—¶ï¼Œæ‚¨å°†æ”¶åˆ°å¸¦æœ‰ &quot;Not Found&quot;çš„<a href="https://reactrouter.com/en/main/utils/is-route-error-response" target="_blank" rel="noopener noreferrer">é”™è¯¯å“åº”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>statusText</code>ã€‚æˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹çš„åé¢çœ‹åˆ°ä¸€äº›å…¶ä»–é”™è¯¯ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ›´å¤šè®¨è®ºã€‚</p> <p>ç°åœ¨ï¼ŒçŸ¥é“å‡ ä¹æ‰€æœ‰çš„é”™è¯¯ç°åœ¨éƒ½å°†ç”±è¿™ä¸ªé¡µé¢å¤„ç†ï¼Œè€Œä¸æ˜¯æ— é™æ—‹è½¬ã€æ— å“åº”çš„é¡µé¢æˆ–ç©ºç™½å±å¹•å°±è¶³å¤Ÿäº†ğŸ™Œ</p> <h2 id="è”ç»œè·¯çº¿ç”¨æˆ·ç•Œé¢"><a href="#è”ç»œè·¯çº¿ç”¨æˆ·ç•Œé¢" class="header-anchor">#</a> è”ç»œè·¯çº¿ç”¨æˆ·ç•Œé¢</h2> <p>æˆ‘ä»¬æƒ³è¦åœ¨é“¾æ¥åˆ°çš„ URL ä¸Šå®é™…å‘ˆç°ä¸€äº›å†…å®¹ï¼Œè€Œä¸æ˜¯ 404â€œæœªæ‰¾åˆ°â€é¡µé¢ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦å¼€è¾Ÿä¸€æ¡æ–°è·¯çº¿ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºè”ç»œè·¯çº¿æ¨¡å—</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/contact.jsx
</code></pre></div><p>ğŸ‘‰<strong>æ·»åŠ è”ç³»äººç»„ä»¶UI</strong></p> <p>è¿™åªæ˜¯ä¸€å †å…ƒç´ ï¼Œè¯·éšæ„å¤åˆ¶/ç²˜è´´ã€‚</p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token string">&quot;Your&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">&quot;https://placekitten.com/g/200/200&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">twitter</span><span class="token operator">:</span> <span class="token string">&quot;your_handle&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">notes</span><span class="token operator">:</span> <span class="token string">&quot;Some notes&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">favorite</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;contact&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img
          key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
          src<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first <span class="token operator">||</span> contact<span class="token punctuation">.</span>last <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span> <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No Name<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Favorite contact<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a
              target<span class="token operator">=</span><span class="token string">&quot;_blank&quot;</span>
              href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://twitter.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>twitter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form action<span class="token operator">=</span><span class="token string">&quot;edit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Edit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form
            method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span>
            action<span class="token operator">=</span><span class="token string">&quot;destroy&quot;</span>
            onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>
                <span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span>
                  <span class="token string">&quot;Please confirm you want to delete this record.&quot;</span>
                <span class="token punctuation">)</span>
              <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// yes, this is a `let` for later</span>
  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;â˜…&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜†&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªç»„ä»¶ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒè¿æ¥åˆ°ä¸€ä¸ªæ–°çš„è·¯ç”±ä¸Šã€‚</p> <p>ğŸ‘‰<strong>å¯¼å…¥è”ç³»äººç»„ä»¶å¹¶æ–°å»ºè·¯ç”±</strong></p> <div class="language- extra-class"><pre class="language-text"><code>/* existing imports */
import Contact from &quot;./routes/contact&quot;;

const router = createBrowserRouter([
  {
    path: &quot;/&quot;,
    element: &lt;Root /&gt;,
    errorElement: &lt;ErrorPage /&gt;,
  },
  {
    path: &quot;contacts/:contactId&quot;,
    element: &lt;Contact /&gt;,
  },
]);

/* existing code */
</code></pre></div><p>ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬å•å‡»å…¶ä¸­ä¸€ä¸ªé“¾æ¥æˆ–è®¿é—®<code>/contacts/1</code>ï¼Œæˆ‘ä»¬å°†è·å¾—æ–°ç»„ä»¶ï¼</p> <p><img src="https://reactrouter.com/_docs/tutorial/04.webp" alt="æ²¡æœ‰çˆ¶å¸ƒå±€çš„è”ç³»è·¯ç”±æ¸²æŸ“"></p> <p>ç„¶è€Œï¼Œå®ƒä¸åœ¨æˆ‘ä»¬çš„æ ¹å¸ƒå±€å†…ğŸ˜ </p> <h2 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="header-anchor">#</a> åµŒå¥—è·¯ç”±</h2> <p>æˆ‘ä»¬å¸Œæœ›è”ç³»äººç»„ä»¶åƒè¿™æ ·åœ¨å¸ƒå±€<em>å†…éƒ¨å‘ˆç°ã€‚</em><code>&lt;Root&gt;</code></p> <p><img src="https://reactrouter.com/_docs/tutorial/05.webp" alt="img"></p> <p>æˆ‘ä»¬é€šè¿‡ä½¿è”ç³»è·¯ç”±æˆä¸ºæ ¹è·¯ç”±çš„å­è·¯ç”±æ¥å®ç°*ã€‚*</p> <p>ğŸ‘‰<strong>å°† contacts è·¯ç”±ç§»åŠ¨ä¸ºæ ¹è·¯ç”±çš„å­è·¯ç”±</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>æ‚¨ç°åœ¨å°†å†æ¬¡çœ‹åˆ°æ ¹å¸ƒå±€ï¼Œä½†å³ä¾§æ˜¯ä¸€ä¸ªç©ºç™½é¡µé¢ã€‚æˆ‘ä»¬éœ€è¦å‘Šè¯‰æ ¹è·¯ç”±æˆ‘ä»¬å¸Œæœ›å®ƒ*åœ¨å“ªé‡Œæ¸²æŸ“å®ƒçš„å­è·¯ç”±ã€‚*æˆ‘ä»¬ç”¨<a href="https://reactrouter.com/en/main/components/outlet" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>æ‰¾åˆ°<code>&lt;div id=&quot;detail&quot;&gt;</code>å¹¶åœ¨é‡Œé¢æ”¾ä¸€ä¸ªæ’åº§</p> <p>ğŸ‘‰<strong>æ¸²æŸ“<a href="https://reactrouter.com/en/main/components/outlet" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* all the other elements */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å®¢æˆ·ç«¯è·¯ç”±"><a href="#å®¢æˆ·ç«¯è·¯ç”±" class="header-anchor">#</a> å®¢æˆ·ç«¯è·¯ç”±</h2> <p>ä½ å¯èƒ½æ³¨æ„åˆ°ä¹Ÿå¯èƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å•å‡»ä¾§è¾¹æ ä¸­çš„é“¾æ¥æ—¶ï¼Œæµè§ˆå™¨æ­£åœ¨å¯¹ä¸‹ä¸€ä¸ª URL æ‰§è¡Œå®Œæ•´çš„æ–‡æ¡£è¯·æ±‚ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ React Routerã€‚</p> <p>å®¢æˆ·ç«¯è·¯ç”±å…è®¸æˆ‘ä»¬çš„åº”ç”¨æ›´æ–° URL è€Œæ— éœ€ä»æœåŠ¡å™¨è¯·æ±‚å¦ä¸€ä¸ªæ–‡æ¡£ã€‚ç›¸åï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç«‹å³å‘ˆç°æ–°çš„ UIã€‚è®©æˆ‘ä»¬ç”¨<a href="https://reactrouter.com/en/main/components/link" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>ğŸ‘‰<strong>å°†ä¾§è¾¹æ æ›´æ”¹<code>&lt;a href&gt;</code>ä¸º<code>&lt;Link to&gt;</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other elements */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Name<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Friend<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other elements */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ‚¨å¯ä»¥åœ¨æµè§ˆå™¨ devtools ä¸­æ‰“å¼€ç½‘ç»œé€‰é¡¹å¡ï¼Œä»¥æŸ¥çœ‹å®ƒä¸å†è¯·æ±‚æ–‡æ¡£ã€‚</p> <h2 id="åŠ è½½æ•°æ®ä¸­"><a href="#åŠ è½½æ•°æ®ä¸­" class="header-anchor">#</a> åŠ è½½æ•°æ®ä¸­</h2> <p>URL æ®µã€å¸ƒå±€å’Œæ•°æ®é€šå¸¸è€¦åˆï¼ˆä¸‰å€ï¼Ÿï¼‰åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬å·²ç»å¯ä»¥åœ¨è¿™ä¸ªåº”ç”¨ç¨‹åºä¸­çœ‹åˆ°å®ƒï¼š</p> <table><thead><tr><th>ç½‘å€æ®µ</th> <th>æˆåˆ†</th> <th>æ•°æ®</th></tr></thead> <tbody><tr><td>/</td> <td><code>&lt;Root&gt;</code></td> <td>è”ç³»äººåˆ—è¡¨</td></tr> <tr><td>è”ç³»äºº/:id</td> <td><code>&lt;Contact&gt;</code></td> <td>ä¸ªåˆ«è”ç³»</td></tr></tbody></table> <p>ç”±äºè¿™ç§è‡ªç„¶è€¦åˆï¼ŒReact Router å…·æœ‰æ•°æ®çº¦å®šï¼Œå¯ä»¥è½»æ¾åœ°å°†æ•°æ®æ”¾å…¥è·¯ç”±ç»„ä»¶ä¸­ã€‚</p> <p>æˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ª API æ¥åŠ è½½æ•°æ®ï¼Œ<a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noopener noreferrer"><code>loader</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä»¥åŠ<a href="https://reactrouter.com/en/main/hooks/use-loader-data" target="_blank" rel="noopener noreferrer"><code>useLoaderData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. é¦–å…ˆï¼Œæˆ‘ä»¬å°†åœ¨æ ¹æ¨¡å—ä¸­åˆ›å»ºå¹¶å¯¼å‡ºä¸€ä¸ªåŠ è½½ç¨‹åºå‡½æ•°ï¼Œç„¶åå°†å…¶è¿æ¥åˆ°è·¯ç”±ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è®¿é—®å¹¶å‘ˆç°æ•°æ®ã€‚</p> <p>ğŸ‘‰<strong>å¯¼å‡ºåŠ è½½å™¨<code>root.jsx</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>åœ¨è·¯ç”±ä¸Šé…ç½®loader</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* other imports */</span>
<span class="token keyword">import</span> Root<span class="token punctuation">,</span> <span class="token punctuation">{</span> loader <span class="token keyword">as</span> rootLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ğŸ‘‰<strong>è®¿é—®å’Œæ¸²æŸ“æ•°æ®</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/* other code */</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">contact</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first <span class="token operator">||</span> contact<span class="token punctuation">.</span>last <span class="token operator">?</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span> <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
                      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No Name<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
                    <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>favorite <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>â˜…<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No contacts<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å°±æ˜¯è¿™æ ·ï¼React Router ç°åœ¨å°†è‡ªåŠ¨ä¿æŒè¯¥æ•°æ®ä¸æ‚¨çš„ UI åŒæ­¥ã€‚æˆ‘ä»¬è¿˜æ²¡æœ‰ä»»ä½•æ•°æ®ï¼Œæ‰€ä»¥æ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªåƒè¿™æ ·çš„ç©ºç™½åˆ—è¡¨ï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/06.webp" alt="img"></p> <h2 id="æ•°æ®å†™å…¥-html-è¡¨å•"><a href="#æ•°æ®å†™å…¥-html-è¡¨å•" class="header-anchor">#</a> æ•°æ®å†™å…¥ + HTML è¡¨å•</h2> <p>æˆ‘ä»¬å°†åœ¨ä¸€ç§’é’Ÿå†…åˆ›å»ºæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè”ç³»äººï¼Œä½†é¦–å…ˆè®©æˆ‘ä»¬è°ˆè°ˆ HTMLã€‚</p> <p>æ ¹æ® JavaScript å¯’æ­¦çºªå¤§çˆ†å‘ä¹‹å‰çš„ Web å¼€å‘ï¼ŒReact Router æ¨¡æ‹Ÿ HTML è¡¨å•å¯¼èˆªä½œä¸ºæ•°æ®çªå˜åŸè¯­ã€‚å®ƒä¸ºæ‚¨æä¾›äº†å®¢æˆ·ç«¯å‘ˆç°çš„åº”ç”¨ç¨‹åºçš„ UX åŠŸèƒ½ä»¥åŠâ€œè€å¼â€Web æ¨¡å‹çš„ç®€å•æ€§ã€‚</p> <p>è™½ç„¶ä¸€äº› Web å¼€å‘äººå‘˜ä¸ç†Ÿæ‚‰ï¼Œä½† HTML è¡¨å•å®é™…ä¸Šä¼šåœ¨æµè§ˆå™¨ä¸­å¼•èµ·å¯¼èˆªï¼Œå°±åƒå•å‡»é“¾æ¥ä¸€æ ·ã€‚å”¯ä¸€çš„åŒºåˆ«åœ¨äºè¯·æ±‚ï¼šé“¾æ¥åªèƒ½æ›´æ”¹ URLï¼Œè€Œè¡¨å•è¿˜å¯ä»¥æ›´æ”¹è¯·æ±‚æ–¹æ³•ï¼ˆGET ä¸ POSTï¼‰å’Œè¯·æ±‚æ­£æ–‡ï¼ˆPOST è¡¨å•æ•°æ®ï¼‰ã€‚</p> <p>å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è·¯ç”±ï¼Œæµè§ˆå™¨å°†è‡ªåŠ¨åºåˆ—åŒ–è¡¨å•æ•°æ®å¹¶å°†å…¶ä½œä¸º POST çš„è¯·æ±‚ä¸»ä½“å’Œ GET çš„ URLSearchParams å‘é€åˆ°æœåŠ¡å™¨ã€‚React Router åšåŒæ ·çš„äº‹æƒ…ï¼Œé™¤äº†å®ƒä¸æ˜¯å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨ï¼Œè€Œæ˜¯ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±å¹¶å°†å…¶å‘é€åˆ° route <a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer"><code>action</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡å•å‡»åº”ç”¨ç¨‹åºä¸­çš„â€œæ–°å»ºâ€æŒ‰é’®æ¥å¯¹æ­¤è¿›è¡Œæµ‹è¯•ã€‚è¯¥åº”ç”¨ç¨‹åºåº”è¯¥ä¼šå´©æºƒï¼Œå› ä¸º Vite æœåŠ¡å™¨æœªé…ç½®ä¸ºå¤„ç† POST è¯·æ±‚ï¼ˆå®ƒå‘é€ 404ï¼Œå°½ç®¡å®ƒå¯èƒ½åº”è¯¥æ˜¯ 405 ğŸ¤·ï¼‰ã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/07.webp" alt="img"></p> <p>ä¸å…¶å°† POST å‘é€åˆ° Vite æœåŠ¡å™¨ä»¥åˆ›å»ºæ–°è”ç³»äººï¼Œä¸å¦‚ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±ã€‚</p> <h2 id="åˆ›å»ºè”ç³»äºº"><a href="#åˆ›å»ºè”ç³»äºº" class="header-anchor">#</a> åˆ›å»ºè”ç³»äºº</h2> <p>æˆ‘ä»¬å°†é€šè¿‡<code>action</code>åœ¨æˆ‘ä»¬çš„æ ¹è·¯ç”±ä¸­å¯¼å‡º an æ¥åˆ›å»ºæ–°çš„è”ç³»äººï¼Œå°†å…¶è¿æ¥åˆ°è·¯ç”±é…ç½®ï¼Œå¹¶å°†æˆ‘ä»¬çš„æ›´æ”¹<code>&lt;form&gt;</code>ä¸º React Router <a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºåŠ¨ä½œå¹¶æ›´æ”¹<code>&lt;form&gt;</code>ä¸º<code>&lt;Form&gt;</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts<span class="token punctuation">,</span> createContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contact <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* other code */</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>å¯¼å…¥å¹¶è®¾ç½®è·¯ç”±ä¸Šçš„åŠ¨ä½œ</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* other imports */</span>

<span class="token keyword">import</span> Root<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> rootLoader<span class="token punctuation">,</span>
  action <span class="token keyword">as</span> rootAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å°±æ˜¯è¿™æ ·ï¼ç»§ç»­å¹¶å•å‡»â€œæ–°å»ºâ€æŒ‰é’®ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸€æ¡æ–°è®°å½•å¼¹å‡ºåˆ°åˆ—è¡¨ä¸­ğŸ¥³</p> <p><img src="https://reactrouter.com/_docs/tutorial/08.webp" alt="img"></p> <p>è¯¥<code>createContact</code>æ–¹æ³•åªæ˜¯åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åç§°æˆ–æ•°æ®æˆ–ä»»ä½•ä¸œè¥¿çš„ç©ºè”ç³»äººã€‚ä½†å®ƒä»ç„¶åˆ›é€ äº†ä¸€ä¸ªè®°å½•ï¼Œä¿è¯ï¼</p> <blockquote><p>ğŸ§ ç­‰ç­‰â€¦â€¦ä¾§è¾¹æ æ€ä¹ˆæ›´æ–°çš„ï¼Ÿæˆ‘ä»¬åœ¨å“ªé‡Œæ‰“ç”µè¯<code>action</code>ï¼Ÿé‡æ–°è·å–æ•°æ®çš„ä»£ç åœ¨å“ªé‡Œï¼Ÿåœ¨å“ªé‡Œ<code>useState</code>ï¼Œ<code>onSubmit</code>å’Œ<code>useEffect</code>ï¼Ÿï¼</p></blockquote> <p>è¿™å°±æ˜¯â€œè€å¼ç½‘ç»œâ€ç¼–ç¨‹æ¨¡å‹å‡ºç°çš„åœ°æ–¹ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„ï¼Œ<a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>é˜»æ­¢æµè§ˆå™¨å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡å™¨å¹¶å°†å…¶å‘é€åˆ°æ‚¨çš„è·¯ç”±<code>action</code>ã€‚åœ¨ Web è¯­ä¹‰ä¸­ï¼ŒPOST é€šå¸¸æ„å‘³ç€æŸäº›æ•°æ®æ­£åœ¨æ›´æ”¹ã€‚æŒ‰ç…§æƒ¯ä¾‹ï¼ŒReact Router ä½¿ç”¨æ­¤ä½œä¸ºæç¤ºï¼Œåœ¨æ“ä½œå®Œæˆåè‡ªåŠ¨é‡æ–°éªŒè¯é¡µé¢ä¸Šçš„æ•°æ®ã€‚è¿™æ„å‘³ç€æ‚¨çš„æ‰€æœ‰<code>useLoaderData</code>æŒ‚é’©éƒ½ä¼šæ›´æ–°ï¼Œå¹¶ä¸” UI ä¼šè‡ªåŠ¨ä¸æ‚¨çš„æ•°æ®ä¿æŒåŒæ­¥ï¼å¾ˆé…·ã€‚</p> <h2 id="åŠ è½½ç¨‹åºä¸­çš„-url-å‚æ•°"><a href="#åŠ è½½ç¨‹åºä¸­çš„-url-å‚æ•°" class="header-anchor">#</a> åŠ è½½ç¨‹åºä¸­çš„ URL å‚æ•°</h2> <p>æˆ‘ä»¬åº”è¯¥å†æ¬¡çœ‹åˆ°æˆ‘ä»¬æ—§çš„é™æ€è”ç³»é¡µé¢ï¼Œä½†æœ‰ä¸€ä¸ªä¸åŒï¼šURL ç°åœ¨æœ‰ä¸€ä¸ªçœŸå®çš„ ID ç”¨äºè®°å½•ã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/09.webp" alt="img"></p> <p>æŸ¥çœ‹è·¯ç”±é…ç½®ï¼Œè·¯ç”±å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯·æ³¨æ„<code>:contactId</code>URL æ®µã€‚å†’å· ( <code>:</code>) å…·æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå°†å…¶å˜æˆâ€œåŠ¨æ€æ®µâ€ã€‚åŠ¨æ€æ®µå°†åŒ¹é… URL ä¸­è¯¥ä½ç½®çš„åŠ¨æ€ï¼ˆå˜åŒ–çš„ï¼‰å€¼ï¼Œä¾‹å¦‚è”ç³»äºº IDã€‚æˆ‘ä»¬å°† URL ä¸­çš„è¿™äº›å€¼ç§°ä¸ºâ€œURL å‚æ•°â€ï¼Œæˆ–ç®€ç§°ä¸ºâ€œå‚æ•°â€ã€‚</p> <p>è¿™äº›<a href="https://reactrouter.com/en/main/route/loader#params" target="_blank" rel="noopener noreferrer"><code>params</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä½¿ç”¨ä¸åŠ¨æ€æ®µåŒ¹é…çš„é”®ä¼ é€’ç»™åŠ è½½ç¨‹åºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„æ®µå·²å‘½å<code>:contactId</code>ï¼Œå› æ­¤å€¼å°†ä½œä¸º<code>params.contactId</code>.</p> <p>è¿™äº›å‚æ•°æœ€å¸¸ç”¨äºæŒ‰ ID æŸ¥æ‰¾è®°å½•ã€‚è®©æˆ‘ä»¬è¯•è¯•çœ‹ã€‚</p> <p>ğŸ‘‰<strong>å°†åŠ è½½ç¨‹åºæ·»åŠ åˆ°è”ç³»äººé¡µé¢å¹¶è®¿é—®æ•°æ®<code>useLoaderData</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> useLoaderData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>åœ¨è·¯ç”±ä¸Šé…ç½®loader</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> Contact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> contactLoader<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/contact&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/10.webp" alt="img"></p> <h2 id="æ›´æ–°æ•°æ®"><a href="#æ›´æ–°æ•°æ®" class="header-anchor">#</a> æ›´æ–°æ•°æ®</h2> <p>å°±åƒåˆ›å»ºæ•°æ®ä¸€æ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ æ›´æ–°æ•°æ®<a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚è®©æˆ‘ä»¬åœ¨ å¤„åˆ›å»ºä¸€æ¡æ–°è·¯çº¿<code>contacts/:contactId/edit</code>ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å°†ä»ç»„ä»¶å¼€å§‹ï¼Œç„¶åå°†å…¶è¿æ¥åˆ°è·¯ç”±é…ç½®ã€‚</p> <p><strong>åˆ›å»ºç¼–è¾‘ç»„ä»¶</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/edit.jsx
</code></pre></div><p>ğŸ‘‰<strong>æ·»åŠ ç¼–è¾‘é¡µé¢UI</strong></p> <p>æ²¡æœ‰æˆ‘ä»¬ä»¥å‰æ²¡è§è¿‡çš„ï¼Œéšæ„å¤åˆ¶/ç²˜è´´ï¼š</p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> useLoaderData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">EditContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;contact-form&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;First&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;First name&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;first&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;Last&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Last name&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;last&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Twitter<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;twitter&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;@jack&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Avatar <span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;https://example.com/avatar.jpg&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Avatar URL&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;avatar&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Notes<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>textarea
          name<span class="token operator">=</span><span class="token string">&quot;notes&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes<span class="token punctuation">}</span>
          rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Save<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span><span class="token operator">&gt;</span>Cancel<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>æ·»åŠ æ–°çš„ç¼–è¾‘è·¯çº¿</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> EditContact <span class="token keyword">from</span> <span class="token string">&quot;./routes/edit&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/edit&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>æˆ‘ä»¬å¸Œæœ›å®ƒåœ¨æ ¹è·¯ç”±çš„å‡ºå£ä¸­å‘ˆç°ï¼Œå› æ­¤æˆ‘ä»¬å°†å®ƒè®¾ä¸ºç°æœ‰å­è·¯ç”±çš„åŒçº§ã€‚</p> <p>ï¼ˆä½ å¯èƒ½æ³¨æ„åˆ°æˆ‘ä»¬<code>contactLoader</code>ä¸ºè¿™ä¸ªè·¯ç”±é‡ç”¨äº†ã€‚è¿™åªæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ•™ç¨‹ä¸­å¾ˆæ‡’ã€‚æ²¡æœ‰ç†ç”±å°è¯•åœ¨è·¯ç”±ä¹‹é—´å…±äº«åŠ è½½å™¨ï¼Œå®ƒä»¬é€šå¸¸æœ‰è‡ªå·±çš„ã€‚ï¼‰</p> <p>å¥½å§ï¼Œç‚¹å‡»â€œç¼–è¾‘â€æŒ‰é’®ç»™æˆ‘ä»¬è¿™ä¸ªæ–°çš„ç”¨æˆ·ç•Œé¢ï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/11.webp" alt="img"></p> <h2 id="ä½¿ç”¨-formdata-æ›´æ–°è”ç³»äºº"><a href="#ä½¿ç”¨-formdata-æ›´æ–°è”ç³»äºº" class="header-anchor">#</a> ä½¿ç”¨ FormData æ›´æ–°è”ç³»äºº</h2> <p>æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„ç¼–è¾‘è·¯ç”±å·²ç»æ¸²æŸ“äº†ä¸€ä¸ªè¡¨å•ã€‚æ›´æ–°è®°å½•æ‰€éœ€è¦åšçš„å°±æ˜¯å°†ä¸€ä¸ªåŠ¨ä½œè¿æ¥åˆ°è·¯ç”±ã€‚è¡¨å•å°†å‘å¸ƒåˆ°æ“ä½œä¸­ï¼Œæ•°æ®å°†è‡ªåŠ¨é‡æ–°éªŒè¯ã€‚</p> <p>ğŸ‘‰<strong>ä¸ºç¼–è¾‘æ¨¡å—æ·»åŠ ä¸€ä¸ªåŠ¨ä½œ</strong></p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> updateContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> updates<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>contactId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>ğŸ‘‰<strong>å°†åŠ¨ä½œè¿æ¥åˆ°è·¯çº¿</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> EditContact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  action <span class="token keyword">as</span> editAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/edit&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/edit&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> editAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>å¡«å†™è¡¨æ ¼ï¼Œç‚¹å‡»ä¿å­˜ï¼Œä½ åº”è¯¥ä¼šçœ‹åˆ°è¿™æ ·çš„ä¸œè¥¿ï¼ï¼ˆé™¤äº†çœ¼ç›æ›´å®¹æ˜“ï¼Œæ¯›å‘å¯èƒ½æ›´å°‘ã€‚ï¼‰</p> <p><img src="https://reactrouter.com/_docs/tutorial/12.webp" alt="img"></p> <h2 id="çªå˜è®¨è®º"><a href="#çªå˜è®¨è®º" class="header-anchor">#</a> çªå˜è®¨è®º</h2> <blockquote><p>ğŸ˜‘ å®ƒæœ‰æ•ˆï¼Œä½†æˆ‘ä¸çŸ¥é“è¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆ......</p></blockquote> <p>è®©æˆ‘ä»¬æ·±å…¥æŒ–æ˜ä¸€ä¸‹......</p> <p>æ‰“å¼€<code>src/routes/edit.jsx</code>å¹¶æŸ¥çœ‹è¡¨å•å…ƒç´ ã€‚æ³¨æ„ä»–ä»¬æ¯ä¸ªäººå¦‚ä½•æœ‰ä¸€ä¸ªåå­—ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input
  placeholder<span class="token operator">=</span><span class="token string">&quot;First&quot;</span>
  aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;First name&quot;</span>
  type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
  name<span class="token operator">=</span><span class="token string">&quot;first&quot;</span>
  defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>å¦‚æœæ²¡æœ‰ JavaScriptï¼Œå½“è¡¨å•è¢«æäº¤æ—¶ï¼Œæµè§ˆå™¨ä¼šåœ¨å°†è¡¨å•<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å‘é€åˆ°æœåŠ¡å™¨æ—¶å°†å…¶åˆ›å»ºå¹¶è®¾ç½®ä¸ºè¯·æ±‚çš„ä¸»ä½“ã€‚å¦‚å‰æ‰€è¿°ï¼ŒReact Router ä¼šé˜»æ­¢è¿™ç§æƒ…å†µå¹¶å°†è¯·æ±‚å‘é€åˆ°æ‚¨çš„æ“ä½œï¼ŒåŒ…æ‹¬<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>è¡¨å•ä¸­çš„æ¯ä¸ªå­—æ®µéƒ½å¯ä»¥ä½¿ç”¨ è®¿é—®<code>formData.get(name)</code>ã€‚ä¾‹å¦‚ï¼Œç»™å®šä¸Šé¢çš„è¾“å…¥å­—æ®µï¼Œæ‚¨å¯ä»¥åƒè¿™æ ·è®¿é—®åå­—å’Œå§“æ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> firstName <span class="token operator">=</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> lastName <span class="token operator">=</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;last&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç”±äºæˆ‘ä»¬æœ‰ä¸€äº›è¡¨å•å­—æ®µï¼Œæˆ‘ä»¬è¿‡å»å¸¸å¸¸<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer"><code>Object.fromEntries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å°†å®ƒä»¬å…¨éƒ¨æ”¶é›†åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬çš„<code>updateContact</code>å‡½æ•°æ‰€éœ€è¦çš„ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
updates<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token comment">// &quot;Some&quot;</span>
updates<span class="token punctuation">.</span>last<span class="token punctuation">;</span> <span class="token comment">// &quot;Name&quot;</span>
</code></pre></div><p>é™¤äº†<code>action</code>ï¼Œæˆ‘ä»¬è®¨è®ºçš„è¿™äº› API éƒ½ä¸æ˜¯ React Router æä¾›çš„ï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/formData" target="_blank" rel="noopener noreferrer"><code>request.formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer"><code>Object.fromEntries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>éƒ½æ˜¯ç”±ç½‘ç»œå¹³å°æä¾›çš„ã€‚</p> <p>å®Œæˆæ“ä½œåï¼Œè¯·æ³¨æ„<a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer"><code>redirect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æœ€åï¼š</p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> updates<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>contactId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åŠ è½½ç¨‹åºå’Œæ“ä½œéƒ½å¯ä»¥<a href="https://reactrouter.com/en/main/route/loader#returning-responses" target="_blank" rel="noopener noreferrer">è¿”å›ä¸€ä¸ª<code>Response</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ˆæœ‰é“ç†ï¼Œå› ä¸ºå®ƒä»¬æ”¶åˆ°äº†ä¸€ä¸ª<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>Request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ï¼‰ã€‚<a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer"><code>redirect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>åŠ©æ‰‹åªæ˜¯è®©è¿”å›å‘Šè¯‰åº”ç”¨æ›´æ”¹ä½ç½®çš„<a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer">å“åº”å˜å¾—æ›´å®¹æ˜“ã€‚<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>å¦‚æœæ²¡æœ‰å®¢æˆ·ç«¯è·¯ç”±ï¼Œå¦‚æœæœåŠ¡å™¨åœ¨ POST è¯·æ±‚åé‡å®šå‘ï¼Œæ–°é¡µé¢å°†è·å–æœ€æ–°æ•°æ®å¹¶å‘ˆç°ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰äº†è§£åˆ°çš„ï¼ŒReact Router æ¨¡æ‹Ÿæ­¤æ¨¡å‹å¹¶åœ¨æ“ä½œåè‡ªåŠ¨é‡æ–°éªŒè¯é¡µé¢ä¸Šçš„æ•°æ®ã€‚è¿™å°±æ˜¯å½“æˆ‘ä»¬ä¿å­˜è¡¨å•æ—¶ä¾§è¾¹æ ä¼šè‡ªåŠ¨æ›´æ–°çš„åŸå› ã€‚æ²¡æœ‰å®¢æˆ·ç«¯è·¯ç”±ï¼Œé¢å¤–çš„é‡æ–°éªŒè¯ä»£ç ä¸å­˜åœ¨ï¼Œå› æ­¤å®¢æˆ·ç«¯è·¯ç”±ä¹Ÿä¸éœ€è¦å­˜åœ¨ï¼</p> <h2 id="å°†æ–°è®°å½•é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢"><a href="#å°†æ–°è®°å½•é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢" class="header-anchor">#</a> å°†æ–°è®°å½•é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢</h2> <p>ç°åœ¨æˆ‘ä»¬çŸ¥é“å¦‚ä½•é‡å®šå‘ï¼Œè®©æˆ‘ä»¬æ›´æ–°åˆ›å»ºæ–°è”ç³»äººçš„æ“ä½œä»¥é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢ï¼š</p> <p>ğŸ‘‰<strong>é‡å®šå‘åˆ°æ–°è®°å½•çš„ç¼–è¾‘é¡µé¢</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts<span class="token punctuation">,</span> createContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/edit</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨å½“æˆ‘ä»¬ç‚¹å‡»â€œæ–°å»ºâ€æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šåœ¨ç¼–è¾‘é¡µé¢ç»“æŸï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/13.webp" alt="img"></p> <p>ğŸ‘‰<strong>æ·»åŠ å°‘é‡è®°å½•</strong></p> <p>æˆ‘å°†ä½¿ç”¨ç¬¬ä¸€å±Š Remix Conference çš„ä¸€æµæ¼”è®²è€…é˜µå®¹ğŸ˜</p> <p><img src="https://reactrouter.com/_docs/tutorial/14.webp" alt="img"></p> <h2 id="æ´»åŠ¨é“¾æ¥æ ·å¼"><a href="#æ´»åŠ¨é“¾æ¥æ ·å¼" class="header-anchor">#</a> æ´»åŠ¨é“¾æ¥æ ·å¼</h2> <p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€å †è®°å½•ï¼Œä¸æ¸…æ¥šæˆ‘ä»¬åœ¨ä¾§è¾¹æ ä¸­æŸ¥çœ‹çš„æ˜¯å“ªä¸€ä¸ªã€‚æˆ‘ä»¬å¯ä»¥<a href="https://reactrouter.com/en/main/components/nav-link" target="_blank" rel="noopener noreferrer"><code>NavLink</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p> <p>ğŸ‘‰<strong>åœ¨ä¾§è¾¹æ ä¸­****ä½¿ç”¨ a<code>NavLink</code></strong></p> <p><code>src/rootes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  NavLink<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">contact</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>NavLink
                    to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
                    className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isActive<span class="token punctuation">,</span> isPending <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                      isActive
                        <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span>
                        <span class="token operator">:</span> isPending
                        <span class="token operator">?</span> <span class="token string">&quot;pending&quot;</span>
                        <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
                    <span class="token punctuation">}</span>
                  <span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ­£åœ¨å°†ä¸€ä¸ªå‡½æ•°ä¼ é€’ç»™<code>className</code>. å½“ç”¨æˆ·ä½äº ä¸­çš„ URL æ—¶ï¼Œåˆ™ä¸º<code>NavLink</code>çœŸ<code>isActive</code>ã€‚å½“å®ƒ<em>å³å°†</em>å¤„äºæ´»åŠ¨çŠ¶æ€ï¼ˆæ•°æ®ä»åœ¨åŠ è½½ï¼‰æ—¶ï¼Œåˆ™ä¸º<code>isPending</code>çœŸã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾åœ°æŒ‡ç¤ºç”¨æˆ·æ‰€åœ¨çš„ä½ç½®ï¼Œå¹¶å¯¹å·²å•å‡»ä½†æˆ‘ä»¬ä»åœ¨ç­‰å¾…æ•°æ®åŠ è½½çš„é“¾æ¥æä¾›å³æ—¶åé¦ˆã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/15.webp" alt="img"></p> <h2 id="å…¨å±€å¾…å®šç”¨æˆ·ç•Œé¢"><a href="#å…¨å±€å¾…å®šç”¨æˆ·ç•Œé¢" class="header-anchor">#</a> å…¨å±€å¾…å®šç”¨æˆ·ç•Œé¢</h2> <p>å½“ç”¨æˆ·æµè§ˆåº”ç”¨ç¨‹åºæ—¶ï¼ŒReact Router å°†åœ¨ä¸ºä¸‹ä¸€é¡µåŠ è½½æ•°æ®æ—¶*ä¿ç•™æ—§é¡µé¢ã€‚*æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œå½“æ‚¨åœ¨åˆ—è¡¨ä¹‹é—´å•å‡»æ—¶ï¼Œè¯¥åº”ç”¨æ„Ÿè§‰æœ‰ç‚¹ååº”è¿Ÿé’ã€‚è®©æˆ‘ä»¬ä¸ºç”¨æˆ·æä¾›ä¸€äº›åé¦ˆï¼Œè¿™æ ·åº”ç”¨ç¨‹åºå°±ä¸ä¼šæ„Ÿè§‰ååº”è¿Ÿé’ã€‚</p> <p>React Router åœ¨å¹•åç®¡ç†æ‰€æœ‰çŠ¶æ€ï¼Œå¹¶æ­ç¤ºæ„å»ºåŠ¨æ€ Web åº”ç”¨ç¨‹åºæ‰€éœ€çš„éƒ¨åˆ†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>é’©å­ã€‚</p> <p>ğŸ‘‰**<code>useNavigation</code>æ·»åŠ å…¨å±€æŒ‚èµ·çš„ UI**</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
  useNavigation<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div
        id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span>
        className<span class="token operator">=</span><span class="token punctuation">{</span>
          navigation<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>è¿”å›å½“å‰å¯¼èˆªçŠ¶æ€ï¼šå®ƒå¯ä»¥æ˜¯<code>&quot;idle&quot; | &quot;submitting&quot; | &quot;loading&quot;</code>.</p> <p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ<code>&quot;loading&quot;</code>å¦‚æœæˆ‘ä»¬ä¸ç©ºé—²ï¼Œæˆ‘ä»¬ä¼šå‘åº”ç”¨ç¨‹åºçš„ä¸»è¦éƒ¨åˆ†æ·»åŠ ä¸€ä¸ªç±»ã€‚ç„¶å CSS åœ¨çŸ­æš‚çš„å»¶è¿Ÿåæ·»åŠ ä¸€ä¸ªæ¼‚äº®çš„æ·¡å…¥æ·¡å‡ºï¼ˆä»¥é¿å…é—ªçƒ UI ä»¥è¿›è¡Œå¿«é€ŸåŠ è½½ï¼‰ã€‚ä¸è¿‡ä½ å¯ä»¥åšä»»ä½•ä½ æƒ³åšçš„äº‹ï¼Œæ¯”å¦‚åœ¨é¡¶éƒ¨æ˜¾ç¤ºä¸€ä¸ªå¾®è°ƒå™¨æˆ–åŠ è½½æ ã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/16.webp" alt="img"></p> <p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„æ•°æ®æ¨¡å‹ ( <code>src/contact.js</code>) å…·æœ‰å®¢æˆ·ç«¯ç¼“å­˜ï¼Œå› æ­¤ç¬¬äºŒæ¬¡å¯¼èˆªåˆ°åŒä¸€è”ç³»äººçš„é€Ÿåº¦å¾ˆå¿«ã€‚è¿™ç§è¡Œä¸º<em>ä¸æ˜¯</em>React Routerï¼Œå®ƒä¼šé‡æ–°åŠ è½½æ›´æ”¹è·¯ç”±çš„æ•°æ®ï¼Œæ— è®ºæ‚¨ä»¥å‰æ˜¯å¦å»è¿‡é‚£é‡Œã€‚ä½†æ˜¯ï¼Œå®ƒç¡®å®é¿å…åœ¨å¯¼èˆªæœŸé—´ä¸º<em>ä¸å˜çš„è·¯çº¿ï¼ˆå¦‚åˆ—è¡¨ï¼‰è°ƒç”¨åŠ è½½å™¨ã€‚</em></p> <h2 id="åˆ é™¤è®°å½•"><a href="#åˆ é™¤è®°å½•" class="header-anchor">#</a> åˆ é™¤è®°å½•</h2> <p>å¦‚æœæˆ‘ä»¬æŸ¥çœ‹è”ç³»äººè·¯ç”±ä¸­çš„ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°åˆ é™¤æŒ‰é’®å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Form
  method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span>
  action<span class="token operator">=</span><span class="token string">&quot;destroy&quot;</span>
  onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Please confirm you want to delete this record.&quot;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
</code></pre></div><p>æ³¨æ„<code>action</code>è¦ç‚¹<code>&quot;destroy&quot;</code>ã€‚åƒ<code>&lt;Link to&gt;</code>ï¼Œ<code>&lt;Form action&gt;</code>å¯ä»¥å–ä¸€ä¸ª<em>ç›¸å¯¹</em>å€¼ã€‚ç”±äºè¡¨å•æ˜¯åœ¨ ä¸­å‘ˆç°çš„<code>contact/:contactId</code>ï¼Œå› æ­¤ç›¸å…³æ“ä½œ<code>destroy</code>å°†<code>contact/:contactId/destroy</code>åœ¨å•å‡»æ—¶æäº¤è¡¨å•ã€‚</p> <p>æ­¤æ—¶æ‚¨åº”è¯¥çŸ¥é“ä½¿åˆ é™¤æŒ‰é’®èµ·ä½œç”¨æ‰€éœ€çŸ¥é“çš„ä¸€åˆ‡ã€‚ä¹Ÿè®¸åœ¨ç»§ç»­ä¹‹å‰è¯•ä¸€è¯•ï¼Ÿä½ éœ€è¦ï¼š</p> <ol><li>ä¸€æ¡æ–°è·¯çº¿</li> <li>åœ¨<code>action</code>é‚£æ¡è·¯çº¿ä¸Š</li> <li><code>deleteContact</code>ä»<code>src/contacts.js</code></li></ol> <p>ğŸ‘‰<strong>åˆ›å»ºâ€œdestroyâ€è·¯ç”±æ¨¡å—</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/destroy.jsx
</code></pre></div><p>ğŸ‘‰<strong>æ·»åŠ é”€æ¯åŠ¨ä½œ</strong></p> <p><code>src/routes/destory.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> deleteContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>å°† destroy è·¯ç”±æ·»åŠ åˆ°è·¯ç”±é…ç½®ä¸­</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token keyword">as</span> destroyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/destroy&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">/* existing root route props */</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">/* existing routes */</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/destroy&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> destroyAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>å¥½çš„ï¼Œå¯¼èˆªåˆ°è®°å½•å¹¶å•å‡»â€œåˆ é™¤â€æŒ‰é’®ã€‚æœ‰ç”¨ï¼</p> <blockquote><p>ğŸ˜€ æˆ‘ä»ç„¶å¾ˆå›°æƒ‘ä¸ºä»€ä¹ˆè¿™ä¸€åˆ‡éƒ½æœ‰æ•ˆ</p></blockquote> <p>å½“ç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®æ—¶ï¼š</p> <ol><li><code>&lt;Form&gt;</code>é˜»æ­¢å‘æœåŠ¡å™¨å‘é€æ–° POST è¯·æ±‚çš„é»˜è®¤æµè§ˆå™¨è¡Œä¸ºï¼Œè€Œæ˜¯é€šè¿‡åˆ›å»ºå¸¦æœ‰å®¢æˆ·ç«¯è·¯ç”±çš„ POST è¯·æ±‚æ¥æ¨¡æ‹Ÿæµè§ˆå™¨</li> <li><code>&lt;Form action=&quot;destroy&quot;&gt;</code>åŒ¹é…æ–°è·¯ç”±å¹¶å‘å…¶<code>&quot;contacts/:contactId/destroy&quot;</code>å‘é€è¯·æ±‚</li> <li>åŠ¨ä½œé‡å®šå‘åï¼ŒReact Router è°ƒç”¨é¡µé¢ä¸Šæ•°æ®çš„æ‰€æœ‰åŠ è½½å™¨ä»¥è·å–æœ€æ–°å€¼ï¼ˆè¿™å°±æ˜¯â€œé‡æ–°éªŒè¯â€ï¼‰ã€‚<code>useLoaderData</code>è¿”å›æ–°å€¼å¹¶å¯¼è‡´ç»„ä»¶æ›´æ–°ï¼</li></ol> <p>æ·»åŠ ä¸€ä¸ªè¡¨å•ï¼Œæ·»åŠ ä¸€ä¸ªåŠ¨ä½œï¼ŒReact Router ä¼šå®Œæˆå‰©ä¸‹çš„å·¥ä½œã€‚</p> <h2 id="ä¸Šä¸‹æ–‡é”™è¯¯"><a href="#ä¸Šä¸‹æ–‡é”™è¯¯" class="header-anchor">#</a> ä¸Šä¸‹æ–‡é”™è¯¯</h2> <p>åªæ˜¯ä¸ºäº†å¥½ç©ï¼Œåœ¨é”€æ¯æ“ä½œä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼š</p> <p><code>src/routes/destory.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;oh dang!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/17.webp" alt="img"></p> <p>è®¤å¾—é‚£ä¸ªå±å¹•å—ï¼Ÿæ˜¯æˆ‘ä»¬<a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä»¥å‰çš„ ç„¶è€Œï¼Œç”¨æˆ·é™¤äº†ç‚¹å‡»åˆ·æ–°ä¹‹å¤–ï¼Œå®é™…ä¸Šæ— æ³•åšä»»ä½•äº‹æƒ…æ¥ä»è¯¥å±å¹•æ¢å¤ã€‚</p> <p>è®©æˆ‘ä»¬ä¸º destroy è·¯ç”±åˆ›å»ºä¸Šä¸‹æ–‡é”™è¯¯æ¶ˆæ¯ï¼š</p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>
  <span class="token comment">/* other routes */</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/destroy&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> destroyAction<span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Oops<span class="token operator">!</span> There was an error<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>ç°åœ¨å†è¯•ä¸€æ¬¡ï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/18.webp" alt="img"></p> <p>æˆ‘ä»¬çš„ç”¨æˆ·ç°åœ¨æœ‰æ›´å¤šé€‰æ‹©ï¼Œè€Œä¸æ˜¯çŒ›çƒˆåˆ·æ–°ï¼Œä»–ä»¬å¯ä»¥ç»§ç»­ä¸é¡µé¢ä¸Šæ²¡æœ‰é—®é¢˜çš„éƒ¨åˆ†è¿›è¡Œäº¤äº’ğŸ™Œ</p> <p>å› ä¸º destroy è·¯ç”±æœ‰è‡ªå·±çš„è·¯ç”±<code>errorElement</code>å¹¶ä¸”æ˜¯æ ¹è·¯ç”±çš„å­è·¯ç”±ï¼Œæ‰€ä»¥é”™è¯¯å°†å‘ˆç°åœ¨é‚£é‡Œè€Œä¸æ˜¯æ ¹è·¯ç”±ã€‚æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œè¿™äº›é”™è¯¯å†’æ³¡åˆ°æœ€è¿‘çš„<code>errorElement</code>. åªè¦æ‚¨åœ¨æ ¹éƒ¨æœ‰ä¸€ä¸ªï¼Œå°±å¯ä»¥æ·»åŠ ä»»æ„å¤šçš„æˆ–å°‘çš„ã€‚</p> <h2 id="ç´¢å¼•è·¯çº¿"><a href="#ç´¢å¼•è·¯çº¿" class="header-anchor">#</a> ç´¢å¼•è·¯çº¿</h2> <p>å½“æˆ‘ä»¬åŠ è½½åº”ç”¨ç¨‹åºæ—¶ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°åˆ—è¡¨å³ä¾§æœ‰ä¸€ä¸ªå¾ˆå¤§çš„ç©ºç™½é¡µã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/19.webp" alt="img"></p> <p>å½“ä¸€æ¡è·¯çº¿æœ‰å­©å­ï¼Œè€Œä½ åœ¨çˆ¶è·¯çº¿çš„è·¯å¾„ä¸Šæ—¶ï¼Œ<code>&lt;Outlet&gt;</code>æ²¡æœ‰ä»»ä½•ä¸œè¥¿å¯ä»¥æ¸²æŸ“ï¼Œå› ä¸ºæ²¡æœ‰å­©å­åŒ¹é…ã€‚æ‚¨å¯ä»¥å°†ç´¢å¼•è·¯ç”±è§†ä¸ºå¡«å……è¯¥ç©ºé—´çš„é»˜è®¤å­è·¯ç”±ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºç´¢å¼•è·¯ç”±æ¨¡å—</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/index.jsx
</code></pre></div><p>ğŸ‘‰<strong>å¡«å†™ç´¢å¼•ç»„ä»¶çš„å…ƒç´ </strong></p> <p>éšæ„å¤åˆ¶ç²˜è´´ï¼Œè¿™é‡Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚</p> <p><code>src/routes/index.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;zero-state&quot;</span><span class="token operator">&gt;</span>
      This is a demo <span class="token keyword">for</span> React Router<span class="token punctuation">.</span>
      <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
      Check out<span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;https://reactrouter.com&quot;</span><span class="token operator">&gt;</span>
        the docs at reactrouter<span class="token punctuation">.</span>com
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ‘‰<strong>é…ç½®ç´¢å¼•è·¯ç”±</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">&quot;./routes/index&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/* existing routes */</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¯·æ³¨æ„<a href="https://reactrouter.com/en/main/route/route#index" target="_blank" rel="noopener noreferrer"><code>{ index:true }</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>è€Œä¸æ˜¯<a href="https://reactrouter.com/en/main/route/route#path" target="_blank" rel="noopener noreferrer"><code>{ path: &quot;&quot; }</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚è¿™å‘Šè¯‰è·¯ç”±å™¨åœ¨ç”¨æˆ·ä½äºçˆ¶è·¯ç”±çš„ç¡®åˆ‡è·¯å¾„æ—¶åŒ¹é…å¹¶å‘ˆç°æ­¤è·¯ç”±ï¼Œå› æ­¤åœ¨<code>&lt;Outlet&gt;</code>.</p> <p><img src="https://reactrouter.com/_docs/tutorial/20.webp" alt="img"></p> <p>ç§ï¼æ²¡æœ‰æ›´å¤šçš„ç©ºç™½ã€‚å°†ä»ªè¡¨æ¿ã€ç»Ÿè®¡ä¿¡æ¯ã€æè¦ç­‰æ”¾åœ¨ç´¢å¼•è·¯ç”±ä¸­æ˜¯å¾ˆå¸¸è§çš„ã€‚ä»–ä»¬ä¹Ÿå¯ä»¥å‚ä¸æ•°æ®åŠ è½½ã€‚</p> <h2 id="å–æ¶ˆæŒ‰é’®"><a href="#å–æ¶ˆæŒ‰é’®" class="header-anchor">#</a> å–æ¶ˆæŒ‰é’®</h2> <p>åœ¨ç¼–è¾‘é¡µé¢ä¸Šï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå°šæœªæ‰§è¡Œä»»ä½•æ“ä½œçš„å–æ¶ˆæŒ‰é’®ã€‚æˆ‘ä»¬å¸Œæœ›å®ƒåšä¸æµè§ˆå™¨çš„åé€€æŒ‰é’®ç›¸åŒçš„äº‹æƒ…ã€‚</p> <p>æˆ‘ä»¬éœ€è¦åœ¨æŒ‰é’®ä¸Šä»¥åŠ<a href="https://reactrouter.com/en/main/hooks/use-navigate" target="_blank" rel="noopener noreferrer"><code>useNavigate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>æ¥è‡ª React Router çš„ç‚¹å‡»å¤„ç†ç¨‹åºã€‚</p> <p>ğŸ‘‰<strong>æ·»åŠ å–æ¶ˆæŒ‰é’®å•å‡»å¤„ç†ç¨‹åº<code>useNavigate</code></strong></p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
  useNavigate<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;contact-form&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Save<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button
          type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          Cancel
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨ï¼Œå½“ç”¨æˆ·å•å‡»â€œå–æ¶ˆâ€æ—¶ï¼Œä»–ä»¬å°†åœ¨æµè§ˆå™¨å†å²è®°å½•ä¸­è¿”å›ä¸€ä¸ªæ¡ç›®ã€‚</p> <blockquote><p>ğŸ§ ä¸ºä»€ä¹ˆæŒ‰é’®ä¸Šæ²¡æœ‰<code>event.preventDefault</code>ï¼Ÿ</p></blockquote> <p>A <code>&lt;button type=&quot;button&quot;&gt;</code>ï¼Œè™½ç„¶çœ‹ä¼¼å¤šä½™ï¼Œå´æ˜¯é˜²æ­¢æŒ‰é’®æäº¤å…¶è¡¨å•çš„ HTML æ–¹å¼ã€‚</p> <p>è¿˜æœ‰ä¸¤ä¸ªåŠŸèƒ½ã€‚æˆ‘ä»¬åœ¨æœ€åé˜¶æ®µï¼</p> <h2 id="url-æœç´¢å‚æ•°å’Œ-get-æäº¤"><a href="#url-æœç´¢å‚æ•°å’Œ-get-æäº¤" class="header-anchor">#</a> URL æœç´¢å‚æ•°å’Œ GET æäº¤</h2> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„äº¤äº’å¼ UI è¦ä¹ˆæ˜¯æ›´æ”¹ URL çš„é“¾æ¥ï¼Œè¦ä¹ˆæ˜¯å°†æ•°æ®å‘å¸ƒåˆ°æ“ä½œçš„è¡¨å•ã€‚æœç´¢å­—æ®µå¾ˆæœ‰è¶£ï¼Œå› ä¸ºå®ƒæ˜¯ä¸¤è€…çš„æ··åˆä½“ï¼šå®ƒæ˜¯ä¸€ä¸ªè¡¨å•ï¼Œä½†å®ƒåªæ›´æ”¹ URLï¼Œä¸æ›´æ”¹æ•°æ®ã€‚</p> <p>ç°åœ¨å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šçš„ HTML <code>&lt;form&gt;</code>ï¼Œè€Œä¸æ˜¯ React Router <code>&lt;Form&gt;</code>ã€‚è®©æˆ‘ä»¬çœ‹çœ‹é»˜è®¤æƒ…å†µä¸‹æµè§ˆå™¨å¯¹å®ƒåšäº†ä»€ä¹ˆï¼š</p> <p>ğŸ‘‰<strong>åœ¨æœç´¢å­—æ®µä¸­è¾“å…¥åç§°ï¼Œç„¶åæŒ‰å›è½¦é”®</strong></p> <p>è¯·æ³¨æ„æµè§ˆå™¨çš„ URL ç°åœ¨åŒ…å«æ‚¨åœ¨ URL ä¸­çš„æŸ¥è¯¢ä½œä¸º<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">URLSearchParams<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼š</p> <div class="language-sh extra-class"><pre class="language-sh"><code>http://127.0.0.1:5173/?q<span class="token operator">=</span>ryan
</code></pre></div><p>å¦‚æœæˆ‘ä»¬æŸ¥çœ‹æœç´¢è¡¨å•ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input
    id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
    aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
    placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
    type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
    name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span> aria<span class="token operator">-</span>hidden hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span> aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>æ­£å¦‚æˆ‘ä»¬ä¹‹å‰æ‰€è§ï¼Œæµè§ˆå™¨å¯ä»¥é€šè¿‡<code>name</code>è¾“å…¥å…ƒç´ çš„å±æ€§æ¥åºåˆ—åŒ–è¡¨å•ã€‚æ­¤è¾“å…¥çš„åç§°æ˜¯<code>q</code>ï¼Œè¿™å°±æ˜¯ URL å…·æœ‰ çš„åŸå› <code>?q=</code>ã€‚å¦‚æœæˆ‘ä»¬å°†å…¶å‘½åï¼Œ<code>search</code>åˆ™ URL å°†æ˜¯<code>?search=</code>.</p> <p>è¯·æ³¨æ„ï¼Œæ­¤è¡¨å•ä¸æˆ‘ä»¬ä½¿ç”¨çš„å…¶ä»–è¡¨å•ä¸åŒï¼Œå®ƒæ²¡æœ‰<code>&lt;form method=&quot;post&quot;&gt;</code>. é»˜è®¤<code>method</code>å€¼ä¸º<code>&quot;get&quot;</code>ã€‚è¿™æ„å‘³ç€å½“æµè§ˆå™¨åˆ›å»ºå¯¹ä¸‹ä¸€ä¸ªæ–‡æ¡£çš„è¯·æ±‚æ—¶ï¼Œå®ƒä¸ä¼šå°†è¡¨å•æ•°æ®æ”¾å…¥è¯·æ±‚ POST æ­£æ–‡ä¸­ï¼Œè€Œæ˜¯æ”¾å…¥<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>GET è¯·æ±‚ä¸­ã€‚</p> <h2 id="ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±è·å–æäº¤"><a href="#ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±è·å–æäº¤" class="header-anchor">#</a> ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±è·å–æäº¤</h2> <p>è®©æˆ‘ä»¬ä½¿ç”¨å®¢æˆ·ç«¯è·¯ç”±æ¥æäº¤æ­¤è¡¨å•å¹¶åœ¨æˆ‘ä»¬ç°æœ‰çš„åŠ è½½ç¨‹åºä¸­è¿‡æ»¤åˆ—è¡¨ã€‚</p> <p>ğŸ‘‰<strong>æ›´æ”¹<code>&lt;form&gt;</code>ä¸º<code>&lt;Form&gt;</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input
    id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
    aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
    placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
    type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
    name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span> aria<span class="token operator">-</span>hidden hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span> aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
</code></pre></div><p>ğŸ‘‰<strong>è¿‡æ»¤åˆ—è¡¨æ˜¯å¦æœ‰URLSearchParams</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/21.webp" alt="img"></p> <p>å› ä¸ºè¿™æ˜¯ GET è€Œä¸æ˜¯ POSTï¼ŒReact Router<em>ä¸ä¼š</em>è°ƒç”¨<code>action</code>. æäº¤ GET è¡¨å•ä¸å•å‡»é“¾æ¥ç›¸åŒï¼šåªæ˜¯ URL å‘ç”Ÿäº†å˜åŒ–ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ºè¿‡æ»¤æ·»åŠ çš„ä»£ç æ˜¯åœ¨ ä¸­<code>loader</code>ï¼Œè€Œä¸æ˜¯<code>action</code>è¿™æ¡è·¯ç”±çš„ã€‚</p> <p>è¿™ä¹Ÿæ„å‘³ç€å®ƒæ˜¯ä¸€ä¸ªæ­£å¸¸çš„é¡µé¢å¯¼èˆªã€‚æ‚¨å¯ä»¥å•å‡»åé€€æŒ‰é’®è¿”å›åˆ°æ‚¨æ‰€åœ¨çš„ä½ç½®ã€‚</p> <h2 id="å°†-url-åŒæ­¥åˆ°è¡¨å•çŠ¶æ€"><a href="#å°†-url-åŒæ­¥åˆ°è¡¨å•çŠ¶æ€" class="header-anchor">#</a> å°† URL åŒæ­¥åˆ°è¡¨å•çŠ¶æ€</h2> <p>è¿™é‡Œæœ‰å‡ ä¸ªç”¨æˆ·ä½“éªŒé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿè§£å†³ã€‚</p> <ol><li>å¦‚æœæ‚¨åœ¨æœç´¢åå•å‡»è¿”å›ï¼Œå³ä½¿åˆ—è¡¨ä¸å†è¢«è¿‡æ»¤ï¼Œè¡¨å•å­—æ®µä»å…·æœ‰æ‚¨è¾“å…¥çš„å€¼ã€‚</li> <li>å¦‚æœæ‚¨åœ¨æœç´¢ååˆ·æ–°é¡µé¢ï¼Œå³ä½¿åˆ—è¡¨è¢«è¿‡æ»¤ï¼Œè¡¨å•å­—æ®µä¸­ä¹Ÿä¸å†æœ‰å€¼</li></ol> <p>æ¢å¥è¯è¯´ï¼ŒURL å’Œæˆ‘ä»¬çš„è¡¨å•çŠ¶æ€ä¸åŒæ­¥ã€‚</p> <p>ğŸ‘‰ä»ä½ çš„åŠ è½½å™¨<strong>è¿”å›<code>q</code>å¹¶å°†å…¶è®¾ç½®ä¸ºæœç´¢å­—æ®µé»˜è®¤å€¼</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>q<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™è§£å†³äº†é—®é¢˜ï¼ˆ2ï¼‰ã€‚å¦‚æœæ‚¨ç°åœ¨åˆ·æ–°é¡µé¢ï¼Œè¾“å…¥å­—æ®µå°†æ˜¾ç¤ºæŸ¥è¯¢ã€‚</p> <p><img src="https://reactrouter.com/_docs/tutorial/21.webp" alt="img"></p> <p>ç°åœ¨å¯¹äºé—®é¢˜ (1)ï¼Œå•å‡»åé€€æŒ‰é’®å¹¶æ›´æ–°è¾“å…¥ã€‚æˆ‘ä»¬å¯ä»¥<code>useEffect</code>ä» React ä¸­å¼•å…¥ï¼Œç›´æ¥åœ¨ DOM ä¸­æ“ä½œè¡¨å•çš„çŠ¶æ€ã€‚</p> <p>ğŸ‘‰ å°†<strong>è¾“å…¥å€¼ä¸ URL æœç´¢å‚æ•°åŒæ­¥</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> q<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>ğŸ¤” ä½ ä¸åº”è¯¥ä¸ºæ­¤ä½¿ç”¨å—æ§ç»„ä»¶å’Œ React State å—ï¼Ÿ</p></blockquote> <p>æ‚¨å½“ç„¶å¯ä»¥å°†æ­¤ä½œä¸ºä¸€ä¸ªå—æ§ç»„ä»¶æ¥æ‰§è¡Œï¼Œä½†æ˜¯å¯¹äºç›¸åŒçš„è¡Œä¸ºï¼Œæ‚¨æœ€ç»ˆä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚æ‚¨ä¸æ§åˆ¶ URLï¼Œç”¨æˆ·ä½¿ç”¨åé€€/å‰è¿›æŒ‰é’®æ¥æ§åˆ¶ã€‚å—æ§ç»„ä»¶ä¼šæœ‰æ›´å¤šçš„åŒæ­¥ç‚¹ã€‚</p> <p>æ³¨æ„æ§åˆ¶è¾“å…¥ç°åœ¨éœ€è¦ä¸‰ä¸ªåŒæ­¥ç‚¹è€Œä¸æ˜¯ä¸€ä¸ªã€‚è¡Œä¸ºç›¸åŒï¼Œä½†ä»£ç æ›´å¤æ‚ã€‚</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setQuery</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              value<span class="token operator">=</span><span class="token punctuation">{</span>query<span class="token punctuation">}</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setQuery</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æäº¤è¡¨æ ¼onchange"><a href="#æäº¤è¡¨æ ¼onchange" class="header-anchor">#</a> æäº¤è¡¨æ ¼<code>onChange</code></h2> <p>æˆ‘ä»¬è¦åœ¨è¿™é‡Œåšå‡ºäº§å“å†³ç­–ã€‚å¯¹äºæ­¤ UIï¼Œæˆ‘ä»¬å¯èƒ½æ›´æ„¿æ„åœ¨æ¯æ¬¡å‡»é”®æ—¶è¿›è¡Œè¿‡æ»¤ï¼Œè€Œä¸æ˜¯åœ¨æ˜¾å¼æäº¤è¡¨å•æ—¶è¿›è¡Œè¿‡æ»¤ã€‚</p> <p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ï¼Œä¸ºæ­¤<code>useNavigate</code>æˆ‘ä»¬å°†ä½¿ç”¨å®ƒçš„è¡¨äº²ã€‚<a href="https://reactrouter.com/en/main/hooks/use-submit" target="_blank" rel="noopener noreferrer"><code>useSubmit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
  useSubmit<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> submit <span class="token operator">=</span> <span class="token function">useSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>q<span class="token punctuation">}</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">submit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç°åœ¨ï¼Œå½“æ‚¨é”®å…¥æ—¶ï¼Œè¡¨å•ä¼šè‡ªåŠ¨æäº¤ï¼</p> <p>æ³¨æ„ çš„å‚æ•°<a href="https://reactrouter.com/en/main/hooks/use-submit" target="_blank" rel="noopener noreferrer"><code>submit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚æˆ‘ä»¬è·¯è¿‡<code>event.currentTarget.form</code>ã€‚<code>currentTarget</code>æ˜¯äº‹ä»¶é™„åŠ åˆ°çš„ DOM èŠ‚ç‚¹ï¼Œæ˜¯<code>currentTarget.form</code>è¾“å…¥çš„çˆ¶è¡¨å•èŠ‚ç‚¹ã€‚è¯¥<code>submit</code>å‡½æ•°å°†åºåˆ—åŒ–å¹¶æäº¤æ‚¨ä¼ é€’ç»™å®ƒçš„ä»»ä½•è¡¨å•ã€‚</p> <h2 id="æ·»åŠ æœç´¢å¾®è°ƒå™¨"><a href="#æ·»åŠ æœç´¢å¾®è°ƒå™¨" class="header-anchor">#</a> æ·»åŠ æœç´¢å¾®è°ƒå™¨</h2> <p>åœ¨ç”Ÿäº§åº”ç”¨ç¨‹åºä¸­ï¼Œæ­¤æœç´¢å¯èƒ½ä¼šåœ¨å¤ªå¤§è€Œæ— æ³•ä¸€æ¬¡å‘é€æ‰€æœ‰å†…å®¹çš„æ•°æ®åº“ä¸­æŸ¥æ‰¾è®°å½•å¹¶è¿‡æ»¤å®¢æˆ·ç«¯ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªæ¼”ç¤ºæœ‰ä¸€äº›ä¼ªé€ çš„ç½‘ç»œå»¶è¿Ÿã€‚</p> <p>æ²¡æœ‰ä»»ä½•åŠ è½½æŒ‡ç¤ºå™¨ï¼Œæœç´¢æ„Ÿè§‰æœ‰ç‚¹è¿Ÿé’ã€‚å³ä½¿æˆ‘ä»¬å¯ä»¥ä½¿æˆ‘ä»¬çš„æ•°æ®åº“æ›´å¿«ï¼Œæˆ‘ä»¬ä¹Ÿæ€»æ˜¯ä¼šé‡åˆ°ç”¨æˆ·çš„ç½‘ç»œå»¶è¿Ÿé—®é¢˜ï¼Œå¹¶ä¸”è¶…å‡ºæˆ‘ä»¬çš„æ§åˆ¶èŒƒå›´ã€‚ä¸ºäº†è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œè®©æˆ‘ä»¬ä¸ºæœç´¢æ·»åŠ ä¸€äº›å³æ—¶ UI åé¦ˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†<a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å†æ¬¡ä½¿ç”¨ã€‚</p> <p>ğŸ‘‰<strong>æ·»åŠ æœç´¢å¾®è°ƒå™¨</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> submit <span class="token operator">=</span> <span class="token function">useSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> searching <span class="token operator">=</span>
    navigation<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>navigation<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>
      <span class="token string">&quot;q&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> q<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              className<span class="token operator">=</span><span class="token punctuation">{</span>searching <span class="token operator">?</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
              <span class="token comment">// existing code</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span>
              aria<span class="token operator">-</span>hidden
              hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span>searching<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/22.webp" alt="img"></p> <p>å½“<code>navigation.location</code>åº”ç”¨ç¨‹åºå¯¼èˆªåˆ°æ–° URL å¹¶ä¸ºå…¶åŠ è½½æ•°æ®æ—¶ï¼Œå°†æ˜¾ç¤ºã€‚å½“ä¸å†æœ‰æŒ‚èµ·çš„å¯¼èˆªæ—¶ï¼Œå®ƒå°±ä¼šæ¶ˆå¤±ã€‚</p> <h2 id="ç®¡ç†å†å²æ ˆ"><a href="#ç®¡ç†å†å²æ ˆ" class="header-anchor">#</a> ç®¡ç†å†å²æ ˆ</h2> <p>ç°åœ¨æ¯æ¬¡å‡»é”®éƒ½ä¼šæäº¤è¡¨å•ï¼Œå¦‚æœæˆ‘ä»¬è¾“å…¥å­—ç¬¦â€œsebaâ€ç„¶åç”¨é€€æ ¼é”®åˆ é™¤å®ƒä»¬ï¼Œæˆ‘ä»¬æœ€ç»ˆä¼šåœ¨å †æ ˆä¸­å¾—åˆ° 7 ä¸ªæ–°æ¡ç›® ğŸ˜‚ã€‚æˆ‘ä»¬ç»å¯¹ä¸æƒ³è¦è¿™ä¸ª</p> <p><img src="https://reactrouter.com/_docs/tutorial/23.webp" alt="img"></p> <p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ç”¨ä¸‹ä¸€é¡µ<em>æ›¿æ¢</em>å†å²å †æ ˆä¸­çš„å½“å‰æ¡ç›®æ¥é¿å…è¿™ç§æƒ…å†µï¼Œè€Œä¸æ˜¯æ¨å…¥å®ƒã€‚</p> <p>ğŸ‘‰<strong>ä½¿ç”¨<code>replace</code>äº<code>submit</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              <span class="token comment">// existing code</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> isFirstSearch <span class="token operator">=</span> q <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token function">submit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                  <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token operator">!</span>isFirstSearch<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬åªæƒ³æ›¿æ¢æœç´¢ç»“æœï¼Œè€Œä¸æ˜¯æˆ‘ä»¬å¼€å§‹æœç´¢ä¹‹å‰çš„é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿«é€Ÿæ£€æŸ¥è¿™æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æœç´¢ï¼Œç„¶åå†³å®šæ›¿æ¢ã€‚</p> <p>æ¯æ¬¡å‡»é”®ä¸å†åˆ›å»ºæ–°æ¡ç›®ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥ä»æœç´¢ç»“æœä¸­å•å‡»è¿”å›ï¼Œè€Œæ— éœ€å•å‡» 7 æ¬¡ ğŸ˜€ã€‚</p> <h2 id="æ²¡æœ‰å¯¼èˆªçš„çªå˜"><a href="#æ²¡æœ‰å¯¼èˆªçš„çªå˜" class="header-anchor">#</a> æ²¡æœ‰å¯¼èˆªçš„çªå˜</h2> <p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„çªå˜ï¼ˆæˆ‘ä»¬æ›´æ”¹æ•°æ®çš„æ—¶é—´ï¼‰éƒ½ä½¿ç”¨å¯¼èˆªçš„å½¢å¼ï¼Œåœ¨å†å²å †æ ˆä¸­åˆ›å»ºæ–°æ¡ç›®ã€‚è™½ç„¶è¿™äº›ç”¨æˆ·æµå¾ˆå¸¸è§ï¼Œä½†æƒ³è¦åœ¨<em>ä¸</em>å¼•èµ·å¯¼èˆªçš„æƒ…å†µä¸‹æ›´æ”¹æ•°æ®ä¹ŸåŒæ ·å¸¸è§ã€‚</p> <p>å¯¹äºè¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬æœ‰<a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer"><code>useFetcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>åŠæ³•ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸å¼•èµ·å¯¼èˆªçš„æƒ…å†µä¸‹ä¸åŠ è½½ç¨‹åºå’Œæ“ä½œè¿›è¡Œé€šä¿¡ã€‚</p> <p>è”ç³»é¡µé¢ä¸Šçš„ â˜… æŒ‰é’®å¯¹æ­¤å¾ˆæœ‰æ„ä¹‰ã€‚æˆ‘ä»¬ä¸æ˜¯åœ¨åˆ›å»ºæˆ–åˆ é™¤æ–°è®°å½•ï¼Œæˆ‘ä»¬ä¸æƒ³æ›´æ”¹é¡µé¢ï¼Œæˆ‘ä»¬åªæ˜¯æƒ³æ›´æ”¹æˆ‘ä»¬æ­£åœ¨æŸ¥çœ‹çš„é¡µé¢ä¸Šçš„æ•°æ®ã€‚</p> <p>ğŸ‘‰<strong>å°†è¡¨å•æ›´æ”¹ä¸ºfetcher<code>&lt;Favorite&gt;</code>è¡¨å•</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  useFetcher<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;â˜…&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜†&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æˆ‘ä»¬æ¥çš„æ—¶å€™å¯èƒ½æƒ³çœ‹çœ‹é‚£ä¸ªè¡¨æ ¼ã€‚ä¸å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬çš„è¡¨å•å…·æœ‰å¸¦æœ‰<code>name</code>é“å…·çš„å­—æ®µã€‚æ­¤è¡¨å•å°†å‘é€<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ä¸€ä¸ª<code>favorite</code>å¯†é’¥ï¼Œè¯¥å¯†é’¥æ˜¯<code>&quot;true&quot; | &quot;false&quot;</code>. å› ä¸ºå®ƒæœ‰<code>method=&quot;post&quot;</code>å®ƒä¼šè°ƒç”¨æ“ä½œã€‚ç”±äºæ²¡æœ‰<code>&lt;fetcher.Form action=&quot;...&quot;&gt;</code>é“å…·ï¼Œå®ƒå°†å‘å¸ƒåˆ°å‘ˆç°è¡¨å•çš„è·¯çº¿ã€‚</p> <p>ğŸ‘‰<strong>åˆ›å»ºåŠ¨ä½œ</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContact<span class="token punctuation">,</span> updateContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">favorite</span><span class="token operator">:</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;favorite&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¾ˆç®€å•ã€‚ä»è¯·æ±‚ä¸­æå–è¡¨å•æ•°æ®å¹¶å°†å…¶å‘é€åˆ°æ•°æ®æ¨¡å‹ã€‚</p> <p>ğŸ‘‰<strong>é…ç½®è·¯ç”±çš„æ–°åŠ¨ä½œ</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> Contact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> contactLoader<span class="token punctuation">,</span>
  action <span class="token keyword">as</span> contactAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/contact&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> contactAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/* existing code */</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¥½äº†ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½ç‚¹å‡»ç”¨æˆ·åæ—è¾¹çš„æ˜Ÿå·äº†ï¼</p> <p><img src="https://reactrouter.com/_docs/tutorial/24.webp" alt="img"></p> <p>æ£€æŸ¥ä¸€ä¸‹ï¼Œä¸¤é¢—æ˜Ÿéƒ½ä¼šè‡ªåŠ¨æ›´æ–°ã€‚æˆ‘ä»¬çš„æ–°åŠŸèƒ½<code>&lt;fetcher.Form method=&quot;post&quot;&gt;</code>å‡ ä¹ä¸<code>&lt;Form&gt;</code>æˆ‘ä»¬ä¸€ç›´ä½¿ç”¨çš„åŠŸèƒ½å®Œå…¨ç›¸åŒï¼šå®ƒè°ƒç”¨æ“ä½œï¼Œç„¶åè‡ªåŠ¨é‡æ–°éªŒè¯æ‰€æœ‰æ•°æ®â€”â€”ç”šè‡³æ‚¨çš„é”™è¯¯ä¹Ÿä¼šä»¥ç›¸åŒçš„æ–¹å¼è¢«æ•è·ã€‚</p> <p>ä½†æœ‰ä¸€ä¸ªå…³é”®åŒºåˆ«ï¼Œå®ƒä¸æ˜¯å¯¼èˆªâ€”â€”URL ä¸ä¼šæ”¹å˜ï¼Œå†å²å †æ ˆä¸å—å½±å“ã€‚</p> <h2 id="ä¹è§‚çš„ç”¨æˆ·ç•Œé¢"><a href="#ä¹è§‚çš„ç”¨æˆ·ç•Œé¢" class="header-anchor">#</a> ä¹è§‚çš„ç”¨æˆ·ç•Œé¢</h2> <p>æ‚¨å¯èƒ½æ³¨æ„åˆ°å½“æˆ‘ä»¬å•å‡»ä¸Šä¸€èŠ‚ä¸­çš„æ”¶è—æŒ‰é’®æ—¶ï¼Œè¯¥åº”ç”¨æ„Ÿè§‰æœ‰ç‚¹ååº”è¿Ÿé’ã€‚å†ä¸€æ¬¡ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€äº›ç½‘ç»œå»¶è¿Ÿï¼Œå› ä¸ºæ‚¨å°†åœ¨ç°å®ä¸–ç•Œä¸­é‡åˆ°å®ƒï¼</p> <p>ä¸ºäº†ç»™ç”¨æˆ·ä¸€äº›åé¦ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æ˜Ÿæ˜Ÿç½®äºåŠ è½½çŠ¶æ€<a href="https://reactrouter.com/en/main/hooks/use-fetcher#fetcherstate" target="_blank" rel="noopener noreferrer"><code>fetcher.state</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ï¼ˆä¸ä¹‹å‰éå¸¸ç›¸ä¼¼<code>navigation.state</code>ï¼‰ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¸ºâ€œä¹è§‚ UIâ€çš„ç­–ç•¥</p> <p>æå–å™¨çŸ¥é“æäº¤ç»™æ“ä½œçš„è¡¨å•æ•°æ®ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨ ä¸Šä½¿ç”¨å®ƒ<code>fetcher.formData</code>ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥ç«‹å³æ›´æ–°æ˜Ÿæ˜Ÿçš„çŠ¶æ€ï¼Œå³ä½¿ç½‘ç»œå°šæœªå®Œæˆã€‚å¦‚æœæ›´æ–°æœ€ç»ˆå¤±è´¥ï¼ŒUI å°†æ¢å¤ä¸ºçœŸå®æ•°æ®ã€‚</p> <p>ğŸ‘‰ä»ä¸­<strong>è¯»å–ä¹è§‚å€¼<code>fetcher.formData</code></strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fetcher<span class="token punctuation">.</span>formData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    favorite <span class="token operator">=</span> fetcher<span class="token punctuation">.</span>formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;favorite&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;â˜…&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;â˜†&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœæ‚¨ç°åœ¨å•å‡»è¯¥æŒ‰é’®ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°æ˜Ÿæ˜Ÿ<em>ç«‹å³</em>æ›´æ”¹ä¸ºæ–°çŠ¶æ€ã€‚æˆ‘ä»¬ä¸æ˜¯æ€»æ˜¯æ¸²æŸ“å®é™…æ•°æ®ï¼Œè€Œæ˜¯æ£€æŸ¥ fetcher æ˜¯å¦æœ‰ä»»ä½•<code>formData</code>æäº¤ï¼Œå¦‚æœæœ‰ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒã€‚æ“ä½œå®Œæˆåï¼Œ<code>fetcher.formData</code>å°†ä¸å†å­˜åœ¨ï¼Œæˆ‘ä»¬å°†è¿”å›ä½¿ç”¨å®é™…æ•°æ®ã€‚æ‰€ä»¥å³ä½¿ä½ åœ¨ä¹è§‚çš„ UI ä»£ç ä¸­å†™äº†é”™è¯¯ï¼Œå®ƒæœ€ç»ˆä¹Ÿä¼šå›åˆ°æ­£ç¡®çš„çŠ¶æ€ğŸ¥¹</p> <h2 id="æœªæ‰¾åˆ°æ•°æ®"><a href="#æœªæ‰¾åˆ°æ•°æ®" class="header-anchor">#</a> æœªæ‰¾åˆ°æ•°æ®</h2> <p>å¦‚æœæˆ‘ä»¬å°è¯•åŠ è½½çš„è”ç³»äººä¸å­˜åœ¨ä¼šæ€æ ·ï¼Ÿ</p> <p><img src="https://reactrouter.com/_docs/tutorial/25.webp" alt="img"></p> <p><a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>å½“æˆ‘ä»¬å°è¯•å‘ˆç°<code>null</code>è”ç³»äººæ—¶ï¼Œæˆ‘ä»¬çš„æ ¹æºæ˜¯æ•æ‰åˆ°è¿™ä¸ªæ„å¤–é”™è¯¯ã€‚å¾ˆé«˜å…´é”™è¯¯å¾—åˆ°äº†å¦¥å–„å¤„ç†ï¼Œä½†æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ï¼</p> <p>æ¯å½“æ‚¨åœ¨åŠ è½½ç¨‹åºæˆ–æ“ä½œä¸­é‡åˆ°é¢„æœŸçš„é”™è¯¯æƒ…å†µæ—¶ï¼ˆä¾‹å¦‚æ•°æ®ä¸å­˜åœ¨ï¼‰ï¼Œæ‚¨éƒ½å¯ä»¥<code>throw</code>. è°ƒç”¨å †æ ˆå°†ä¸­æ–­ï¼ŒReact Router å°†æ•è·å®ƒï¼Œå¹¶å‘ˆç°é”™è¯¯è·¯å¾„ã€‚æˆ‘ä»¬ç”šè‡³ä¸ä¼šå°è¯•æä¾›<code>null</code>è”ç³»æ–¹å¼ã€‚</p> <p>ğŸ‘‰<strong>åœ¨åŠ è½½ç¨‹åºä¸­æŠ›å‡º 404 å“åº”</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>contact<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
      <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> contact<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/27.webp" alt="img"></p> <p>æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ é‡åˆ°æ¸²æŸ“é”™è¯¯<code>Cannot read properties of null</code>ï¼Œè€Œæ˜¯å®Œå…¨é¿å…ç»„ä»¶å¹¶æ¸²æŸ“é”™è¯¯è·¯å¾„ï¼Œå‘Šè¯‰ç”¨æˆ·æ›´å…·ä½“çš„äº‹æƒ…ã€‚</p> <p>è¿™ä¼šè®©ä½ çš„å¿«ä¹ä¹‹è·¯ä¿æŒå¿«ä¹ã€‚ä½ çš„è·¯ç”±å…ƒç´ ä¸éœ€è¦å…³å¿ƒé”™è¯¯å’ŒåŠ è½½çŠ¶æ€ã€‚</p> <h2 id="æ— è·¯å¾„è·¯çº¿"><a href="#æ— è·¯å¾„è·¯çº¿" class="header-anchor">#</a> æ— è·¯å¾„è·¯çº¿</h2> <p>æœ€åä¸€ä»¶äº‹ã€‚æˆ‘ä»¬çœ‹åˆ°çš„æœ€åä¸€ä¸ªé”™è¯¯é¡µé¢å¦‚æœå‘ˆç°åœ¨æ ¹æ’åº§å†…è€Œä¸æ˜¯æ•´ä¸ªé¡µé¢å†…ä¼šæ›´å¥½ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬æ‰€æœ‰å­è·¯ç”±ä¸­çš„æ¯ä¸€ä¸ªé”™è¯¯åœ¨ outlet ä¸­éƒ½ä¼šæ›´å¥½ï¼Œè¿™æ ·ç”¨æˆ·å°±æœ‰äº†æ¯”ç‚¹å‡»åˆ·æ–°æ›´å¤šçš„é€‰æ‹©ã€‚</p> <p>æˆ‘ä»¬å¸Œæœ›å®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p> <p><img src="https://reactrouter.com/_docs/tutorial/26.webp" alt="img"></p> <p>æˆ‘ä»¬å¯ä»¥å°†é”™è¯¯å…ƒç´ æ·»åŠ åˆ°æ¯ä¸ªå­è·¯ç”±ä¸­ï¼Œä½†ç”±äºå®ƒä»¬éƒ½æ˜¯ç›¸åŒçš„é”™è¯¯é¡µé¢ï¼Œå› æ­¤ä¸æ¨èè¿™æ ·åšã€‚</p> <p>æœ‰ä¸€ç§æ›´æ¸…æ´çš„æ–¹æ³•ã€‚è·¯ç”±å¯ä»¥åœ¨<em>æ²¡æœ‰</em>è·¯å¾„çš„æƒ…å†µä¸‹ä½¿ç”¨ï¼Œè¿™è®©å®ƒä»¬å¯ä»¥å‚ä¸ UI å¸ƒå±€ï¼Œè€Œä¸éœ€è¦ URL ä¸­çš„æ–°è·¯å¾„æ®µã€‚çœ‹çœ‹è¿™ä¸ªï¼š</p> <p>ğŸ‘‰<strong>å°†å­è·¯ç”±åŒ…è£¹åœ¨æ— è·¯å¾„è·¯ç”±ä¸­</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
            <span class="token literal-property property">action</span><span class="token operator">:</span> contactAction<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">/* the rest of the routes */</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å½“å­è·¯ç”±ä¸­æŠ›å‡ºä»»ä½•é”™è¯¯æ—¶ï¼Œæˆ‘ä»¬æ–°çš„æ— è·¯å¾„è·¯ç”±å°†æ•è·å®ƒå¹¶å‘ˆç°ï¼Œä¿ç•™æ ¹è·¯ç”±çš„ UIï¼</p> <h2 id="jsx-è·¯çº¿"><a href="#jsx-è·¯çº¿" class="header-anchor">#</a> JSX è·¯çº¿</h2> <p>å¯¹äºæˆ‘ä»¬çš„æœ€åä¸€ä¸ªæŠ€å·§ï¼Œè®¸å¤šäººæ›´å–œæ¬¢ä½¿ç”¨ JSX é…ç½®ä»–ä»¬çš„è·¯ç”±ã€‚ä½ å¯ä»¥ç”¨<code>createRoutesFromElements</code>. åœ¨é…ç½®è·¯ç”±æ—¶ï¼ŒJSX æˆ–å¯¹è±¡åœ¨åŠŸèƒ½ä¸Šæ²¡æœ‰åŒºåˆ«ï¼Œè¿™åªæ˜¯ä¸€ç§é£æ ¼åå¥½ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  createRoutesFromElements<span class="token punctuation">,</span>
  createBrowserRouter<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span>
  <span class="token function">createRoutesFromElements</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
      path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
      element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      loader<span class="token operator">=</span><span class="token punctuation">{</span>rootLoader<span class="token punctuation">}</span>
      action<span class="token operator">=</span><span class="token punctuation">{</span>rootAction<span class="token punctuation">}</span>
      errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route index element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId&quot;</span>
          element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
          loader<span class="token operator">=</span><span class="token punctuation">{</span>contactLoader<span class="token punctuation">}</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>contactAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId/edit&quot;</span>
          element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
          loader<span class="token operator">=</span><span class="token punctuation">{</span>contactLoader<span class="token punctuation">}</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>editAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId/destroy&quot;</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>destroyAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>å°±æ˜¯è¿™æ ·ï¼æ„Ÿè°¢æ‚¨å°è¯• React Routerã€‚æˆ‘ä»¬å¸Œæœ›æœ¬æ•™ç¨‹èƒ½ä¸ºæ‚¨æä¾›ä¸€ä¸ªåšå®çš„å¼€ç«¯ï¼Œä»¥æ„å»ºå‡ºè‰²çš„ç”¨æˆ·ä½“éªŒã€‚ä½ å¯ä»¥ç”¨ React Router åšæ›´å¤šçš„äº‹æƒ…ï¼Œæ‰€ä»¥ä¸€å®šè¦æ£€æŸ¥æ‰€æœ‰çš„ API ğŸ˜€</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/baimingxuan/react-router6-doc/edit/main/docs/start/tutorial.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°æ—¶é—´:</span> <span class="time">2023/1/29 ä¸‹åˆ3:19:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/react-router6-doc/start/overview.html" class="prev">
        åŠŸèƒ½æ¦‚è¿°
      </a></span> <span class="next"><a href="/react-router6-doc/start/faqs.html">
        å¸¸è§é—®é¢˜
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/react-router6-doc/assets/js/app.3977e6ed.js" defer></script><script src="/react-router6-doc/assets/js/2.6430ac10.js" defer></script><script src="/react-router6-doc/assets/js/74.b28de77c.js" defer></script>
  </body>
</html>
