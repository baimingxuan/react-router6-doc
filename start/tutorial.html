<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setup | React Router6 中文文档</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="文档内容详细翻译自官方英文文档">
    
    <link rel="preload" href="/react-router6-doc/assets/css/0.styles.9c14763a.css" as="style"><link rel="preload" href="/react-router6-doc/assets/js/app.3977e6ed.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/74.b28de77c.js" as="script"><link rel="prefetch" href="/react-router6-doc/assets/js/10.3ecfd4b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/11.96744b78.js"><link rel="prefetch" href="/react-router6-doc/assets/js/12.7ca7492b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/13.ed88fa50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/14.c32c4d27.js"><link rel="prefetch" href="/react-router6-doc/assets/js/15.492bdbe6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/16.0afe03b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/17.ee2650c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/18.38f3184b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/19.3d95686d.js"><link rel="prefetch" href="/react-router6-doc/assets/js/20.e006914b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/21.2914f993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/22.c25c5262.js"><link rel="prefetch" href="/react-router6-doc/assets/js/23.2959ad25.js"><link rel="prefetch" href="/react-router6-doc/assets/js/24.b6d79d39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/25.ac31ef72.js"><link rel="prefetch" href="/react-router6-doc/assets/js/26.872cb077.js"><link rel="prefetch" href="/react-router6-doc/assets/js/27.64e94538.js"><link rel="prefetch" href="/react-router6-doc/assets/js/28.8fc4bd95.js"><link rel="prefetch" href="/react-router6-doc/assets/js/29.472d4bce.js"><link rel="prefetch" href="/react-router6-doc/assets/js/3.ca35af39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/30.eb78e0e6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/31.f0041706.js"><link rel="prefetch" href="/react-router6-doc/assets/js/32.d7ea5513.js"><link rel="prefetch" href="/react-router6-doc/assets/js/33.6af9c91e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/34.f72f8b29.js"><link rel="prefetch" href="/react-router6-doc/assets/js/35.4f205482.js"><link rel="prefetch" href="/react-router6-doc/assets/js/36.7e81b201.js"><link rel="prefetch" href="/react-router6-doc/assets/js/37.189e63dd.js"><link rel="prefetch" href="/react-router6-doc/assets/js/38.7b2282a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/39.dfa41823.js"><link rel="prefetch" href="/react-router6-doc/assets/js/4.3357b40a.js"><link rel="prefetch" href="/react-router6-doc/assets/js/40.58e1cc61.js"><link rel="prefetch" href="/react-router6-doc/assets/js/41.ba56822c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/42.ddd0d283.js"><link rel="prefetch" href="/react-router6-doc/assets/js/43.449a8b8e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/44.e9602134.js"><link rel="prefetch" href="/react-router6-doc/assets/js/45.703d86c7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/46.2b4813c8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/47.33b902b8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/48.076c7084.js"><link rel="prefetch" href="/react-router6-doc/assets/js/49.ca3844b6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/5.e084b39e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/50.cb28fb54.js"><link rel="prefetch" href="/react-router6-doc/assets/js/51.a9bf92aa.js"><link rel="prefetch" href="/react-router6-doc/assets/js/52.abb71d57.js"><link rel="prefetch" href="/react-router6-doc/assets/js/53.f28b86ab.js"><link rel="prefetch" href="/react-router6-doc/assets/js/54.431230ac.js"><link rel="prefetch" href="/react-router6-doc/assets/js/55.6d416534.js"><link rel="prefetch" href="/react-router6-doc/assets/js/56.5247885e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/57.3468a0a6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/58.f6aac83e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/59.9802116c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/react-router6-doc/assets/js/60.07cb5490.js"><link rel="prefetch" href="/react-router6-doc/assets/js/61.2743a407.js"><link rel="prefetch" href="/react-router6-doc/assets/js/62.5fa1707e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/63.1d468a1f.js"><link rel="prefetch" href="/react-router6-doc/assets/js/64.e42e4d82.js"><link rel="prefetch" href="/react-router6-doc/assets/js/65.4b5065c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/66.9c218cc2.js"><link rel="prefetch" href="/react-router6-doc/assets/js/67.c74f8ad3.js"><link rel="prefetch" href="/react-router6-doc/assets/js/68.976323b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/69.a6de7974.js"><link rel="prefetch" href="/react-router6-doc/assets/js/7.79da1235.js"><link rel="prefetch" href="/react-router6-doc/assets/js/70.5323e7c9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/71.1eb10979.js"><link rel="prefetch" href="/react-router6-doc/assets/js/72.fd9f048e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/73.e5cc737c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/75.205022f9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/76.302640ff.js"><link rel="prefetch" href="/react-router6-doc/assets/js/77.bafe70a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/78.25f09583.js"><link rel="prefetch" href="/react-router6-doc/assets/js/79.943e4f2e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/8.8b6ff993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/80.b53f9e50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/81.666b3df7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/82.3b2246d5.js"><link rel="prefetch" href="/react-router6-doc/assets/js/83.2eca4ef0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/84.e4793f9b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/85.9812b3b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/9.33f377fb.js">
    <link rel="stylesheet" href="/react-router6-doc/assets/css/0.styles.9c14763a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-router6-doc/" class="home-link router-link-active"><!----> <span class="site-name">React Router6 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/start/overview" class="sidebar-heading clickable open"><span>快速上手</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/start/overview.html" class="sidebar-link">功能概述</a></li><li><a href="/react-router6-doc/start/tutorial.html" aria-current="page" class="active sidebar-link">教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#添加-router" class="sidebar-link">添加 Router</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#根路由" class="sidebar-link">根路由</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#处理未找到错误" class="sidebar-link">处理未找到错误</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#联络路线用户界面" class="sidebar-link">联络路线用户界面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#客户端路由" class="sidebar-link">客户端路由</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#加载数据中" class="sidebar-link">加载数据中</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#数据写入-html-表单" class="sidebar-link">数据写入 + HTML 表单</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#创建联系人" class="sidebar-link">创建联系人</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#加载程序中的-url-参数" class="sidebar-link">加载程序中的 URL 参数</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#更新数据" class="sidebar-link">更新数据</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#使用-formdata-更新联系人" class="sidebar-link">使用 FormData 更新联系人</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#突变讨论" class="sidebar-link">突变讨论</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#将新记录重定向到编辑页面" class="sidebar-link">将新记录重定向到编辑页面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#活动链接样式" class="sidebar-link">活动链接样式</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#全局待定用户界面" class="sidebar-link">全局待定用户界面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#删除记录" class="sidebar-link">删除记录</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#上下文错误" class="sidebar-link">上下文错误</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#索引路线" class="sidebar-link">索引路线</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#取消按钮" class="sidebar-link">取消按钮</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#url-搜索参数和-get-提交" class="sidebar-link">URL 搜索参数和 GET 提交</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#使用客户端路由获取提交" class="sidebar-link">使用客户端路由获取提交</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#将-url-同步到表单状态" class="sidebar-link">将 URL 同步到表单状态</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#提交表格onchange" class="sidebar-link">提交表格onChange</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#添加搜索微调器" class="sidebar-link">添加搜索微调器</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#管理历史栈" class="sidebar-link">管理历史栈</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#没有导航的突变" class="sidebar-link">没有导航的突变</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#乐观的用户界面" class="sidebar-link">乐观的用户界面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#未找到数据" class="sidebar-link">未找到数据</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#无路径路线" class="sidebar-link">无路径路线</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/tutorial.html#jsx-路线" class="sidebar-link">JSX 路线</a></li></ul></li><li><a href="/react-router6-doc/start/faqs.html" class="sidebar-link">常见问题</a></li><li><a href="/react-router6-doc/start/concepts.html" class="sidebar-link">核心概念</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router/picking-a-router" class="sidebar-heading clickable"><span>Router</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router/picking-a-router.html" class="sidebar-link">选择Router</a></li><li><a href="/react-router6-doc/router/create-browser-router.html" class="sidebar-link">createBrowserRouter</a></li><li><a href="/react-router6-doc/router/create-hash-router.html" class="sidebar-link">createHashRouter</a></li><li><a href="/react-router6-doc/router/create-memory-router.html" class="sidebar-link">createMemoryRouter</a></li><li><a href="/react-router6-doc/router/router-provider.html" class="sidebar-link">RouterProvider</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router-components/browser-router" class="sidebar-heading clickable"><span>Router组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router-components/browser-router.html" class="sidebar-link">BrowserRouter</a></li><li><a href="/react-router6-doc/router-components/hash-router.html" class="sidebar-link">HashRouter</a></li><li><a href="/react-router6-doc/router-components/memory-router.html" class="sidebar-link">MemoryRouter</a></li><li><a href="/react-router6-doc/router-components/native-router.html" class="sidebar-link">NativeRouter</a></li><li><a href="/react-router6-doc/router-components/router.html" class="sidebar-link">router</a></li><li><a href="/react-router6-doc/router-components/static-router.html" class="sidebar-link">StaticRouter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/route/route" class="sidebar-heading clickable"><span>route</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/route/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/route/action.html" class="sidebar-link">action</a></li><li><a href="/react-router6-doc/route/error-element.html" class="sidebar-link">errorElement</a></li><li><a href="/react-router6-doc/route/loader.html" class="sidebar-link">Loader</a></li><li><a href="/react-router6-doc/route/should-revalidate.html" class="sidebar-link">shouldRevalidate</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/components/await" class="sidebar-heading clickable"><span>组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/components/await.html" class="sidebar-link">Await</a></li><li><a href="/react-router6-doc/components/form.html" class="sidebar-link">Form</a></li><li><a href="/react-router6-doc/components/link.html" class="sidebar-link">Link</a></li><li><a href="/react-router6-doc/components/link-native.html" class="sidebar-link">Link(RN)</a></li><li><a href="/react-router6-doc/components/nav-link.html" class="sidebar-link">NavLink</a></li><li><a href="/react-router6-doc/components/navigate.html" class="sidebar-link">Navigate</a></li><li><a href="/react-router6-doc/components/outlet.html" class="sidebar-link">Outlet</a></li><li><a href="/react-router6-doc/components/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/components/routes.html" class="sidebar-link">Routes</a></li><li><a href="/react-router6-doc/components/scroll-restoration.html" class="sidebar-link">ScrollRestoration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/hooks/use-action-data" class="sidebar-heading clickable"><span>钩子函数</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/hooks/use-action-data.html" class="sidebar-link">useActionData</a></li><li><a href="/react-router6-doc/hooks/use-async-error.html" class="sidebar-link">useAsyncError</a></li><li><a href="/react-router6-doc/hooks/use-async-value.html" class="sidebar-link">useAsyncValue</a></li><li><a href="/react-router6-doc/hooks/use-before-unload.html" class="sidebar-link">useBeforeUnload</a></li><li><a href="/react-router6-doc/hooks/use-fetcher.html" class="sidebar-link">useFetcher</a></li><li><a href="/react-router6-doc/hooks/use-fetchers.html" class="sidebar-link">useFetchers</a></li><li><a href="/react-router6-doc/hooks/use-form-action.html" class="sidebar-link">useFormAction</a></li><li><a href="/react-router6-doc/hooks/use-href.html" class="sidebar-link">useHref</a></li><li><a href="/react-router6-doc/hooks/use-in-router-context.html" class="sidebar-link">useInRouterContext</a></li><li><a href="/react-router6-doc/hooks/use-link-click-handler.html" class="sidebar-link">useLinkClickHandler</a></li><li><a href="/react-router6-doc/hooks/use-link-press-handler.html" class="sidebar-link">useLinkPressHandler</a></li><li><a href="/react-router6-doc/hooks/use-loader-data.html" class="sidebar-link">useLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-location.html" class="sidebar-link">useLocation</a></li><li><a href="/react-router6-doc/hooks/use-match.html" class="sidebar-link">useMatch</a></li><li><a href="/react-router6-doc/hooks/use-matches.html" class="sidebar-link">useMatches</a></li><li><a href="/react-router6-doc/hooks/use-navigate.html" class="sidebar-link">useNavigate</a></li><li><a href="/react-router6-doc/hooks/use-navigation.html" class="sidebar-link">useNavigation</a></li><li><a href="/react-router6-doc/hooks/use-navigation-type.html" class="sidebar-link">useNavigationType</a></li><li><a href="/react-router6-doc/hooks/use-outlet.html" class="sidebar-link">useOutlet</a></li><li><a href="/react-router6-doc/hooks/use-outlet-context.html" class="sidebar-link">useOutletContext</a></li><li><a href="/react-router6-doc/hooks/use-params.html" class="sidebar-link">useParams</a></li><li><a href="/react-router6-doc/hooks/use-resolved-path.html" class="sidebar-link">useResolvedPath</a></li><li><a href="/react-router6-doc/hooks/use-revalidator.html" class="sidebar-link">useRevalidator</a></li><li><a href="/react-router6-doc/hooks/use-route-error.html" class="sidebar-link">useRouteError</a></li><li><a href="/react-router6-doc/hooks/use-route-loader-data.html" class="sidebar-link">useRouteLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-routes.html" class="sidebar-link">useRoutes</a></li><li><a href="/react-router6-doc/hooks/use-search-params.html" class="sidebar-link">useSearchParams</a></li><li><a href="/react-router6-doc/hooks/use-search-params-rn.html" class="sidebar-link">useSearchParams(RN)</a></li><li><a href="/react-router6-doc/hooks/use-submit.html" class="sidebar-link">useSubmit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/fetch/json" class="sidebar-heading clickable"><span>Fetch工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/fetch/json.html" class="sidebar-link">json</a></li><li><a href="/react-router6-doc/fetch/redirect.html" class="sidebar-link">redirect</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/utils/create-routes-from-children" class="sidebar-heading clickable"><span>工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/utils/create-routes-from-children.html" class="sidebar-link">createRoutesFromChildren</a></li><li><a href="/react-router6-doc/utils/create-routes-from-elements.html" class="sidebar-link">createRoutesFromElements</a></li><li><a href="/react-router6-doc/utils/create-search-params.html" class="sidebar-link">createSearchParams</a></li><li><a href="/react-router6-doc/utils/defer.html" class="sidebar-link">defer</a></li><li><a href="/react-router6-doc/utils/generate-path.html" class="sidebar-link">generatePath</a></li><li><a href="/react-router6-doc/utils/is-route-error-response.html" class="sidebar-link">isRouteErrorResponse</a></li><li><a href="/react-router6-doc/utils/location.html" class="sidebar-link">Location</a></li><li><a href="/react-router6-doc/utils/match-path.html" class="sidebar-link">matchPath</a></li><li><a href="/react-router6-doc/utils/match-routes.html" class="sidebar-link">matchRoutes</a></li><li><a href="/react-router6-doc/utils/render-matches.html" class="sidebar-link">renderMatches</a></li><li><a href="/react-router6-doc/utils/resolve-path.html" class="sidebar-link">resolvePath</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/guides/ssr" class="sidebar-heading clickable"><span>指南</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/guides/ssr.html" class="sidebar-link">服务端渲染</a></li><li><a href="/react-router6-doc/guides/contributing.html" class="sidebar-link">贡献</a></li><li><a href="/react-router6-doc/guides/data-libs.html" class="sidebar-link">数据库整合</a></li><li><a href="/react-router6-doc/guides/deferred.html" class="sidebar-link">延迟数据</a></li><li><a href="/react-router6-doc/guides/form-data.html" class="sidebar-link">使用FormData</a></li><li><a href="/react-router6-doc/guides/index-search-param.html" class="sidebar-link">索引查询参数</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="setup"><a href="#setup" class="header-anchor">#</a> Setup</h2> <p>在本教程中，我们将使用<a href="https://vitejs.dev/guide/" target="_blank" rel="noopener noreferrer">Vite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>作为我们的捆绑器和开发服务器。您需要为命令行工具安装<a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">Node.js。<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>npm</code></p> <p>👉️<strong>打开您的终端并使用 Vite 启动一个新的 React 应用程序：</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> create vite@latest name-of-your-project -- <span class="token parameter variable">--template</span> react
<span class="token comment"># follow prompts</span>
<span class="token builtin class-name">cd</span> <span class="token operator">&lt;</span>your new project directory<span class="token operator">&gt;</span>
<span class="token function">npm</span> <span class="token function">install</span> react-router-dom localforage match-sorter sort-by
<span class="token function">npm</span> run dev
</code></pre></div><p>您应该能够访问终端中打印的 URL：</p> <div class="language- extra-class"><pre class="language-text"><code> VITE v3.0.7  ready in 175 ms

  ➜  Local:   http://127.0.0.1:5173/
  ➜  Network: use --host to expose
</code></pre></div><p>我们为本教程准备了一些预先编写的 CSS，因此我们可以专注于 React Router。随意严厉地判断它或编写你自己的 😀（我们做了我们通常不会在 CSS 中做的事情，以便本教程中的标记可以保持尽可能少。）</p> <p>👉将**<a href="https://gist.githubusercontent.com/ryanflorence/ba20d473ef59e1965543fa013ae4163f/raw/499707f25a5690d490c7b3d54c65c65eb895930c/react-router-6.4-tutorial-css.css" target="_blank" rel="noopener noreferrer">此处找到<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**<strong>的教程 CSS 复制/粘贴到<code>src/index.css</code></strong></p> <p>本教程将创建、读取、搜索、更新和删除数据。一个典型的网络应用程序可能会与您的网络服务器上的 API 对话，但我们将使用浏览器存储并伪造一些网络延迟来保持这一点。这些代码都与 React Router 无关，所以只需复制/粘贴所有代码即可。</p> <p>👉将**<a href="https://gist.githubusercontent.com/ryanflorence/1e7f5d3344c0db4a8394292c157cd305/raw/f7ff21e9ae7ffd55bfaaaf320e09c6a08a8a6611/contacts.js" target="_blank" rel="noopener noreferrer">此处找到<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>**<strong>的教程数据模块复制/粘贴到<code>src/contacts.js</code></strong></p> <p>src 文件夹中所需的全部是<code>contacts.js</code>、<code>main.jsx</code>和<code>index.css</code>。您可以删除任何其他内容（例如<code>App.js</code>和<code>assets</code>等）。</p> <p>👉<strong>删除未使用的文件，<code>src/</code>所以你只剩下这些：</strong></p> <div class="language- extra-class"><pre class="language-text"><code>src
├── contacts.js
├── index.css
└── main.jsx
</code></pre></div><p>如果您的应用程序正在运行，它可能会暂时崩溃，继续前进 😋。这样，我们就可以开始了！</p> <h2 id="添加-router"><a href="#添加-router" class="header-anchor">#</a> 添加 Router</h2> <p>首先要做的是创建一个<a href="https://reactrouter.com/en/main/routers/create-browser-router" target="_blank" rel="noopener noreferrer">浏览器路由器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>并配置我们的第一个路由。这将为我们的网络应用程序启用客户端路由。</p> <p>该<code>main.jsx</code>文件是入口点。打开它，我们将把 React Router 放在页面上。</p> <p>👉<strong>创建并渲染浏览器<a href="https://reactrouter.com/en/main/routers/create-browser-router" target="_blank" rel="noopener noreferrer">路由器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>main.jsx</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> ReactDOM <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createBrowserRouter<span class="token punctuation">,</span>
  RouterProvider<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./index.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>第一条路线就是我们通常所说的“根路线”，因为我们的其余路线将在其中呈现。它将作为 UI 的根布局，随着我们的深入，我们将拥有嵌套布局。</p> <h2 id="根路由"><a href="#根路由" class="header-anchor">#</a> 根路由</h2> <p>让我们为这个应用程序添加全局布局。</p> <p>👉<strong>创建<code>src/routes</code>和<code>src/routes/root.jsx</code></strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">mkdir</span> src/routes
<span class="token function">touch</span> src/routes/root.jsx
</code></pre></div><p>（如果你不想成为命令行书呆子，请使用你的编辑器而不是那些命令🤓）</p> <p>👉<strong>创建根布局组件</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span>
              aria<span class="token operator">-</span>hidden
              hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span>
              aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span>
            <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Name<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Friend<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>目前还没有 React Router 的具体内容，所以请随意复制/粘贴所有这些内容。</p> <p>👉<strong>设置<code>&lt;Root&gt;</code>为根路由<a href="https://reactrouter.com/en/main/route/route#element" target="_blank" rel="noopener noreferrer"><code>element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing imports */</span>
<span class="token keyword">import</span> Root <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>该应用程序现在应该看起来像这样。有一个能写 CSS 的设计师当然很好，不是吗？（<a href="https://blog.jim-nielsen.com/" target="_blank" rel="noopener noreferrer">谢谢吉姆<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>🙏）。</p> <p><img src="https://reactrouter.com/_docs/tutorial/01.webp" alt="img"></p> <h2 id="处理未找到错误"><a href="#处理未找到错误" class="header-anchor">#</a> 处理未找到错误</h2> <p>在项目早期了解您的应用程序如何响应错误始终是个好主意，因为在构建新应用程序时，我们编写的错误远远多于功能！发生这种情况时，您的用户不仅会获得良好的体验，而且还会在开发过程中为您提供帮助。</p> <p>我们添加了一些链接到这个应用程序，让我们看看当我们点击它们时会发生什么？</p> <p>👉<strong>单击其中一个侧边栏名称</strong></p> <p><img src="https://reactrouter.com/_docs/tutorial/02.webp" alt="默认 React Router 错误元素的屏幕截图"></p> <p>总的！这是 React Router 中的默认错误屏幕，由于我们在该应用程序根元素上的 flex box 样式而变得更糟😂。</p> <p>任何时候您的应用程序在渲染、加载数据或执行数据突变时抛出错误，React Router 都会捕获它并渲染错误屏幕。让我们制作我们自己的错误页面。</p> <p>👉<strong>创建错误页面组件</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/error-page.jsx
</code></pre></div><p><code>src/error-page.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRouteError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ErrorPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">useRouteError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;error-page&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Oops<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Sorry<span class="token punctuation">,</span> an unexpected error has occurred<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span><span class="token punctuation">{</span>error<span class="token punctuation">.</span>statusText <span class="token operator">||</span> error<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>设置<code>&lt;ErrorPage&gt;</code>为<a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>根路由</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* previous imports */</span>
<span class="token keyword">import</span> ErrorPage <span class="token keyword">from</span> <span class="token string">&quot;./error-page&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>StrictMode<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>错误页面现在应该如下所示：</p> <p><img src="https://reactrouter.com/_docs/tutorial/03.webp" alt="新的错误页面，但仍然很难看"></p> <p>（好吧，那也好不了多少。可能有人忘记找设计师做错页了。可能大家忘记找设计师做错页了，然后怪设计师想不到吧😆）</p> <p>请注意，它<a href="https://reactrouter.com/en/main/hooks/use-route-error" target="_blank" rel="noopener noreferrer"><code>useRouteError</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提供了抛出的错误。当用户导航到不存在的路线时，您将收到带有 &quot;Not Found&quot;的<a href="https://reactrouter.com/en/main/utils/is-route-error-response" target="_blank" rel="noopener noreferrer">错误响应<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><code>statusText</code>。我们将在本教程的后面看到一些其他错误，并对其进行更多讨论。</p> <p>现在，知道几乎所有的错误现在都将由这个页面处理，而不是无限旋转、无响应的页面或空白屏幕就足够了🙌</p> <h2 id="联络路线用户界面"><a href="#联络路线用户界面" class="header-anchor">#</a> 联络路线用户界面</h2> <p>我们想要在链接到的 URL 上实际呈现一些内容，而不是 404“未找到”页面。为此，我们需要开辟一条新路线。</p> <p>👉<strong>创建联络路线模块</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/contact.jsx
</code></pre></div><p>👉<strong>添加联系人组件UI</strong></p> <p>这只是一堆元素，请随意复制/粘贴。</p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">first</span><span class="token operator">:</span> <span class="token string">&quot;Your&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">last</span><span class="token operator">:</span> <span class="token string">&quot;Name&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">&quot;https://placekitten.com/g/200/200&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">twitter</span><span class="token operator">:</span> <span class="token string">&quot;your_handle&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">notes</span><span class="token operator">:</span> <span class="token string">&quot;Some notes&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">favorite</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;contact&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>img
          key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
          src<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first <span class="token operator">||</span> contact<span class="token punctuation">.</span>last <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span> <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No Name<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Favorite contact<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>a
              target<span class="token operator">=</span><span class="token string">&quot;_blank&quot;</span>
              href<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://twitter.com/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>twitter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
            <span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter<span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>

        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form action<span class="token operator">=</span><span class="token string">&quot;edit&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Edit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form
            method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span>
            action<span class="token operator">=</span><span class="token string">&quot;destroy&quot;</span>
            onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>
                <span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span>
                  <span class="token string">&quot;Please confirm you want to delete this record.&quot;</span>
                <span class="token punctuation">)</span>
              <span class="token punctuation">)</span> <span class="token punctuation">{</span>
                event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// yes, this is a `let` for later</span>
  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;★&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☆&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在我们已经有了一个组件，让我们把它连接到一个新的路由上。</p> <p>👉<strong>导入联系人组件并新建路由</strong></p> <div class="language- extra-class"><pre class="language-text"><code>/* existing imports */
import Contact from &quot;./routes/contact&quot;;

const router = createBrowserRouter([
  {
    path: &quot;/&quot;,
    element: &lt;Root /&gt;,
    errorElement: &lt;ErrorPage /&gt;,
  },
  {
    path: &quot;contacts/:contactId&quot;,
    element: &lt;Contact /&gt;,
  },
]);

/* existing code */
</code></pre></div><p>现在，如果我们单击其中一个链接或访问<code>/contacts/1</code>，我们将获得新组件！</p> <p><img src="https://reactrouter.com/_docs/tutorial/04.webp" alt="没有父布局的联系路由渲染"></p> <p>然而，它不在我们的根布局内😠</p> <h2 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h2> <p>我们希望联系人组件像这样在布局<em>内部呈现。</em><code>&lt;Root&gt;</code></p> <p><img src="https://reactrouter.com/_docs/tutorial/05.webp" alt="img"></p> <p>我们通过使联系路由成为根路由的子路由来实现*。*</p> <p>👉<strong>将 contacts 路由移动为根路由的子路由</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>您现在将再次看到根布局，但右侧是一个空白页面。我们需要告诉根路由我们希望它*在哪里渲染它的子路由。*我们用<a href="https://reactrouter.com/en/main/components/outlet" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>找到<code>&lt;div id=&quot;detail&quot;&gt;</code>并在里面放一个插座</p> <p>👉<strong>渲染<a href="https://reactrouter.com/en/main/components/outlet" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* all the other elements */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="客户端路由"><a href="#客户端路由" class="header-anchor">#</a> 客户端路由</h2> <p>你可能注意到也可能没有注意到，但是当我们单击侧边栏中的链接时，浏览器正在对下一个 URL 执行完整的文档请求，而不是使用 React Router。</p> <p>客户端路由允许我们的应用更新 URL 而无需从服务器请求另一个文档。相反，应用程序可以立即呈现新的 UI。让我们用<a href="https://reactrouter.com/en/main/components/link" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>👉<strong>将侧边栏更改<code>&lt;a href&gt;</code>为<code>&lt;Link to&gt;</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other elements */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Name<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Your Friend<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other elements */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>您可以在浏览器 devtools 中打开网络选项卡，以查看它不再请求文档。</p> <h2 id="加载数据中"><a href="#加载数据中" class="header-anchor">#</a> 加载数据中</h2> <p>URL 段、布局和数据通常耦合（三倍？）在一起。我们已经可以在这个应用程序中看到它：</p> <table><thead><tr><th>网址段</th> <th>成分</th> <th>数据</th></tr></thead> <tbody><tr><td>/</td> <td><code>&lt;Root&gt;</code></td> <td>联系人列表</td></tr> <tr><td>联系人/:id</td> <td><code>&lt;Contact&gt;</code></td> <td>个别联系</td></tr></tbody></table> <p>由于这种自然耦合，React Router 具有数据约定，可以轻松地将数据放入路由组件中。</p> <p>我们将使用两个 API 来加载数据，<a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noopener noreferrer"><code>loader</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以及<a href="https://reactrouter.com/en/main/hooks/use-loader-data" target="_blank" rel="noopener noreferrer"><code>useLoaderData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. 首先，我们将在根模块中创建并导出一个加载程序函数，然后将其连接到路由。最后，我们将访问并呈现数据。</p> <p>👉<strong>导出加载器<code>root.jsx</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Outlet<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>在路由上配置loader</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* other imports */</span>
<span class="token keyword">import</span> Root<span class="token punctuation">,</span> <span class="token punctuation">{</span> loader <span class="token keyword">as</span> rootLoader <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>👉<strong>访问和渲染数据</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token comment">/* other code */</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">contact</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first <span class="token operator">||</span> contact<span class="token punctuation">.</span>last <span class="token operator">?</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                        <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span> <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
                      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
                      <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No Name<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
                    <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
                    <span class="token punctuation">{</span>contact<span class="token punctuation">.</span>favorite <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>★<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">&gt;</span>No contacts<span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>就是这样！React Router 现在将自动保持该数据与您的 UI 同步。我们还没有任何数据，所以您可能会得到一个像这样的空白列表：</p> <p><img src="https://reactrouter.com/_docs/tutorial/06.webp" alt="img"></p> <h2 id="数据写入-html-表单"><a href="#数据写入-html-表单" class="header-anchor">#</a> 数据写入 + HTML 表单</h2> <p>我们将在一秒钟内创建我们的第一个联系人，但首先让我们谈谈 HTML。</p> <p>根据 JavaScript 寒武纪大爆发之前的 Web 开发，React Router 模拟 HTML 表单导航作为数据突变原语。它为您提供了客户端呈现的应用程序的 UX 功能以及“老式”Web 模型的简单性。</p> <p>虽然一些 Web 开发人员不熟悉，但 HTML 表单实际上会在浏览器中引起导航，就像单击链接一样。唯一的区别在于请求：链接只能更改 URL，而表单还可以更改请求方法（GET 与 POST）和请求正文（POST 表单数据）。</p> <p>如果没有客户端路由，浏览器将自动序列化表单数据并将其作为 POST 的请求主体和 GET 的 URLSearchParams 发送到服务器。React Router 做同样的事情，除了它不是将请求发送到服务器，而是使用客户端路由并将其发送到 route <a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer"><code>action</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>我们可以通过单击应用程序中的“新建”按钮来对此进行测试。该应用程序应该会崩溃，因为 Vite 服务器未配置为处理 POST 请求（它发送 404，尽管它可能应该是 405 🤷）。</p> <p><img src="https://reactrouter.com/_docs/tutorial/07.webp" alt="img"></p> <p>与其将 POST 发送到 Vite 服务器以创建新联系人，不如使用客户端路由。</p> <h2 id="创建联系人"><a href="#创建联系人" class="header-anchor">#</a> 创建联系人</h2> <p>我们将通过<code>action</code>在我们的根路由中导出 an 来创建新的联系人，将其连接到路由配置，并将我们的更改<code>&lt;form&gt;</code>为 React Router <a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>👉<strong>创建动作并更改<code>&lt;form&gt;</code>为<code>&lt;Form&gt;</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts<span class="token punctuation">,</span> createContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contact <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* other code */</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>New<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>导入并设置路由上的动作</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* other imports */</span>

<span class="token keyword">import</span> Root<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> rootLoader<span class="token punctuation">,</span>
  action <span class="token keyword">as</span> rootAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/root&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>就是这样！继续并单击“新建”按钮，您应该会看到一条新记录弹出到列表中🥳</p> <p><img src="https://reactrouter.com/_docs/tutorial/08.webp" alt="img"></p> <p>该<code>createContact</code>方法只是创建一个没有名称或数据或任何东西的空联系人。但它仍然创造了一个记录，保证！</p> <blockquote><p>🧐 等等……侧边栏怎么更新的？我们在哪里打电话<code>action</code>？重新获取数据的代码在哪里？在哪里<code>useState</code>，<code>onSubmit</code>和<code>useEffect</code>？！</p></blockquote> <p>这就是“老式网络”编程模型出现的地方。正如我们之前讨论的，<a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>阻止浏览器将请求发送到服务器并将其发送到您的路由<code>action</code>。在 Web 语义中，POST 通常意味着某些数据正在更改。按照惯例，React Router 使用此作为提示，在操作完成后自动重新验证页面上的数据。这意味着您的所有<code>useLoaderData</code>挂钩都会更新，并且 UI 会自动与您的数据保持同步！很酷。</p> <h2 id="加载程序中的-url-参数"><a href="#加载程序中的-url-参数" class="header-anchor">#</a> 加载程序中的 URL 参数</h2> <p>我们应该再次看到我们旧的静态联系页面，但有一个不同：URL 现在有一个真实的 ID 用于记录。</p> <p><img src="https://reactrouter.com/_docs/tutorial/09.webp" alt="img"></p> <p>查看路由配置，路由如下所示：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>请注意<code>:contactId</code>URL 段。冒号 ( <code>:</code>) 具有特殊含义，将其变成“动态段”。动态段将匹配 URL 中该位置的动态（变化的）值，例如联系人 ID。我们将 URL 中的这些值称为“URL 参数”，或简称为“参数”。</p> <p>这些<a href="https://reactrouter.com/en/main/route/loader#params" target="_blank" rel="noopener noreferrer"><code>params</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>使用与动态段匹配的键传递给加载程序。例如，我们的段已命名<code>:contactId</code>，因此值将作为<code>params.contactId</code>.</p> <p>这些参数最常用于按 ID 查找记录。让我们试试看。</p> <p>👉<strong>将加载程序添加到联系人页面并访问数据<code>useLoaderData</code></strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> useLoaderData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">getContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>在路由上配置loader</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> Contact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> contactLoader<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/contact&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/10.webp" alt="img"></p> <h2 id="更新数据"><a href="#更新数据" class="header-anchor">#</a> 更新数据</h2> <p>就像创建数据一样，您可以使用 更新数据<a href="https://reactrouter.com/en/main/components/form" target="_blank" rel="noopener noreferrer">``<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。让我们在 处创建一条新路线<code>contacts/:contactId/edit</code>。同样，我们将从组件开始，然后将其连接到路由配置。</p> <p><strong>创建编辑组件</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/edit.jsx
</code></pre></div><p>👉<strong>添加编辑页面UI</strong></p> <p>没有我们以前没见过的，随意复制/粘贴：</p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Form<span class="token punctuation">,</span> useLoaderData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">EditContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;contact-form&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;First&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;First name&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;first&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;Last&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Last name&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;last&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>last<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Twitter<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;twitter&quot;</span>
          placeholder<span class="token operator">=</span><span class="token string">&quot;@jack&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>twitter<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Avatar <span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          placeholder<span class="token operator">=</span><span class="token string">&quot;https://example.com/avatar.jpg&quot;</span>
          aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Avatar URL&quot;</span>
          type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;avatar&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Notes<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>textarea
          name<span class="token operator">=</span><span class="token string">&quot;notes&quot;</span>
          defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>notes<span class="token punctuation">}</span>
          rows<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Save<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span><span class="token operator">&gt;</span>Cancel<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>添加新的编辑路线</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> EditContact <span class="token keyword">from</span> <span class="token string">&quot;./routes/edit&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/edit&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>我们希望它在根路由的出口中呈现，因此我们将它设为现有子路由的同级。</p> <p>（你可能注意到我们<code>contactLoader</code>为这个路由重用了。这只是因为我们在教程中很懒。没有理由尝试在路由之间共享加载器，它们通常有自己的。）</p> <p>好吧，点击“编辑”按钮给我们这个新的用户界面：</p> <p><img src="https://reactrouter.com/_docs/tutorial/11.webp" alt="img"></p> <h2 id="使用-formdata-更新联系人"><a href="#使用-formdata-更新联系人" class="header-anchor">#</a> 使用 FormData 更新联系人</h2> <p>我们刚刚创建的编辑路由已经渲染了一个表单。更新记录所需要做的就是将一个动作连接到路由。表单将发布到操作中，数据将自动重新验证。</p> <p>👉<strong>为编辑模块添加一个动作</strong></p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> updateContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> updates<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>contactId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>👉<strong>将动作连接到路线</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> EditContact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  action <span class="token keyword">as</span> editAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/edit&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/edit&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> editAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>填写表格，点击保存，你应该会看到这样的东西！（除了眼睛更容易，毛发可能更少。）</p> <p><img src="https://reactrouter.com/_docs/tutorial/12.webp" alt="img"></p> <h2 id="突变讨论"><a href="#突变讨论" class="header-anchor">#</a> 突变讨论</h2> <blockquote><p>😑 它有效，但我不知道这里发生了什么......</p></blockquote> <p>让我们深入挖掘一下......</p> <p>打开<code>src/routes/edit.jsx</code>并查看表单元素。注意他们每个人如何有一个名字：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input
  placeholder<span class="token operator">=</span><span class="token string">&quot;First&quot;</span>
  aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;First name&quot;</span>
  type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span>
  name<span class="token operator">=</span><span class="token string">&quot;first&quot;</span>
  defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>first<span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>如果没有 JavaScript，当表单被提交时，浏览器会在将表单<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>发送到服务器时将其创建并设置为请求的主体。如前所述，React Router 会阻止这种情况并将请求发送到您的操作，包括<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <p>表单中的每个字段都可以使用 访问<code>formData.get(name)</code>。例如，给定上面的输入字段，您可以像这样访问名字和姓氏：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> firstName <span class="token operator">=</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;first&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> lastName <span class="token operator">=</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;last&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>由于我们有一些表单字段，我们过去常常<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer"><code>Object.fromEntries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>将它们全部收集到一个对象中，这正是我们的<code>updateContact</code>函数所需要的。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
updates<span class="token punctuation">.</span>first<span class="token punctuation">;</span> <span class="token comment">// &quot;Some&quot;</span>
updates<span class="token punctuation">.</span>last<span class="token punctuation">;</span> <span class="token comment">// &quot;Name&quot;</span>
</code></pre></div><p>除了<code>action</code>，我们讨论的这些 API 都不是 React Router 提供的：<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Request/formData" target="_blank" rel="noopener noreferrer"><code>request.formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>,<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries" target="_blank" rel="noopener noreferrer"><code>Object.fromEntries</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>都是由网络平台提供的。</p> <p>完成操作后，请注意<a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer"><code>redirect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>最后：</p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> updates <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>formData<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> updates<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>contactId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>加载程序和操作都可以<a href="https://reactrouter.com/en/main/route/loader#returning-responses" target="_blank" rel="noopener noreferrer">返回一个<code>Response</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（有道理，因为它们收到了一个<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>Request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>！）。<a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer"><code>redirect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>助手只是让返回告诉应用更改位置的<a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer">响应变得更容易。<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如果没有客户端路由，如果服务器在 POST 请求后重定向，新页面将获取最新数据并呈现。正如我们之前了解到的，React Router 模拟此模型并在操作后自动重新验证页面上的数据。这就是当我们保存表单时侧边栏会自动更新的原因。没有客户端路由，额外的重新验证代码不存在，因此客户端路由也不需要存在！</p> <h2 id="将新记录重定向到编辑页面"><a href="#将新记录重定向到编辑页面" class="header-anchor">#</a> 将新记录重定向到编辑页面</h2> <p>现在我们知道如何重定向，让我们更新创建新联系人的操作以重定向到编辑页面：</p> <p>👉<strong>重定向到新记录的编辑页面</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContacts<span class="token punctuation">,</span> createContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createContact</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/edit</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在当我们点击“新建”时，我们应该会在编辑页面结束：</p> <p><img src="https://reactrouter.com/_docs/tutorial/13.webp" alt="img"></p> <p>👉<strong>添加少量记录</strong></p> <p>我将使用第一届 Remix Conference 的一流演讲者阵容😁</p> <p><img src="https://reactrouter.com/_docs/tutorial/14.webp" alt="img"></p> <h2 id="活动链接样式"><a href="#活动链接样式" class="header-anchor">#</a> 活动链接样式</h2> <p>现在我们有一堆记录，不清楚我们在侧边栏中查看的是哪一个。我们可以<a href="https://reactrouter.com/en/main/components/nav-link" target="_blank" rel="noopener noreferrer"><code>NavLink</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>用来解决这个问题。</p> <p>👉<strong>在侧边栏中****使用 a<code>NavLink</code></strong></p> <p><code>src/rootes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Outlet<span class="token punctuation">,</span>
  NavLink<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>

        <span class="token operator">&lt;</span>nav<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span>contacts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">contact</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>contact<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>NavLink
                    to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">contacts/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>contact<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
                    className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isActive<span class="token punctuation">,</span> isPending <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
                      isActive
                        <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span>
                        <span class="token operator">:</span> isPending
                        <span class="token operator">?</span> <span class="token string">&quot;pending&quot;</span>
                        <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
                    <span class="token punctuation">}</span>
                  <span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* other code */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>请注意，我们正在将一个函数传递给<code>className</code>. 当用户位于 中的 URL 时，则为<code>NavLink</code>真<code>isActive</code>。当它<em>即将</em>处于活动状态（数据仍在加载）时，则为<code>isPending</code>真。这使我们能够轻松地指示用户所在的位置，并对已单击但我们仍在等待数据加载的链接提供即时反馈。</p> <p><img src="https://reactrouter.com/_docs/tutorial/15.webp" alt="img"></p> <h2 id="全局待定用户界面"><a href="#全局待定用户界面" class="header-anchor">#</a> 全局待定用户界面</h2> <p>当用户浏览应用程序时，React Router 将在为下一页加载数据时*保留旧页面。*您可能已经注意到，当您在列表之间单击时，该应用感觉有点反应迟钝。让我们为用户提供一些反馈，这样应用程序就不会感觉反应迟钝。</p> <p>React Router 在幕后管理所有状态，并揭示构建动态 Web 应用程序所需的部分。在这种情况下，我们将使用<a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>钩子。</p> <p>👉**<code>useNavigation</code>添加全局挂起的 UI**</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
  useNavigation<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div
        id<span class="token operator">=</span><span class="token string">&quot;detail&quot;</span>
        className<span class="token operator">=</span><span class="token punctuation">{</span>
          navigation<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>返回当前导航状态：它可以是<code>&quot;idle&quot; | &quot;submitting&quot; | &quot;loading&quot;</code>.</p> <p>在我们的例子中，<code>&quot;loading&quot;</code>如果我们不空闲，我们会向应用程序的主要部分添加一个类。然后 CSS 在短暂的延迟后添加一个漂亮的淡入淡出（以避免闪烁 UI 以进行快速加载）。不过你可以做任何你想做的事，比如在顶部显示一个微调器或加载栏。</p> <p><img src="https://reactrouter.com/_docs/tutorial/16.webp" alt="img"></p> <p>请注意，我们的数据模型 ( <code>src/contact.js</code>) 具有客户端缓存，因此第二次导航到同一联系人的速度很快。这种行为<em>不是</em>React Router，它会重新加载更改路由的数据，无论您以前是否去过那里。但是，它确实避免在导航期间为<em>不变的路线（如列表）调用加载器。</em></p> <h2 id="删除记录"><a href="#删除记录" class="header-anchor">#</a> 删除记录</h2> <p>如果我们查看联系人路由中的代码，我们会发现删除按钮如下所示：</p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Form
  method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span>
  action<span class="token operator">=</span><span class="token string">&quot;destroy&quot;</span>
  onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span><span class="token function">confirm</span><span class="token punctuation">(</span>
        <span class="token string">&quot;Please confirm you want to delete this record.&quot;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Delete<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
</code></pre></div><p>注意<code>action</code>要点<code>&quot;destroy&quot;</code>。像<code>&lt;Link to&gt;</code>，<code>&lt;Form action&gt;</code>可以取一个<em>相对</em>值。由于表单是在 中呈现的<code>contact/:contactId</code>，因此相关操作<code>destroy</code>将<code>contact/:contactId/destroy</code>在单击时提交表单。</p> <p>此时您应该知道使删除按钮起作用所需知道的一切。也许在继续之前试一试？你需要：</p> <ol><li>一条新路线</li> <li>在<code>action</code>那条路线上</li> <li><code>deleteContact</code>从<code>src/contacts.js</code></li></ol> <p>👉<strong>创建“destroy”路由模块</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/destroy.jsx
</code></pre></div><p>👉<strong>添加销毁动作</strong></p> <p><code>src/routes/destory.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> redirect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> deleteContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>将 destroy 路由添加到路由配置中</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/* existing code */</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token keyword">as</span> destroyAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/destroy&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">/* existing root route props */</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token comment">/* existing routes */</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/destroy&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> destroyAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* existing code */</span>
</code></pre></div><p>好的，导航到记录并单击“删除”按钮。有用！</p> <blockquote><p>😀 我仍然很困惑为什么这一切都有效</p></blockquote> <p>当用户点击提交按钮时：</p> <ol><li><code>&lt;Form&gt;</code>阻止向服务器发送新 POST 请求的默认浏览器行为，而是通过创建带有客户端路由的 POST 请求来模拟浏览器</li> <li><code>&lt;Form action=&quot;destroy&quot;&gt;</code>匹配新路由并向其<code>&quot;contacts/:contactId/destroy&quot;</code>发送请求</li> <li>动作重定向后，React Router 调用页面上数据的所有加载器以获取最新值（这就是“重新验证”）。<code>useLoaderData</code>返回新值并导致组件更新！</li></ol> <p>添加一个表单，添加一个动作，React Router 会完成剩下的工作。</p> <h2 id="上下文错误"><a href="#上下文错误" class="header-anchor">#</a> 上下文错误</h2> <p>只是为了好玩，在销毁操作中抛出一个错误：</p> <p><code>src/routes/destory.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;oh dang!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">deleteContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/17.webp" alt="img"></p> <p>认得那个屏幕吗？是我们<a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以前的 然而，用户除了点击刷新之外，实际上无法做任何事情来从该屏幕恢复。</p> <p>让我们为 destroy 路由创建上下文错误消息：</p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">[</span>
  <span class="token comment">/* other routes */</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId/destroy&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> destroyAction<span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Oops<span class="token operator">!</span> There was an error<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>现在再试一次：</p> <p><img src="https://reactrouter.com/_docs/tutorial/18.webp" alt="img"></p> <p>我们的用户现在有更多选择，而不是猛烈刷新，他们可以继续与页面上没有问题的部分进行交互🙌</p> <p>因为 destroy 路由有自己的路由<code>errorElement</code>并且是根路由的子路由，所以错误将呈现在那里而不是根路由。您可能已经注意到，这些错误冒泡到最近的<code>errorElement</code>. 只要您在根部有一个，就可以添加任意多的或少的。</p> <h2 id="索引路线"><a href="#索引路线" class="header-anchor">#</a> 索引路线</h2> <p>当我们加载应用程序时，您会注意到列表右侧有一个很大的空白页。</p> <p><img src="https://reactrouter.com/_docs/tutorial/19.webp" alt="img"></p> <p>当一条路线有孩子，而你在父路线的路径上时，<code>&lt;Outlet&gt;</code>没有任何东西可以渲染，因为没有孩子匹配。您可以将索引路由视为填充该空间的默认子路由。</p> <p>👉<strong>创建索引路由模块</strong></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">touch</span> src/routes/index.jsx
</code></pre></div><p>👉<strong>填写索引组件的元素</strong></p> <p>随意复制粘贴，这里没什么特别的。</p> <p><code>src/routes/index.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>p id<span class="token operator">=</span><span class="token string">&quot;zero-state&quot;</span><span class="token operator">&gt;</span>
      This is a demo <span class="token keyword">for</span> React Router<span class="token punctuation">.</span>
      <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
      Check out<span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;https://reactrouter.com&quot;</span><span class="token operator">&gt;</span>
        the docs at reactrouter<span class="token punctuation">.</span>com
      <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>👉<strong>配置索引路由</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> Index <span class="token keyword">from</span> <span class="token string">&quot;./routes/index&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/* existing routes */</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>请注意<a href="https://reactrouter.com/en/main/route/route#index" target="_blank" rel="noopener noreferrer"><code>{ index:true }</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>而不是<a href="https://reactrouter.com/en/main/route/route#path" target="_blank" rel="noopener noreferrer"><code>{ path: &quot;&quot; }</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。这告诉路由器在用户位于父路由的确切路径时匹配并呈现此路由，因此在<code>&lt;Outlet&gt;</code>.</p> <p><img src="https://reactrouter.com/_docs/tutorial/20.webp" alt="img"></p> <p>瞧！没有更多的空白。将仪表板、统计信息、提要等放在索引路由中是很常见的。他们也可以参与数据加载。</p> <h2 id="取消按钮"><a href="#取消按钮" class="header-anchor">#</a> 取消按钮</h2> <p>在编辑页面上，我们有一个尚未执行任何操作的取消按钮。我们希望它做与浏览器的后退按钮相同的事情。</p> <p>我们需要在按钮上以及<a href="https://reactrouter.com/en/main/hooks/use-navigate" target="_blank" rel="noopener noreferrer"><code>useNavigate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来自 React Router 的点击处理程序。</p> <p>👉<strong>添加取消按钮单击处理程序<code>useNavigate</code></strong></p> <p><code>src/routes/edit.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  Form<span class="token punctuation">,</span>
  useLoaderData<span class="token punctuation">,</span>
  redirect<span class="token punctuation">,</span>
  useNavigate<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Edit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigate <span class="token operator">=</span> <span class="token function">useNavigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;contact-form&quot;</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>

      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>Save<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button
          type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span>
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&gt;</span>
          Cancel
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，当用户单击“取消”时，他们将在浏览器历史记录中返回一个条目。</p> <blockquote><p>🧐 为什么按钮上没有<code>event.preventDefault</code>？</p></blockquote> <p>A <code>&lt;button type=&quot;button&quot;&gt;</code>，虽然看似多余，却是防止按钮提交其表单的 HTML 方式。</p> <p>还有两个功能。我们在最后阶段！</p> <h2 id="url-搜索参数和-get-提交"><a href="#url-搜索参数和-get-提交" class="header-anchor">#</a> URL 搜索参数和 GET 提交</h2> <p>到目前为止，我们所有的交互式 UI 要么是更改 URL 的链接，要么是将数据发布到操作的表单。搜索字段很有趣，因为它是两者的混合体：它是一个表单，但它只更改 URL，不更改数据。</p> <p>现在它只是一个普通的 HTML <code>&lt;form&gt;</code>，而不是 React Router <code>&lt;Form&gt;</code>。让我们看看默认情况下浏览器对它做了什么：</p> <p>👉<strong>在搜索字段中输入名称，然后按回车键</strong></p> <p>请注意浏览器的 URL 现在包含您在 URL 中的查询作为<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer">URLSearchParams<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>http://127.0.0.1:5173/?q<span class="token operator">=</span>ryan
</code></pre></div><p>如果我们查看搜索表单，它看起来像这样：</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input
    id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
    aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
    placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
    type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
    name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span> aria<span class="token operator">-</span>hidden hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span> aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
</code></pre></div><p>正如我们之前所见，浏览器可以通过<code>name</code>输入元素的属性来序列化表单。此输入的名称是<code>q</code>，这就是 URL 具有 的原因<code>?q=</code>。如果我们将其命名，<code>search</code>则 URL 将是<code>?search=</code>.</p> <p>请注意，此表单与我们使用的其他表单不同，它没有<code>&lt;form method=&quot;post&quot;&gt;</code>. 默认<code>method</code>值为<code>&quot;get&quot;</code>。这意味着当浏览器创建对下一个文档的请求时，它不会将表单数据放入请求 POST 正文中，而是放入<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>GET 请求中。</p> <h2 id="使用客户端路由获取提交"><a href="#使用客户端路由获取提交" class="header-anchor">#</a> 使用客户端路由获取提交</h2> <p>让我们使用客户端路由来提交此表单并在我们现有的加载程序中过滤列表。</p> <p>👉<strong>更改<code>&lt;form&gt;</code>为<code>&lt;Form&gt;</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>input
    id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
    aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
    placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
    type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
    name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span> aria<span class="token operator">-</span>hidden hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;sr-only&quot;</span> aria<span class="token operator">-</span>live<span class="token operator">=</span><span class="token string">&quot;polite&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
</code></pre></div><p>👉<strong>过滤列表是否有URLSearchParams</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/21.webp" alt="img"></p> <p>因为这是 GET 而不是 POST，React Router<em>不会</em>调用<code>action</code>. 提交 GET 表单与单击链接相同：只是 URL 发生了变化。这就是为什么我们为过滤添加的代码是在 中<code>loader</code>，而不是<code>action</code>这条路由的。</p> <p>这也意味着它是一个正常的页面导航。您可以单击后退按钮返回到您所在的位置。</p> <h2 id="将-url-同步到表单状态"><a href="#将-url-同步到表单状态" class="header-anchor">#</a> 将 URL 同步到表单状态</h2> <p>这里有几个用户体验问题，我们可以快速解决。</p> <ol><li>如果您在搜索后单击返回，即使列表不再被过滤，表单字段仍具有您输入的值。</li> <li>如果您在搜索后刷新页面，即使列表被过滤，表单字段中也不再有值</li></ol> <p>换句话说，URL 和我们的表单状态不同步。</p> <p>👉从你的加载器<strong>返回<code>q</code>并将其设置为搜索字段默认值</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> q <span class="token operator">=</span> url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> contacts <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContacts</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>q<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这解决了问题（2）。如果您现在刷新页面，输入字段将显示查询。</p> <p><img src="https://reactrouter.com/_docs/tutorial/21.webp" alt="img"></p> <p>现在对于问题 (1)，单击后退按钮并更新输入。我们可以<code>useEffect</code>从 React 中引入，直接在 DOM 中操作表单的状态。</p> <p>👉 将<strong>输入值与 URL 搜索参数同步</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> q<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>🤔 你不应该为此使用受控组件和 React State 吗？</p></blockquote> <p>您当然可以将此作为一个受控组件来执行，但是对于相同的行为，您最终会变得更加复杂。您不控制 URL，用户使用后退/前进按钮来控制。受控组件会有更多的同步点。</p> <p>注意控制输入现在需要三个同步点而不是一个。行为相同，但代码更复杂。</p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useEffect<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>query<span class="token punctuation">,</span> setQuery<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setQuery</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              value<span class="token operator">=</span><span class="token punctuation">{</span>query<span class="token punctuation">}</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setQuery</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="提交表格onchange"><a href="#提交表格onchange" class="header-anchor">#</a> 提交表格<code>onChange</code></h2> <p>我们要在这里做出产品决策。对于此 UI，我们可能更愿意在每次击键时进行过滤，而不是在显式提交表单时进行过滤。</p> <p>我们已经看到，为此<code>useNavigate</code>我们将使用它的表亲。<a href="https://reactrouter.com/en/main/hooks/use-submit" target="_blank" rel="noopener noreferrer"><code>useSubmit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
  useSubmit<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> submit <span class="token operator">=</span> <span class="token function">useSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token string">&quot;Search contacts&quot;</span>
              placeholder<span class="token operator">=</span><span class="token string">&quot;Search&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;search&quot;</span>
              name<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              defaultValue<span class="token operator">=</span><span class="token punctuation">{</span>q<span class="token punctuation">}</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">submit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>form<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，当您键入时，表单会自动提交！</p> <p>注意 的参数<a href="https://reactrouter.com/en/main/hooks/use-submit" target="_blank" rel="noopener noreferrer"><code>submit</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。我们路过<code>event.currentTarget.form</code>。<code>currentTarget</code>是事件附加到的 DOM 节点，是<code>currentTarget.form</code>输入的父表单节点。该<code>submit</code>函数将序列化并提交您传递给它的任何表单。</p> <h2 id="添加搜索微调器"><a href="#添加搜索微调器" class="header-anchor">#</a> 添加搜索微调器</h2> <p>在生产应用程序中，此搜索可能会在太大而无法一次发送所有内容的数据库中查找记录并过滤客户端。这就是为什么这个演示有一些伪造的网络延迟。</p> <p>没有任何加载指示器，搜索感觉有点迟钝。即使我们可以使我们的数据库更快，我们也总是会遇到用户的网络延迟问题，并且超出我们的控制范围。为了获得更好的用户体验，让我们为搜索添加一些即时 UI 反馈。为此，我们将<a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>再次使用。</p> <p>👉<strong>添加搜索微调器</strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> contacts<span class="token punctuation">,</span> q <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> submit <span class="token operator">=</span> <span class="token function">useSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> searching <span class="token operator">=</span>
    navigation<span class="token punctuation">.</span>location <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>navigation<span class="token punctuation">.</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>
      <span class="token string">&quot;q&quot;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;q&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token operator">=</span> q<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              className<span class="token operator">=</span><span class="token punctuation">{</span>searching <span class="token operator">?</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span>
              <span class="token comment">// existing code</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div
              id<span class="token operator">=</span><span class="token string">&quot;search-spinner&quot;</span>
              aria<span class="token operator">-</span>hidden
              hidden<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">!</span>searching<span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/22.webp" alt="img"></p> <p>当<code>navigation.location</code>应用程序导航到新 URL 并为其加载数据时，将显示。当不再有挂起的导航时，它就会消失。</p> <h2 id="管理历史栈"><a href="#管理历史栈" class="header-anchor">#</a> 管理历史栈</h2> <p>现在每次击键都会提交表单，如果我们输入字符“seba”然后用退格键删除它们，我们最终会在堆栈中得到 7 个新条目 😂。我们绝对不想要这个</p> <p><img src="https://reactrouter.com/_docs/tutorial/23.webp" alt="img"></p> <p>我们可以通过用下一页<em>替换</em>历史堆栈中的当前条目来避免这种情况，而不是推入它。</p> <p>👉<strong>使用<code>replace</code>于<code>submit</code></strong></p> <p><code>src/routes/root.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;sidebar&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>React Router Contacts<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Form id<span class="token operator">=</span><span class="token string">&quot;search-form&quot;</span> role<span class="token operator">=</span><span class="token string">&quot;search&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              id<span class="token operator">=</span><span class="token string">&quot;q&quot;</span>
              <span class="token comment">// existing code</span>
              onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> isFirstSearch <span class="token operator">=</span> q <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                <span class="token function">submit</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">.</span>form<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                  <span class="token literal-property property">replace</span><span class="token operator">:</span> <span class="token operator">!</span>isFirstSearch<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span><span class="token comment">/* existing code */</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们只想替换搜索结果，而不是我们开始搜索之前的页面，所以我们快速检查这是否是第一次搜索，然后决定替换。</p> <p>每次击键不再创建新条目，因此用户可以从搜索结果中单击返回，而无需单击 7 次 😀。</p> <h2 id="没有导航的突变"><a href="#没有导航的突变" class="header-anchor">#</a> 没有导航的突变</h2> <p>到目前为止，我们所有的突变（我们更改数据的时间）都使用导航的形式，在历史堆栈中创建新条目。虽然这些用户流很常见，但想要在<em>不</em>引起导航的情况下更改数据也同样常见。</p> <p>对于这些情况，我们有<a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer"><code>useFetcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>办法。它允许我们在不引起导航的情况下与加载程序和操作进行通信。</p> <p>联系页面上的 ★ 按钮对此很有意义。我们不是在创建或删除新记录，我们不想更改页面，我们只是想更改我们正在查看的页面上的数据。</p> <p>👉<strong>将表单更改为fetcher<code>&lt;Favorite&gt;</code>表单</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  useLoaderData<span class="token punctuation">,</span>
  Form<span class="token punctuation">,</span>
  useFetcher<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// existing code</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;★&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☆&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们来的时候可能想看看那个表格。与往常一样，我们的表单具有带有<code>name</code>道具的字段。此表单将发送<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一个<code>favorite</code>密钥，该密钥是<code>&quot;true&quot; | &quot;false&quot;</code>. 因为它有<code>method=&quot;post&quot;</code>它会调用操作。由于没有<code>&lt;fetcher.Form action=&quot;...&quot;&gt;</code>道具，它将发布到呈现表单的路线。</p> <p>👉<strong>创建动作</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getContact<span class="token punctuation">,</span> updateContact <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../contacts&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">updateContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">favorite</span><span class="token operator">:</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;favorite&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Contact</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// existing code</span>
<span class="token punctuation">}</span>
</code></pre></div><p>很简单。从请求中提取表单数据并将其发送到数据模型。</p> <p>👉<strong>配置路由的新动作</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>
<span class="token keyword">import</span> Contact<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  loader <span class="token keyword">as</span> contactLoader<span class="token punctuation">,</span>
  action <span class="token keyword">as</span> contactAction<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./routes/contact&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
        <span class="token literal-property property">action</span><span class="token operator">:</span> contactAction<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">/* existing code */</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>好了，我们准备好点击用户名旁边的星号了！</p> <p><img src="https://reactrouter.com/_docs/tutorial/24.webp" alt="img"></p> <p>检查一下，两颗星都会自动更新。我们的新功能<code>&lt;fetcher.Form method=&quot;post&quot;&gt;</code>几乎与<code>&lt;Form&gt;</code>我们一直使用的功能完全相同：它调用操作，然后自动重新验证所有数据——甚至您的错误也会以相同的方式被捕获。</p> <p>但有一个关键区别，它不是导航——URL 不会改变，历史堆栈不受影响。</p> <h2 id="乐观的用户界面"><a href="#乐观的用户界面" class="header-anchor">#</a> 乐观的用户界面</h2> <p>您可能注意到当我们单击上一节中的收藏按钮时，该应用感觉有点反应迟钝。再一次，我们添加了一些网络延迟，因为您将在现实世界中遇到它！</p> <p>为了给用户一些反馈，我们可以将星星置于加载状态<a href="https://reactrouter.com/en/main/hooks/use-fetcher#fetcherstate" target="_blank" rel="noopener noreferrer"><code>fetcher.state</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（与之前非常相似<code>navigation.state</code>），但这次我们可以做得更好。我们可以使用一种称为“乐观 UI”的策略</p> <p>提取器知道提交给操作的表单数据，因此您可以在 上使用它<code>fetcher.formData</code>。我们将使用它来立即更新星星的状态，即使网络尚未完成。如果更新最终失败，UI 将恢复为真实数据。</p> <p>👉从中<strong>读取乐观值<code>fetcher.formData</code></strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// existing code</span>

<span class="token keyword">function</span> <span class="token function">Favorite</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> contact <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> favorite <span class="token operator">=</span> contact<span class="token punctuation">.</span>favorite<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>fetcher<span class="token punctuation">.</span>formData<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    favorite <span class="token operator">=</span> fetcher<span class="token punctuation">.</span>formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;favorite&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        name<span class="token operator">=</span><span class="token string">&quot;favorite&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;false&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">}</span>
        aria<span class="token operator">-</span>label<span class="token operator">=</span><span class="token punctuation">{</span>
          favorite
            <span class="token operator">?</span> <span class="token string">&quot;Remove from favorites&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Add to favorites&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>favorite <span class="token operator">?</span> <span class="token string">&quot;★&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;☆&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果您现在单击该按钮，您应该会看到星星<em>立即</em>更改为新状态。我们不是总是渲染实际数据，而是检查 fetcher 是否有任何<code>formData</code>提交，如果有，我们将使用它。操作完成后，<code>fetcher.formData</code>将不再存在，我们将返回使用实际数据。所以即使你在乐观的 UI 代码中写了错误，它最终也会回到正确的状态🥹</p> <h2 id="未找到数据"><a href="#未找到数据" class="header-anchor">#</a> 未找到数据</h2> <p>如果我们尝试加载的联系人不存在会怎样？</p> <p><img src="https://reactrouter.com/_docs/tutorial/25.webp" alt="img"></p> <p><a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>当我们尝试呈现<code>null</code>联系人时，我们的根源是捕捉到这个意外错误。很高兴错误得到了妥善处理，但我们可以做得更好！</p> <p>每当您在加载程序或操作中遇到预期的错误情况时（例如数据不存在），您都可以<code>throw</code>. 调用堆栈将中断，React Router 将捕获它，并呈现错误路径。我们甚至不会尝试提供<code>null</code>联系方式。</p> <p>👉<strong>在加载程序中抛出 404 响应</strong></p> <p><code>src/routes/contact.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> contact <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getContact</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>contactId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>contact<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">404</span><span class="token punctuation">,</span>
      <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> contact<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://reactrouter.com/_docs/tutorial/27.webp" alt="img"></p> <p>我们没有使用 遇到渲染错误<code>Cannot read properties of null</code>，而是完全避免组件并渲染错误路径，告诉用户更具体的事情。</p> <p>这会让你的快乐之路保持快乐。你的路由元素不需要关心错误和加载状态。</p> <h2 id="无路径路线"><a href="#无路径路线" class="header-anchor">#</a> 无路径路线</h2> <p>最后一件事。我们看到的最后一个错误页面如果呈现在根插座内而不是整个页面内会更好。事实上，我们所有子路由中的每一个错误在 outlet 中都会更好，这样用户就有了比点击刷新更多的选择。</p> <p>我们希望它看起来像这样：</p> <p><img src="https://reactrouter.com/_docs/tutorial/26.webp" alt="img"></p> <p>我们可以将错误元素添加到每个子路由中，但由于它们都是相同的错误页面，因此不推荐这样做。</p> <p>有一种更清洁的方法。路由可以在<em>没有</em>路径的情况下使用，这让它们可以参与 UI 布局，而不需要 URL 中的新路径段。看看这个：</p> <p>👉<strong>将子路由包裹在无路径路由中</strong></p> <p><code>src/main.jsx</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> rootLoader<span class="token punctuation">,</span>
    <span class="token literal-property property">action</span><span class="token operator">:</span> rootAction<span class="token punctuation">,</span>
    <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">errorElement</span><span class="token operator">:</span> <span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contacts/:contactId&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> contactLoader<span class="token punctuation">,</span>
            <span class="token literal-property property">action</span><span class="token operator">:</span> contactAction<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token comment">/* the rest of the routes */</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当子路由中抛出任何错误时，我们新的无路径路由将捕获它并呈现，保留根路由的 UI！</p> <h2 id="jsx-路线"><a href="#jsx-路线" class="header-anchor">#</a> JSX 路线</h2> <p>对于我们的最后一个技巧，许多人更喜欢使用 JSX 配置他们的路由。你可以用<code>createRoutesFromElements</code>. 在配置路由时，JSX 或对象在功能上没有区别，这只是一种风格偏好。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  createRoutesFromElements<span class="token punctuation">,</span>
  createBrowserRouter<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span>
  <span class="token function">createRoutesFromElements</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
      path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
      element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      loader<span class="token operator">=</span><span class="token punctuation">{</span>rootLoader<span class="token punctuation">}</span>
      action<span class="token operator">=</span><span class="token punctuation">{</span>rootAction<span class="token punctuation">}</span>
      errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorPage <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route index element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Index <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId&quot;</span>
          element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
          loader<span class="token operator">=</span><span class="token punctuation">{</span>contactLoader<span class="token punctuation">}</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>contactAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId/edit&quot;</span>
          element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>EditContact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
          loader<span class="token operator">=</span><span class="token punctuation">{</span>contactLoader<span class="token punctuation">}</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>editAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;contacts/:contactId/destroy&quot;</span>
          action<span class="token operator">=</span><span class="token punctuation">{</span>destroyAction<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <p>就是这样！感谢您尝试 React Router。我们希望本教程能为您提供一个坚实的开端，以构建出色的用户体验。你可以用 React Router 做更多的事情，所以一定要检查所有的 API 😀</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/baimingxuan/react-router6-doc/edit/main/docs/start/tutorial.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2023/1/29 下午3:19:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/react-router6-doc/start/overview.html" class="prev">
        功能概述
      </a></span> <span class="next"><a href="/react-router6-doc/start/faqs.html">
        常见问题
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/react-router6-doc/assets/js/app.3977e6ed.js" defer></script><script src="/react-router6-doc/assets/js/2.6430ac10.js" defer></script><script src="/react-router6-doc/assets/js/74.b28de77c.js" defer></script>
  </body>
</html>
