<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>客户端路由 | React Router6 中文文档</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="文档内容详细翻译自官方英文文档">
    
    <link rel="preload" href="/react-router6-doc/assets/css/0.styles.9c14763a.css" as="style"><link rel="preload" href="/react-router6-doc/assets/js/app.3977e6ed.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/2.6430ac10.js" as="script"><link rel="preload" href="/react-router6-doc/assets/js/73.e5cc737c.js" as="script"><link rel="prefetch" href="/react-router6-doc/assets/js/10.3ecfd4b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/11.96744b78.js"><link rel="prefetch" href="/react-router6-doc/assets/js/12.7ca7492b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/13.ed88fa50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/14.c32c4d27.js"><link rel="prefetch" href="/react-router6-doc/assets/js/15.492bdbe6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/16.0afe03b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/17.ee2650c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/18.38f3184b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/19.3d95686d.js"><link rel="prefetch" href="/react-router6-doc/assets/js/20.e006914b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/21.2914f993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/22.c25c5262.js"><link rel="prefetch" href="/react-router6-doc/assets/js/23.2959ad25.js"><link rel="prefetch" href="/react-router6-doc/assets/js/24.b6d79d39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/25.ac31ef72.js"><link rel="prefetch" href="/react-router6-doc/assets/js/26.872cb077.js"><link rel="prefetch" href="/react-router6-doc/assets/js/27.64e94538.js"><link rel="prefetch" href="/react-router6-doc/assets/js/28.8fc4bd95.js"><link rel="prefetch" href="/react-router6-doc/assets/js/29.472d4bce.js"><link rel="prefetch" href="/react-router6-doc/assets/js/3.ca35af39.js"><link rel="prefetch" href="/react-router6-doc/assets/js/30.eb78e0e6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/31.f0041706.js"><link rel="prefetch" href="/react-router6-doc/assets/js/32.d7ea5513.js"><link rel="prefetch" href="/react-router6-doc/assets/js/33.6af9c91e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/34.f72f8b29.js"><link rel="prefetch" href="/react-router6-doc/assets/js/35.4f205482.js"><link rel="prefetch" href="/react-router6-doc/assets/js/36.7e81b201.js"><link rel="prefetch" href="/react-router6-doc/assets/js/37.189e63dd.js"><link rel="prefetch" href="/react-router6-doc/assets/js/38.7b2282a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/39.dfa41823.js"><link rel="prefetch" href="/react-router6-doc/assets/js/4.3357b40a.js"><link rel="prefetch" href="/react-router6-doc/assets/js/40.58e1cc61.js"><link rel="prefetch" href="/react-router6-doc/assets/js/41.ba56822c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/42.ddd0d283.js"><link rel="prefetch" href="/react-router6-doc/assets/js/43.449a8b8e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/44.e9602134.js"><link rel="prefetch" href="/react-router6-doc/assets/js/45.703d86c7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/46.2b4813c8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/47.33b902b8.js"><link rel="prefetch" href="/react-router6-doc/assets/js/48.076c7084.js"><link rel="prefetch" href="/react-router6-doc/assets/js/49.ca3844b6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/5.e084b39e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/50.cb28fb54.js"><link rel="prefetch" href="/react-router6-doc/assets/js/51.a9bf92aa.js"><link rel="prefetch" href="/react-router6-doc/assets/js/52.abb71d57.js"><link rel="prefetch" href="/react-router6-doc/assets/js/53.f28b86ab.js"><link rel="prefetch" href="/react-router6-doc/assets/js/54.431230ac.js"><link rel="prefetch" href="/react-router6-doc/assets/js/55.6d416534.js"><link rel="prefetch" href="/react-router6-doc/assets/js/56.5247885e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/57.3468a0a6.js"><link rel="prefetch" href="/react-router6-doc/assets/js/58.f6aac83e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/59.9802116c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/6.aeb7dc84.js"><link rel="prefetch" href="/react-router6-doc/assets/js/60.07cb5490.js"><link rel="prefetch" href="/react-router6-doc/assets/js/61.2743a407.js"><link rel="prefetch" href="/react-router6-doc/assets/js/62.5fa1707e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/63.1d468a1f.js"><link rel="prefetch" href="/react-router6-doc/assets/js/64.e42e4d82.js"><link rel="prefetch" href="/react-router6-doc/assets/js/65.4b5065c1.js"><link rel="prefetch" href="/react-router6-doc/assets/js/66.9c218cc2.js"><link rel="prefetch" href="/react-router6-doc/assets/js/67.c74f8ad3.js"><link rel="prefetch" href="/react-router6-doc/assets/js/68.976323b0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/69.a6de7974.js"><link rel="prefetch" href="/react-router6-doc/assets/js/7.79da1235.js"><link rel="prefetch" href="/react-router6-doc/assets/js/70.5323e7c9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/71.1eb10979.js"><link rel="prefetch" href="/react-router6-doc/assets/js/72.fd9f048e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/74.b28de77c.js"><link rel="prefetch" href="/react-router6-doc/assets/js/75.205022f9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/76.302640ff.js"><link rel="prefetch" href="/react-router6-doc/assets/js/77.bafe70a0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/78.25f09583.js"><link rel="prefetch" href="/react-router6-doc/assets/js/79.943e4f2e.js"><link rel="prefetch" href="/react-router6-doc/assets/js/8.8b6ff993.js"><link rel="prefetch" href="/react-router6-doc/assets/js/80.b53f9e50.js"><link rel="prefetch" href="/react-router6-doc/assets/js/81.666b3df7.js"><link rel="prefetch" href="/react-router6-doc/assets/js/82.3b2246d5.js"><link rel="prefetch" href="/react-router6-doc/assets/js/83.2eca4ef0.js"><link rel="prefetch" href="/react-router6-doc/assets/js/84.e4793f9b.js"><link rel="prefetch" href="/react-router6-doc/assets/js/85.9812b3b9.js"><link rel="prefetch" href="/react-router6-doc/assets/js/9.33f377fb.js">
    <link rel="stylesheet" href="/react-router6-doc/assets/css/0.styles.9c14763a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-router6-doc/" class="home-link router-link-active"><!----> <span class="site-name">React Router6 中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/baimingxuan/react-router6-doc" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/start/overview" class="sidebar-heading clickable open active"><span>快速上手</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/start/overview.html" aria-current="page" class="active sidebar-link">功能概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#客户端路由" class="sidebar-link">客户端路由</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#嵌套路由" class="sidebar-link">嵌套路由</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#动态细分" class="sidebar-link">动态细分</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#排名路线匹配" class="sidebar-link">排名路线匹配</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#活动链接" class="sidebar-link">活动链接</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#相关链接" class="sidebar-link">相关链接</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#数据加载" class="sidebar-link">数据加载</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#重定向" class="sidebar-link">重定向</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#待定导航用户界面" class="sidebar-link">待定导航用户界面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#骨架用户界面-suspense" class="sidebar-link">骨架用户界面&lt;Suspense&gt;</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#数据突变" class="sidebar-link">数据突变</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#数据重新验证" class="sidebar-link">数据重新验证</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#忙碌指示灯" class="sidebar-link">忙碌指示灯</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#乐观的用户界面" class="sidebar-link">乐观的用户界面</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#数据获取器" class="sidebar-link">数据获取器</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#竞争条件处理" class="sidebar-link">竞争条件处理</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#错误处理" class="sidebar-link">错误处理</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#滚动恢复" class="sidebar-link">滚动恢复</a></li><li class="sidebar-sub-header"><a href="/react-router6-doc/start/overview.html#网络标准-api" class="sidebar-link">网络标准 API</a></li></ul></li><li><a href="/react-router6-doc/start/tutorial.html" class="sidebar-link">教程</a></li><li><a href="/react-router6-doc/start/faqs.html" class="sidebar-link">常见问题</a></li><li><a href="/react-router6-doc/start/concepts.html" class="sidebar-link">核心概念</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router/picking-a-router" class="sidebar-heading clickable"><span>Router</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router/picking-a-router.html" class="sidebar-link">选择Router</a></li><li><a href="/react-router6-doc/router/create-browser-router.html" class="sidebar-link">createBrowserRouter</a></li><li><a href="/react-router6-doc/router/create-hash-router.html" class="sidebar-link">createHashRouter</a></li><li><a href="/react-router6-doc/router/create-memory-router.html" class="sidebar-link">createMemoryRouter</a></li><li><a href="/react-router6-doc/router/router-provider.html" class="sidebar-link">RouterProvider</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/router-components/browser-router" class="sidebar-heading clickable"><span>Router组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/router-components/browser-router.html" class="sidebar-link">BrowserRouter</a></li><li><a href="/react-router6-doc/router-components/hash-router.html" class="sidebar-link">HashRouter</a></li><li><a href="/react-router6-doc/router-components/memory-router.html" class="sidebar-link">MemoryRouter</a></li><li><a href="/react-router6-doc/router-components/native-router.html" class="sidebar-link">NativeRouter</a></li><li><a href="/react-router6-doc/router-components/router.html" class="sidebar-link">router</a></li><li><a href="/react-router6-doc/router-components/static-router.html" class="sidebar-link">StaticRouter</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/route/route" class="sidebar-heading clickable"><span>route</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/route/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/route/action.html" class="sidebar-link">action</a></li><li><a href="/react-router6-doc/route/error-element.html" class="sidebar-link">errorElement</a></li><li><a href="/react-router6-doc/route/loader.html" class="sidebar-link">Loader</a></li><li><a href="/react-router6-doc/route/should-revalidate.html" class="sidebar-link">shouldRevalidate</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/components/await" class="sidebar-heading clickable"><span>组件</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/components/await.html" class="sidebar-link">Await</a></li><li><a href="/react-router6-doc/components/form.html" class="sidebar-link">Form</a></li><li><a href="/react-router6-doc/components/link.html" class="sidebar-link">Link</a></li><li><a href="/react-router6-doc/components/link-native.html" class="sidebar-link">Link(RN)</a></li><li><a href="/react-router6-doc/components/nav-link.html" class="sidebar-link">NavLink</a></li><li><a href="/react-router6-doc/components/navigate.html" class="sidebar-link">Navigate</a></li><li><a href="/react-router6-doc/components/outlet.html" class="sidebar-link">Outlet</a></li><li><a href="/react-router6-doc/components/route.html" class="sidebar-link">Route</a></li><li><a href="/react-router6-doc/components/routes.html" class="sidebar-link">Routes</a></li><li><a href="/react-router6-doc/components/scroll-restoration.html" class="sidebar-link">ScrollRestoration</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/hooks/use-action-data" class="sidebar-heading clickable"><span>钩子函数</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/hooks/use-action-data.html" class="sidebar-link">useActionData</a></li><li><a href="/react-router6-doc/hooks/use-async-error.html" class="sidebar-link">useAsyncError</a></li><li><a href="/react-router6-doc/hooks/use-async-value.html" class="sidebar-link">useAsyncValue</a></li><li><a href="/react-router6-doc/hooks/use-before-unload.html" class="sidebar-link">useBeforeUnload</a></li><li><a href="/react-router6-doc/hooks/use-fetcher.html" class="sidebar-link">useFetcher</a></li><li><a href="/react-router6-doc/hooks/use-fetchers.html" class="sidebar-link">useFetchers</a></li><li><a href="/react-router6-doc/hooks/use-form-action.html" class="sidebar-link">useFormAction</a></li><li><a href="/react-router6-doc/hooks/use-href.html" class="sidebar-link">useHref</a></li><li><a href="/react-router6-doc/hooks/use-in-router-context.html" class="sidebar-link">useInRouterContext</a></li><li><a href="/react-router6-doc/hooks/use-link-click-handler.html" class="sidebar-link">useLinkClickHandler</a></li><li><a href="/react-router6-doc/hooks/use-link-press-handler.html" class="sidebar-link">useLinkPressHandler</a></li><li><a href="/react-router6-doc/hooks/use-loader-data.html" class="sidebar-link">useLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-location.html" class="sidebar-link">useLocation</a></li><li><a href="/react-router6-doc/hooks/use-match.html" class="sidebar-link">useMatch</a></li><li><a href="/react-router6-doc/hooks/use-matches.html" class="sidebar-link">useMatches</a></li><li><a href="/react-router6-doc/hooks/use-navigate.html" class="sidebar-link">useNavigate</a></li><li><a href="/react-router6-doc/hooks/use-navigation.html" class="sidebar-link">useNavigation</a></li><li><a href="/react-router6-doc/hooks/use-navigation-type.html" class="sidebar-link">useNavigationType</a></li><li><a href="/react-router6-doc/hooks/use-outlet.html" class="sidebar-link">useOutlet</a></li><li><a href="/react-router6-doc/hooks/use-outlet-context.html" class="sidebar-link">useOutletContext</a></li><li><a href="/react-router6-doc/hooks/use-params.html" class="sidebar-link">useParams</a></li><li><a href="/react-router6-doc/hooks/use-resolved-path.html" class="sidebar-link">useResolvedPath</a></li><li><a href="/react-router6-doc/hooks/use-revalidator.html" class="sidebar-link">useRevalidator</a></li><li><a href="/react-router6-doc/hooks/use-route-error.html" class="sidebar-link">useRouteError</a></li><li><a href="/react-router6-doc/hooks/use-route-loader-data.html" class="sidebar-link">useRouteLoaderData</a></li><li><a href="/react-router6-doc/hooks/use-routes.html" class="sidebar-link">useRoutes</a></li><li><a href="/react-router6-doc/hooks/use-search-params.html" class="sidebar-link">useSearchParams</a></li><li><a href="/react-router6-doc/hooks/use-search-params-rn.html" class="sidebar-link">useSearchParams(RN)</a></li><li><a href="/react-router6-doc/hooks/use-submit.html" class="sidebar-link">useSubmit</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/fetch/json" class="sidebar-heading clickable"><span>Fetch工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/fetch/json.html" class="sidebar-link">json</a></li><li><a href="/react-router6-doc/fetch/redirect.html" class="sidebar-link">redirect</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/utils/create-routes-from-children" class="sidebar-heading clickable"><span>工具类</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/utils/create-routes-from-children.html" class="sidebar-link">createRoutesFromChildren</a></li><li><a href="/react-router6-doc/utils/create-routes-from-elements.html" class="sidebar-link">createRoutesFromElements</a></li><li><a href="/react-router6-doc/utils/create-search-params.html" class="sidebar-link">createSearchParams</a></li><li><a href="/react-router6-doc/utils/defer.html" class="sidebar-link">defer</a></li><li><a href="/react-router6-doc/utils/generate-path.html" class="sidebar-link">generatePath</a></li><li><a href="/react-router6-doc/utils/is-route-error-response.html" class="sidebar-link">isRouteErrorResponse</a></li><li><a href="/react-router6-doc/utils/location.html" class="sidebar-link">Location</a></li><li><a href="/react-router6-doc/utils/match-path.html" class="sidebar-link">matchPath</a></li><li><a href="/react-router6-doc/utils/match-routes.html" class="sidebar-link">matchRoutes</a></li><li><a href="/react-router6-doc/utils/render-matches.html" class="sidebar-link">renderMatches</a></li><li><a href="/react-router6-doc/utils/resolve-path.html" class="sidebar-link">resolvePath</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-router6-doc/guides/ssr" class="sidebar-heading clickable"><span>指南</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-router6-doc/guides/ssr.html" class="sidebar-link">服务端渲染</a></li><li><a href="/react-router6-doc/guides/contributing.html" class="sidebar-link">贡献</a></li><li><a href="/react-router6-doc/guides/data-libs.html" class="sidebar-link">数据库整合</a></li><li><a href="/react-router6-doc/guides/deferred.html" class="sidebar-link">延迟数据</a></li><li><a href="/react-router6-doc/guides/form-data.html" class="sidebar-link">使用FormData</a></li><li><a href="/react-router6-doc/guides/index-search-param.html" class="sidebar-link">索引查询参数</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="客户端路由"><a href="#客户端路由" class="header-anchor">#</a> 客户端路由</h2> <p>React Router 启用“客户端路由”。</p> <p>在传统网站中，浏览器从 Web 服务器请求文档，下载和评估 CSS 和 JavaScript 资产，并呈现从服务器发送的 HTML。当用户单击链接时，它会为新页面重新开始该过程。</p> <p>客户端路由允许您的应用通过链接点击更新 URL，而无需从服务器再次请求另一个文档。相反，您的应用程序可以立即呈现一些新的 UI 并发出数据请求以<code>fetch</code>使用新信息更新页面。</p> <p>这可以实现更快的用户体验，因为浏览器不需要请求全新的文档或为下一页重新评估 CSS 和 JavaScript 资产。它还通过动画等方式实现更动态的用户体验。</p> <p><code>Router</code>通过创建一个并链接/提交到带有<code>Link</code>和的页面来启用客户端路由<code>&lt;Form&gt;</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createRoot <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-dom/client&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  createBrowserRouter<span class="token punctuation">,</span>
  RouterProvider<span class="token punctuation">,</span>
  Route<span class="token punctuation">,</span>
  Link<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello World<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">&quot;about&quot;</span><span class="token operator">&gt;</span>About Us<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;about&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">createRoot</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>RouterProvider router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="嵌套路由"><a href="#嵌套路由" class="header-anchor">#</a> 嵌套路由</h2> <p>嵌套路由是将 URL 段耦合到组件层次结构和数据的一般思想。React Router 的嵌套路由的灵感来自于 2014 年左右的 Ember.js 中的路由系统。Ember 团队意识到，几乎在每种情况下，URL 的片段都会确定：</p> <ul><li>要在页面上呈现的布局</li> <li>这些布局的数据依赖</li></ul> <p>React Router 将此约定与 API 结合起来，用于创建与 URL 段和数据耦合的嵌套布局。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Configure nested routes with JSX</span>
<span class="token function">createBrowserRouter</span><span class="token punctuation">(</span>
  <span class="token function">createRoutesFromElements</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;contact&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route
        path<span class="token operator">=</span><span class="token string">&quot;dashboard&quot;</span>
        element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Dashboard <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
        loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/dashboard.json&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">signal</span><span class="token operator">:</span> request<span class="token punctuation">.</span>signal<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Route element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>AuthLayout <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route
          path<span class="token operator">=</span><span class="token string">&quot;login&quot;</span>
          element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
          loader<span class="token operator">=</span><span class="token punctuation">{</span>redirectIfUser<span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;logout&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Or use plain objects</span>
<span class="token function">createBrowserRouter</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;contact&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Contact <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;dashboard&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Dashboard <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token function-variable function">loader</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/dashboard.json&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">signal</span><span class="token operator">:</span> request<span class="token punctuation">.</span>signal<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>AuthLayout <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">element</span><span class="token operator">:</span> <span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> redirectIfUser<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&quot;logout&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">action</span><span class="token operator">:</span> logoutUser<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这种<a href="https://remix.run/_docs/routing" target="_blank" rel="noopener noreferrer">可视化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>可能会有所帮助。</p> <h2 id="动态细分"><a href="#动态细分" class="header-anchor">#</a> 动态细分</h2> <p>URL 的片段可以是被解析并提供给各种 api 的动态占位符。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;projects/:projectId/tasks/:taskId&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>这两个段<code>:</code>是动态的，并提供给以下 API：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// If the current location is /projects/abc/tasks/3</span>
<span class="token operator">&lt;</span>Route
  <span class="token comment">// sent to loaders</span>
  loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    params<span class="token punctuation">.</span>projectId<span class="token punctuation">;</span> <span class="token comment">// abc</span>
    params<span class="token punctuation">.</span>taskId<span class="token punctuation">;</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token comment">// and actions</span>
  action<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    params<span class="token punctuation">.</span>projectId<span class="token punctuation">;</span> <span class="token comment">// abc</span>
    params<span class="token punctuation">.</span>taskId<span class="token punctuation">;</span> <span class="token comment">// 3</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
  element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Task <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Task</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// returned from `useParams`</span>
  <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token function">useParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  params<span class="token punctuation">.</span>projectId<span class="token punctuation">;</span> <span class="token comment">// abc</span>
  params<span class="token punctuation">.</span>taskId<span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">useMatch</span><span class="token punctuation">(</span>
    <span class="token string">&quot;/projects/:projectId/tasks/:taskId&quot;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>projectId<span class="token punctuation">;</span> <span class="token comment">// abc</span>
  match<span class="token punctuation">.</span>params<span class="token punctuation">.</span>taskId<span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/route/route#path" target="_blank" rel="noopener noreferrer"><code>&lt;Route path&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noopener noreferrer"><code>&lt;Route loader&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer"><code>&lt;Route action&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-params" target="_blank" rel="noopener noreferrer"><code>useParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-match" target="_blank" rel="noopener noreferrer"><code>useMatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="排名路线匹配"><a href="#排名路线匹配" class="header-anchor">#</a> 排名路线匹配</h2> <p>在将 URL 匹配到路由时，React Router 会根据段数、静态段、动态段、splats 等对路由进行排序，并选择<em>最具体</em>的匹配项。</p> <p>例如，考虑这两条路线：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/teams/:teamId&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;/teams/new&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>现在考虑 URL 是http://example.com/teams/new。</p> <p>即使两条路由在技术上都匹配 URL（<code>new</code>可能是<code>:teamId</code>），您凭直觉知道我们希望选择第二条路由（<code>/teams/new</code>）。React Router 的匹配算法也知道这一点。</p> <p>使用排名路线，您不必担心路线顺序。</p> <h2 id="活动链接"><a href="#活动链接" class="header-anchor">#</a> 活动链接</h2> <p>大多数 Web 应用程序在 UI 顶部、侧边栏和通常的多个级别都有持久的导航部分。使用可以轻松设置活动导航项的样式，以便用户知道它们在应用程序中的位置 ( <code>isActive</code>) 或它们要去的位置 ( ) 。<code>isPending``&lt;NavLink&gt;</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>NavLink
  style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isActive<span class="token punctuation">,</span> isPending <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">color</span><span class="token operator">:</span> isActive <span class="token operator">?</span> <span class="token string">&quot;red&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;inherit&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
  className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> isActive<span class="token punctuation">,</span> isPending <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> isActive <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span> <span class="token operator">:</span> isPending <span class="token operator">?</span> <span class="token string">&quot;pending&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>您还可以<a href="https://reactrouter.com/en/main/hooks/use-match" target="_blank" rel="noopener noreferrer"><code>useMatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>针对链接之外的任何其他“活动”指示。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SomeComp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> <span class="token function">useMatch</span><span class="token punctuation">(</span><span class="token string">&quot;/messages&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>li className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">Boolean</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">&quot;active&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/components/nav-link" target="_blank" rel="noopener noreferrer"><code>NavLink</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-match" target="_blank" rel="noopener noreferrer"><code>useMatch</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="相关链接"><a href="#相关链接" class="header-anchor">#</a> 相关链接</h2> <p>与 HTML 一样<code>&lt;a href&gt;</code>，可以采用相对路径，<code>&lt;Link to&gt;</code>并<code>&lt;NavLink to&gt;</code>具有嵌套路由的增强行为。</p> <p>给定以下路由配置：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;home&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Home <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;project/:projectId&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Project <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;:taskId&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Task <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre></div><p>考虑 url https://example.com/home/project/123，它呈现以下路由组件层次结构：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Home<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Project <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Home<span class="token operator">&gt;</span>
</code></pre></div><p>如果<code>&lt;Project /&gt;</code>呈现以下链接，链接的 hrefs 将像这样解析：</p> <table><thead><tr><th>在<code>&lt;Project&gt;</code>@<code>/home/project/123</code></th> <th>解决<code>&lt;a href&gt;</code></th></tr></thead> <tbody><tr><td><code>&lt;Link to=&quot;abc&quot;&gt;</code></td> <td><code>/home/project/123/abc</code></td></tr> <tr><td><code>&lt;Link to=&quot;.&quot;&gt;</code></td> <td><code>/home/project/123</code></td></tr> <tr><td><code>&lt;Link to=&quot;..&quot;&gt;</code></td> <td><code>/home</code></td></tr> <tr><td><code>&lt;Link to=&quot;..&quot; relative=&quot;path&quot;&gt;</code></td> <td><code>/home/project</code></td></tr></tbody></table> <p>请注意，第一个删除路线<code>..</code>的两个部分。<code>project/:projectId</code>默认情况下，<code>..</code>相对链接遍历路由层次结构，而不是 URL 段。在下一个示例中添加<code>relative=&quot;path&quot;</code>允许您改为遍历路径段。</p> <p>相对链接总是相对于它们在 中<em>呈现</em>的路由路径，而不是完整的 URL。这意味着如果用户在 URL中使用<code>&lt;Link to=&quot;abc&quot;&gt;</code>to进行更深入的导航，则 hrefs in将不会改变（与 plain 相反，这是客户端路由器的常见问题）。<code>&lt;Task /&gt;``/home/project/123/abc``&lt;Project&gt;``&lt;a href&gt;</code></p> <h2 id="数据加载"><a href="#数据加载" class="header-anchor">#</a> 数据加载</h2> <p>由于 URL 段通常映射到您应用程序的持久数据，因此 React Router 提供了传统的数据加载挂钩以在导航期间启动数据加载。结合嵌套路由，可以并行加载特定 URL 上多个布局的所有数据。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
  loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// loaders can be async functions</span>
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;/api/user.json&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">signal</span><span class="token operator">:</span> request<span class="token punctuation">.</span>signal<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
  element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Root <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Route
    path<span class="token operator">=</span><span class="token string">&quot;:teamId&quot;</span>
    <span class="token comment">// loaders understand Fetch Responses and will automatically</span>
    <span class="token comment">// unwrap the res.json(), so you can simply return a fetch</span>
    loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/teams/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">.</span>teamId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
    element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Team <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
  <span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Route
      path<span class="token operator">=</span><span class="token string">&quot;:gameId&quot;</span>
      loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// of course you can use any data store</span>
        <span class="token keyword">return</span> fakeSdk<span class="token punctuation">.</span><span class="token function">getTeam</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>gameId<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
      element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Game <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre></div><p>数据通过 提供给您的组件<code>useLoaderData</code>。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// data from &lt;Route path=&quot;/&quot;&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Team</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> team <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// data from &lt;Route path=&quot;:teamId&quot;&gt;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Game</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> game <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// data from &lt;Route path=&quot;:gameId&quot;&gt;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>当用户访问或单击指向https://example.com/real-salt-lake/45face3的链接时，将在该 URL 的 UI 呈现之前并行调用和加载所有三个路由加载器。</p> <h2 id="重定向"><a href="#重定向" class="header-anchor">#</a> 重定向</h2> <p>在加载或更改数据时，通常会将用户<a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer">重定向<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>到不同的路径。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;dashboard&quot;</span>
  loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> fake<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// if you know you can't render the route, you can</span>
      <span class="token comment">// throw a redirect to stop executing code here,</span>
      <span class="token comment">// sending the user to a new route</span>
      <span class="token keyword">throw</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// otherwise continue</span>
    <span class="token keyword">const</span> stats <span class="token operator">=</span> <span class="token keyword">await</span> fake<span class="token punctuation">.</span><span class="token function">getDashboardStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> stats <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;project/new&quot;</span>
  action<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> newProject <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createProject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// it's common to redirect after actions complete,</span>
    <span class="token comment">// sending the user to the new record</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newProject<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/fetch/redirect" target="_blank" rel="noopener noreferrer"><code>redirect</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/route/loader#throwing-in-loaders" target="_blank" rel="noopener noreferrer">Throwing in Loaders<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-navigate" target="_blank" rel="noopener noreferrer"><code>useNavigate</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="待定导航用户界面"><a href="#待定导航用户界面" class="header-anchor">#</a> 待定导航用户界面</h2> <p>当用户在应用程序中导航时，下一页的数据会在页面呈现之前加载。在此期间提供用户反馈很重要，这样应用程序才不会感觉没有响应。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Root</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>navigation<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;loading&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">&lt;</span>GlobalSpinner <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>FakeSidebar <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>Outlet <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>FakeFooter <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="骨架用户界面-suspense"><a href="#骨架用户界面-suspense" class="header-anchor">#</a> 骨架用户界面<code>&lt;Suspense&gt;</code></h2> <p>您可以数据，而不是等待下一页的数据，<a href="https://reactrouter.com/en/main/utils/defer" target="_blank" rel="noopener noreferrer"><code>defer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>以便在数据加载时 UI 立即翻转到具有占位符 UI 的下一个屏幕。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;issue/:issueId&quot;</span>
  element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Issue <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
  loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// these are promises, but *not* awaited</span>
    <span class="token keyword">const</span> comments <span class="token operator">=</span> fake<span class="token punctuation">.</span><span class="token function">getIssueComments</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>issueId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> history <span class="token operator">=</span> fake<span class="token punctuation">.</span><span class="token function">getIssueHistory</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>issueId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// the issue, however, *is* awaited</span>
    <span class="token keyword">const</span> issue <span class="token operator">=</span> <span class="token keyword">await</span> fake<span class="token punctuation">.</span><span class="token function">getIssue</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>issueId<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// defer enables suspense for the un-awaited promises</span>
    <span class="token keyword">return</span> <span class="token function">defer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> issue<span class="token punctuation">,</span> comments<span class="token punctuation">,</span> history <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Issue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> issue<span class="token punctuation">,</span> history<span class="token punctuation">,</span> comments <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>IssueDescription issue<span class="token operator">=</span><span class="token punctuation">{</span>issue<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

      <span class="token punctuation">{</span><span class="token comment">/* Suspense provides the placeholder fallback */</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>IssueHistorySkeleton <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Await manages the deferred data (promise) */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Await resolve<span class="token operator">=</span><span class="token punctuation">{</span>history<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* this calls back when the data is resolved */</span><span class="token punctuation">}</span>
          <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">resolvedHistory</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>IssueHistory history<span class="token operator">=</span><span class="token punctuation">{</span>resolvedHistory<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Await<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>

      <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>IssueCommentsSkeleton <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Await resolve<span class="token operator">=</span><span class="token punctuation">{</span>comments<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* ... or you can use hooks to access the data */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>IssueComments <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Await<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">IssueComments</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> comments <span class="token operator">=</span> <span class="token function">useAsyncValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看</p> <ul><li><a href="https://reactrouter.com/en/main/guides/deferred" target="_blank" rel="noopener noreferrer">延迟数据指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/utils/defer" target="_blank" rel="noopener noreferrer"><code>defer</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/components/await" target="_blank" rel="noopener noreferrer"><code>Await</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-async-value" target="_blank" rel="noopener noreferrer"><code>useAsyncValue</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="数据突变"><a href="#数据突变" class="header-anchor">#</a> 数据突变</h2> <p>HTML 表单是导航事件，就像链接一样。React Router 支持带有客户端路由的 HTML 表单工作流。</p> <p>提交表单时，将阻止正常的浏览器导航事件<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>Request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，并创建一个包含<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>FormData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>提交内容的正文。此请求将发送到<code>&lt;Route action&gt;</code>与表单的 匹配的<code>&lt;Form action&gt;</code>。</p> <p>表单元素的<code>name</code>prop 被提交给 action：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Form action<span class="token operator">=</span><span class="token string">&quot;/project/new&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
    Project title
    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
    Target Finish Date
    <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;date&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;due&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
</code></pre></div><p>正常的 HTML 文档请求被阻止并发送到匹配路由的操作（<code>&lt;Route path&gt;</code>匹配<code>&lt;form action&gt;</code>），包括<code>request.formData</code>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;project/new&quot;</span>
  action<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> formData <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">formData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> newProject <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">createProject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;title&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">due</span><span class="token operator">:</span> formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;due&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/projects/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newProject<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h2 id="数据重新验证"><a href="#数据重新验证" class="header-anchor">#</a> 数据重新验证</h2> <p>数十年的旧 Web 约定表明，当将表单发布到服务器时，数据会发生变化并呈现新页面。React Router 的基于 HTML 的数据突变 API 遵循该约定。</p> <p>调用路由操作后，将再次调用页面上所有数据的加载程序，以确保 UI 自动与数据保持同步。没有要过期的缓存键，没有要重新加载的上下文提供程序。</p> <p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/start/tutorial#creating-contacts" target="_blank" rel="noopener noreferrer">教程“创建联系人”<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="忙碌指示灯"><a href="#忙碌指示灯" class="header-anchor">#</a> 忙碌指示灯</h2> <p>将表单提交给路由操作时，您可以访问导航状态以显示忙碌指示器、禁用字段集等。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">NewProjectForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> navigation <span class="token operator">=</span> <span class="token function">useNavigation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> busy <span class="token operator">=</span> navigation<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;submitting&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Form action<span class="token operator">=</span><span class="token string">&quot;/project/new&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>fieldset disabled<span class="token operator">=</span><span class="token punctuation">{</span>busy<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
          Project title
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;title&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span>
          Target Finish Date
          <span class="token operator">&lt;</span>br <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;date&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;due&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> disabled<span class="token operator">=</span><span class="token punctuation">{</span>busy<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span>busy <span class="token operator">?</span> <span class="token string">&quot;Creating...&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Create&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/hooks/use-navigation" target="_blank" rel="noopener noreferrer"><code>useNavigation</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="乐观的用户界面"><a href="#乐观的用户界面" class="header-anchor">#</a> 乐观的用户界面</h2> <p>知道<a href="https://developer.mozilla.org/en-US/docs/Web/API/FormData" target="_blank" rel="noopener noreferrer"><code>formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>被发送到一个<a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer">动作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>通常足以跳过忙碌指示器并立即在下一个状态下呈现 UI，即使您的异步工作仍处于挂起状态。这称为“乐观 UI”。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">LikeButton</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> tweet <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// if there is `formData` then it is posting to the action</span>
  <span class="token keyword">const</span> liked <span class="token operator">=</span> fetcher<span class="token punctuation">.</span>formData
    <span class="token operator">?</span> <span class="token comment">// check the formData to be optimistic</span>
      fetcher<span class="token punctuation">.</span>formData<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;liked&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;yes&quot;</span>
    <span class="token operator">:</span> <span class="token comment">// if its not posting to the action, use the record's value</span>
      tweet<span class="token punctuation">.</span>liked<span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> action<span class="token operator">=</span><span class="token string">&quot;toggle-liked&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>button
        type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span>
        name<span class="token operator">=</span><span class="token string">&quot;liked&quot;</span>
        value<span class="token operator">=</span><span class="token punctuation">{</span>liked <span class="token operator">?</span> <span class="token string">&quot;yes&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;no&quot;</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>（是的，HTML 按钮可以有 a<code>name</code>和 a <code>value</code>）。</p> <p>虽然使用 来实现乐观 UI 更为常见，但<a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer"><code>fetcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>您也可以使用 来实现与普通表单相同的效果<a href="https://reactrouter.com/en/main/hooks/use-navigation#navigationformdata" target="_blank" rel="noopener noreferrer"><code>navigation.formData</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="数据获取器"><a href="#数据获取器" class="header-anchor">#</a> 数据获取器</h2> <p>HTML 表单是突变的模型，但它们有一个主要限制：您一次只能有一个，因为表单提交是一种导航。</p> <p>大多数网络应用程序需要允许同时发生多个突变，例如记录列表，其中每个记录都可以独立删除、标记为完成、喜欢等。</p> <p><a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer">Fetcher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>允许您与路由<a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer">操作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noopener noreferrer">加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>器交互，而不会在浏览器中引起导航，但仍然可以获得所有传统的好处，如错误处理、重新验证、中断处理和竞争条件处理。</p> <p>想象一下任务列表：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Tasks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tasks <span class="token operator">=</span> <span class="token function">useLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> tasks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">task</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ToggleCompleteButton task<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>每个任务都可以独立于其他任务标记为完成，具有自己的待处理状态，并且不会导致使用<a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer">fetcher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>进行导航：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">ToggleCompleteButton</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> task <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fetcher <span class="token operator">=</span> <span class="token function">useFetcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>fetcher<span class="token punctuation">.</span>Form method<span class="token operator">=</span><span class="token string">&quot;post&quot;</span> action<span class="token operator">=</span><span class="token string">&quot;/toggle-complete&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>fieldset disabled<span class="token operator">=</span><span class="token punctuation">{</span>fetcher<span class="token punctuation">.</span>state <span class="token operator">!==</span> <span class="token string">&quot;idle&quot;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;hidden&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;id&quot;</span> value<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span>id<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>input
          type<span class="token operator">=</span><span class="token string">&quot;hidden&quot;</span>
          name<span class="token operator">=</span><span class="token string">&quot;status&quot;</span>
          value<span class="token operator">=</span><span class="token punctuation">{</span>task<span class="token punctuation">.</span>complete <span class="token operator">?</span> <span class="token string">&quot;incomplete&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;complete&quot;</span><span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>task<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">&quot;complete&quot;</span>
            <span class="token operator">?</span> <span class="token string">&quot;Mark Incomplete&quot;</span>
            <span class="token operator">:</span> <span class="token string">&quot;Mark Complete&quot;</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>fieldset<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>fetcher<span class="token punctuation">.</span>Form<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer"><code>useFetcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="竞争条件处理"><a href="#竞争条件处理" class="header-anchor">#</a> 竞争条件处理</h2> <p>React Router 将取消陈旧的操作，只自动提交新数据。</p> <p>任何时候你有异步 UI，你都有竞争条件的风险：当一个异步操作在一个更早的操作之后开始但在一个更早的操作之前完成。结果是一个显示错误状态的用户界面。</p> <p>考虑一个在用户键入时更新列表的搜索字段：</p> <div class="language- extra-class"><pre class="language-text"><code>?q=ry    |---------------|
                         ^ commit wrong state
?q=ryan     |--------|
                     ^ lose correct state
</code></pre></div><p>尽管 的查询<code>q?=ryan</code>较晚结束，但它较早完成。如果处理不当，结果将暂时是 的正确值，<code>?q=ryan</code>但随后会翻转 的错误结果<code>?q=ry</code>。节流和去抖是不够的（你仍然可以中断通过的请求）。你需要取消。</p> <p>如果你使用 React Router 的数据约定，你可以完全自动地避免这个问题。</p> <div class="language- extra-class"><pre class="language-text"><code>?q=ry    |-----------X
                     ^ cancel wrong state when
                       correct state completes earlier
?q=ryan     |--------|
                     ^ commit correct state
</code></pre></div><p>React Router 不仅像这样处理导航的竞争条件，它还处理许多其他情况，例如为自动完成加载结果或执行多个并发突变<a href="https://reactrouter.com/en/main/hooks/use-fetcher" target="_blank" rel="noopener noreferrer"><code>fetcher</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>（及其自动、并发重新验证）。</p> <h2 id="错误处理"><a href="#错误处理" class="header-anchor">#</a> 错误处理</h2> <p>绝大多数应用程序错误都由 React Router 自动处理。它将捕获在以下情况下抛出的任何错误：</p> <ul><li>渲染</li> <li>加载数据中</li> <li>更新数据</li></ul> <p>实际上，除了事件处理程序 ( <code>&lt;button onClick&gt;</code>) 或<code>useEffect</code>. React Router 应用程序往往都很少。</p> <p>抛出错误时，不会渲染路由的<a href="https://reactrouter.com/en/main/route/route#element" target="_blank" rel="noopener noreferrer"><code>element</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>errorElement</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>而是渲染 。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
  loader<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    something<span class="token punctuation">.</span>that<span class="token punctuation">.</span>throws<span class="token punctuation">.</span>an<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token comment">// this will not be rendered</span>
  element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>HappyPath <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
  <span class="token comment">// but this will instead</span>
  errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorBoundary <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>如果路由没有<code>errorElement</code>，错误将冒泡到最近的父路由<code>errorElement</code>：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>Route
  path<span class="token operator">=</span><span class="token string">&quot;/&quot;</span>
  element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>HappyPath <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
  errorElement<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>ErrorBoundary <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
  <span class="token punctuation">{</span><span class="token comment">/* Errors here bubble up to the parent route */</span><span class="token punctuation">}</span>
  <span class="token operator">&lt;</span>Route path<span class="token operator">=</span><span class="token string">&quot;login&quot;</span> element<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>Login <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Route<span class="token operator">&gt;</span>
</code></pre></div><p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/route/error-element" target="_blank" rel="noopener noreferrer"><code>&lt;Route errorElement&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://reactrouter.com/en/main/hooks/use-route-error" target="_blank" rel="noopener noreferrer"><code>useRouteError</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="滚动恢复"><a href="#滚动恢复" class="header-anchor">#</a> 滚动恢复</h2> <p>React Router 会在导航时模拟浏览器的滚动还原，等待数据加载后再滚动。这确保滚动位置恢复到正确的位置。</p> <p>您还可以通过基于位置以外的其他内容（如 url 路径名）恢复并防止滚动发生在某些链接（如页面中间的选项卡）来自定义行为。</p> <p>看：</p> <ul><li><a href="https://reactrouter.com/en/main/components/scroll-restoration" target="_blank" rel="noopener noreferrer"><code>&lt;ScrollRestoration&gt;</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="网络标准-api"><a href="#网络标准-api" class="header-anchor">#</a> 网络标准 API</h2> <p>React Router 建立在网络标准 API 之上。<a href="https://reactrouter.com/en/main/route/loader" target="_blank" rel="noopener noreferrer">加载<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>程序和<a href="https://reactrouter.com/en/main/route/action" target="_blank" rel="noopener noreferrer">操作<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>接收标准的 Web Fetch API<a href="https://developer.mozilla.org/en-US/docs/Web/API/Request" target="_blank" rel="noopener noreferrer"><code>Request</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象，也可以返回<a href="https://developer.mozilla.org/en-US/docs/Web/API/Response" target="_blank" rel="noopener noreferrer"><code>Response</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>对象。取消是通过<a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal" target="_blank" rel="noopener noreferrer">Abort Signals<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>完成的，搜索参数是通过 处理的<a href="https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams" target="_blank" rel="noopener noreferrer"><code>URLSearchParams</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，数据突变是通过<a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form" target="_blank" rel="noopener noreferrer">HTML Forms<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>处理的。</p> <p>当你在 React Router 上做得更好时，你在 Web 平台上也会做得更好。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/baimingxuan/react-router6-doc/edit/main/docs/start/overview.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新时间:</span> <span class="time">2023/1/29 下午3:19:11</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/react-router6-doc/start/tutorial.html">
        教程
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/react-router6-doc/assets/js/app.3977e6ed.js" defer></script><script src="/react-router6-doc/assets/js/2.6430ac10.js" defer></script><script src="/react-router6-doc/assets/js/73.e5cc737c.js" defer></script>
  </body>
</html>
